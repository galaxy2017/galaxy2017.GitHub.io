"use strict";(self.webpackChunkdocs_luomoe_com=self.webpackChunkdocs_luomoe_com||[]).push([[1281],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>f});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=a.createContext({}),s=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=s(e.components);return a.createElement(i.Provider,{value:n},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=s(t),d=l,f=m["".concat(i,".").concat(d)]||m[d]||c[d]||o;return t?a.createElement(f,r(r({ref:n},u),{},{components:t})):a.createElement(f,r({ref:n},u))}));function f(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var o=t.length,r=new Array(o);r[0]=d;var p={};for(var i in n)hasOwnProperty.call(n,i)&&(p[i]=n[i]);p.originalType=e,p[m]="string"==typeof e?e:l,r[1]=p;for(var s=2;s<o;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4287:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var a=t(7462),l=(t(7294),t(3905));const o={title:"Vue3",sidebar_position:10},r=void 0,p={unversionedId:"JavaScript/Vue3/vue3",id:"JavaScript/Vue3/vue3",title:"Vue3",description:"\u6ce8\u610f\uff1avue3\u7248\u672c\u66f4\u65b0\u8f83\u5feb\uff0c\u8fd9\u4e2a\u7b14\u8bb0\u53ef\u80fd\u5e76\u4e0d\u5b8c\u5168\u9002\u5408\u60a8\u5f53\u524d\u4f7f\u7528\u7684\u7248\u672c",source:"@site/docs/JavaScript/Vue3/vue3.md",sourceDirName:"JavaScript/Vue3",slug:"/JavaScript/Vue3/",permalink:"/docs/JavaScript/Vue3/",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{title:"Vue3",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"typescript",permalink:"/docs/JavaScript/typescript/"}},i={},s=[{value:"1.1 \u4e86\u89e3\u76f8\u5173\u4fe1\u606f",id:"11-\u4e86\u89e3\u76f8\u5173\u4fe1\u606f",level:2},{value:"1.2 \u6027\u80fd\u63d0\u5347",id:"12-\u6027\u80fd\u63d0\u5347",level:2},{value:"1.3 \u65b0\u589e\u7279\u6027",id:"13-\u65b0\u589e\u7279\u6027",level:2},{value:"2.1 \u4f7f\u7528 vue-cli \u521b\u5efa\uff08\u4e3b\u8981\u4ee5\u811a\u624b\u67b6\u521b\u5efavue3\u9879\u76ee\uff09",id:"21-\u4f7f\u7528-vue-cli-\u521b\u5efa\u4e3b\u8981\u4ee5\u811a\u624b\u67b6\u521b\u5efavue3\u9879\u76ee",level:2},{value:"2.2 \u4f7f\u7528 vite \u521b\u5efa",id:"22-\u4f7f\u7528-vite-\u521b\u5efa",level:2},{value:"3.1  setup",id:"31--setup",level:2},{value:"3.2 ref",id:"32-ref",level:2},{value:"3.3 reactive",id:"33-reactive",level:2},{value:"3.4 \u6bd4\u8f83Vue2\u4e0eVue3\u7684\u54cd\u5e94\u5f0f(\u91cd\u8981)",id:"34-\u6bd4\u8f83vue2\u4e0evue3\u7684\u54cd\u5e94\u5f0f\u91cd\u8981",level:2},{value:"3.4.1 vue2\u7684\u54cd\u5e94\u5f0f",id:"341-vue2\u7684\u54cd\u5e94\u5f0f",level:2},{value:"3.4.2 Vue3\u7684\u54cd\u5e94\u5f0f",id:"342-vue3\u7684\u54cd\u5e94\u5f0f",level:2},{value:"3.5 setup\u7ec6\u8282",id:"35-setup\u7ec6\u8282",level:2},{value:"3.6 reactive\u4e0eref-\u7ec6\u8282",id:"36-reactive\u4e0eref-\u7ec6\u8282",level:2},{value:"3.7  \u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6",id:"37--\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6",level:2},{value:"3.8 \u751f\u547d\u5468\u671f",id:"38-\u751f\u547d\u5468\u671f",level:2},{value:"3.9 \u81ea\u5b9a\u4e49hook\u51fd\u6570",id:"39-\u81ea\u5b9a\u4e49hook\u51fd\u6570",level:2},{value:"3.10 toRefs",id:"310-torefs",level:2},{value:"3.11 ref\u83b7\u53d6\u5143\u7d20",id:"311-ref\u83b7\u53d6\u5143\u7d20",level:2},{value:"4.1  shallowReactive \u4e0e shallowRef",id:"41--shallowreactive-\u4e0e-shallowref",level:2},{value:"4.2 readonly \u4e0e shallowReadonly",id:"42-readonly-\u4e0e-shallowreadonly",level:2},{value:"4.3 toRaw \u4e0e markRaw",id:"43-toraw-\u4e0e-markraw",level:2},{value:"4.4 toRef",id:"44-toref",level:2},{value:"4.5 customRef",id:"45-customref",level:2},{value:"4.6 provide \u4e0e inject",id:"46-provide-\u4e0e-inject",level:2},{value:"4.7 \u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad",id:"47-\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad",level:2},{value:"5.1 shallowReactive \u4e0e reactive",id:"51-shallowreactive-\u4e0e-reactive",level:2},{value:"5.2 shallowRef \u4e0e ref",id:"52-shallowref-\u4e0e-ref",level:2},{value:"5.3 shallowReadonly \u4e0e readonly",id:"53-shallowreadonly-\u4e0e-readonly",level:2},{value:"5.4 isRef, isReactive, isReadonly\u4e0eisProxy",id:"54-isref-isreactive-isreadonly\u4e0eisproxy",level:2},{value:"6.1 Option API\u7684\u95ee\u9898",id:"61-option-api\u7684\u95ee\u9898",level:2},{value:"6.2 \u4f7f\u7528Compisition API",id:"62-\u4f7f\u7528compisition-api",level:2},{value:"7.1 Fragment(\u7247\u65ad)",id:"71-fragment\u7247\u65ad",level:2},{value:"7.2 Teleport(\u77ac\u79fb)",id:"72-teleport\u77ac\u79fb",level:2},{value:"7.3 Suspense",id:"73-suspense",level:2},{value:"8.1 \u5168\u65b0\u7684\u5168\u5c40API",id:"81-\u5168\u65b0\u7684\u5168\u5c40api",level:2},{value:"8.2 \u5c06\u539f\u6765\u7684\u5168\u5c40API\u8f6c\u79fb\u5230\u5e94\u7528\u5bf9\u8c61",id:"82-\u5c06\u539f\u6765\u7684\u5168\u5c40api\u8f6c\u79fb\u5230\u5e94\u7528\u5bf9\u8c61",level:2},{value:"8.3 \u6a21\u677f\u8bed\u6cd5\u53d8\u5316",id:"83-\u6a21\u677f\u8bed\u6cd5\u53d8\u5316",level:2},{value:"9.1 \u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3",id:"91-\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3",level:3},{value:"9.2 \u8bbe\u7f6e\u4e00\u4e2a\u7f13\u5b58\u5de5\u5177",id:"92-\u8bbe\u7f6e\u4e00\u4e2a\u7f13\u5b58\u5de5\u5177",level:3},{value:"9.3 \u5199\u7ec4\u4ef6",id:"93-\u5199\u7ec4\u4ef6",level:3}],u={toc:s};function m(e){let{components:n,...o}=e;return(0,l.kt)("wrapper",(0,a.Z)({},u,o,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"\u6ce8\u610f\uff1avue3\u7248\u672c\u66f4\u65b0\u8f83\u5feb\uff0c\u8fd9\u4e2a\u7b14\u8bb0\u53ef\u80fd\u5e76\u4e0d\u5b8c\u5168\u9002\u5408\u60a8\u5f53\u524d\u4f7f\u7528\u7684\u7248\u672c")),(0,l.kt)("h1",{id:"1-\u8ba4\u8bc6vue3"},"1. \u8ba4\u8bc6Vue3"),(0,l.kt)("h2",{id:"11-\u4e86\u89e3\u76f8\u5173\u4fe1\u606f"},"1.1 \u4e86\u89e3\u76f8\u5173\u4fe1\u606f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'Vue.js 3.0 "One Piece" \u6b63\u5f0f\u7248\u57282020\u5e749\u6708\u4efd\u53d1\u5e03'),(0,l.kt)("li",{parentName:"ul"},"2\u5e74\u591a\u5f00\u53d1, 100+\u4f4d\u8d21\u732e\u8005, 2600+\u6b21\u63d0\u4ea4, 600+\u6b21PR"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Vue3\u652f\u6301vue2\u7684\u5927\u591a\u6570\u7279\u6027")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u66f4\u597d\u7684\u652f\u6301Typescript"))),(0,l.kt)("h2",{id:"12-\u6027\u80fd\u63d0\u5347"},"1.2 \u6027\u80fd\u63d0\u5347"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6253\u5305\u5927\u5c0f\u51cf\u5c1141%"),(0,l.kt)("li",{parentName:"ul"},"\u521d\u6b21\u6e32\u67d3\u5feb55%, \u66f4\u65b0\u6e32\u67d3\u5feb133%"),(0,l.kt)("li",{parentName:"ul"},"\u5185\u5b58\u51cf\u5c1154%"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u4f7f\u7528Proxy\u4ee3\u66ffdefineProperty\u5b9e\u73b0\u6570\u636e\u54cd\u5e94\u5f0f")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u91cd\u5199\u865a\u62dfDOM\u7684\u5b9e\u73b0\u548cTree-Shaking"))),(0,l.kt)("h2",{id:"13-\u65b0\u589e\u7279\u6027"},"1.3 \u65b0\u589e\u7279\u6027"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Composition (\u7ec4\u5408) API")),(0,l.kt)("li",{parentName:"ul"},"setup",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"ref \u548c reactive"),(0,l.kt)("li",{parentName:"ul"},"computed \u548c watch"),(0,l.kt)("li",{parentName:"ul"},"\u65b0\u7684\u751f\u547d\u5468\u671f\u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},"provide\u4e0einject"),(0,l.kt)("li",{parentName:"ul"},"..."))),(0,l.kt)("li",{parentName:"ul"},"\u65b0\u7ec4\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Fragment - \u6587\u6863\u788e\u7247"),(0,l.kt)("li",{parentName:"ul"},"Teleport - \u77ac\u79fb\u7ec4\u4ef6\u7684\u4f4d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"Suspense - \u5f02\u6b65\u52a0\u8f7d\u7ec4\u4ef6\u7684loading\u754c\u9762"))),(0,l.kt)("li",{parentName:"ul"},"\u5176\u5b83API\u66f4\u65b0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5168\u5c40API\u7684\u4fee\u6539"),(0,l.kt)("li",{parentName:"ul"},"\u5c06\u539f\u6765\u7684\u5168\u5c40API\u8f6c\u79fb\u5230\u5e94\u7528\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u677f\u8bed\u6cd5\u53d8\u5316")))),(0,l.kt)("h1",{id:"2-\u521b\u5efavue3\u9879\u76ee"},"2. \u521b\u5efavue3\u9879\u76ee"),(0,l.kt)("h2",{id:"21-\u4f7f\u7528-vue-cli-\u521b\u5efa\u4e3b\u8981\u4ee5\u811a\u624b\u67b6\u521b\u5efavue3\u9879\u76ee"},"2.1 \u4f7f\u7528 vue-cli \u521b\u5efa\uff08\u4e3b\u8981\u4ee5\u811a\u624b\u67b6\u521b\u5efavue3\u9879\u76ee\uff09"),(0,l.kt)("p",null,"\u6587\u6863: ",(0,l.kt)("a",{parentName:"p",href:"https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create"},"https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"## \u5b89\u88c5\u6216\u8005\u5347\u7ea7\nnpm install -g @vue/cli\n## \u4fdd\u8bc1 vue cli \u7248\u672c\u5728 4.5.0 \u4ee5\u4e0a\nvue --version\n## \u521b\u5efa\u9879\u76ee\nvue create my-project\n")),(0,l.kt)("p",null,"\u5982\u679c\u4e4b\u524d\u6709\u9884\u8bbe\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9\u8fd9\u4e00\u4e2a\u9009\u9879\uff1a  Manually select features \uff08\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5219\u8df3\u8fc7\u8fdb\u5165\u4e0b\u4e00\u6b65\uff09"),(0,l.kt)("p",null,"\u7136\u540e\u7684\u6b65\u9aa4"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Please pick a preset - \u9009\u62e9 ",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("em",{parentName:"strong"},"Manually select features"))),(0,l.kt)("li",{parentName:"ul"},"Check the features needed for your project - \u9009\u62e9\u4e0a ",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("em",{parentName:"strong"},"TypeScript"))," \uff0c\u7279\u522b\u6ce8\u610f\u70b9\u7a7a\u683c\u662f\u9009\u62e9\uff0c\u70b9\u56de\u8f66\u662f\u4e0b\u4e00\u6b65"),(0,l.kt)("li",{parentName:"ul"},"Choose a version of Vue.js that you want to start the project with - \u9009\u62e9 ",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("em",{parentName:"strong"},"3.x (Preview)"))),(0,l.kt)("li",{parentName:"ul"},"Use class-style component syntax - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Use Babel alongside TypeScript - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Pick a linter / formatter config - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Use history mode for router? - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Pick a linter / formatter config - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Pick additional lint features - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Where do you prefer placing config for Babel, ESLint, etc.? - \u76f4\u63a5\u56de\u8f66"),(0,l.kt)("li",{parentName:"ul"},"Save this as a preset for future projects? - \u76f4\u63a5\u56de\u8f66")),(0,l.kt)("h2",{id:"22-\u4f7f\u7528-vite-\u521b\u5efa"},"2.2 \u4f7f\u7528 vite \u521b\u5efa"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6587\u6863: ",(0,l.kt)("a",{parentName:"li",href:"https://v3.cn.vuejs.org/guide/installation.html"},"https://v3.cn.vuejs.org/guide/installation.html")),(0,l.kt)("li",{parentName:"ul"},"vite \u662f\u4e00\u4e2a\u7531\u539f\u751f ESM \u9a71\u52a8\u7684 Web \u5f00\u53d1\u6784\u5efa\u5de5\u5177\u3002\u5728\u5f00\u53d1\u73af\u5883\u4e0b\u57fa\u4e8e\u6d4f\u89c8\u5668\u539f\u751f ES imports \u5f00\u53d1\uff0c"),(0,l.kt)("li",{parentName:"ul"},"\u5b83\u505a\u5230\u4e86",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("em",{parentName:"strong"},"\u672c\u5730\u5feb\u901f\u5f00\u53d1\u542f\u52a8")),", \u5728\u751f\u4ea7\u73af\u5883\u4e0b\u57fa\u4e8e Rollup \u6253\u5305\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5feb\u901f\u7684\u51b7\u542f\u52a8\uff0c\u4e0d\u9700\u8981\u7b49\u5f85\u6253\u5305\u64cd\u4f5c\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u5373\u65f6\u7684\u70ed\u6a21\u5757\u66f4\u65b0\uff0c\u66ff\u6362\u6027\u80fd\u548c\u6a21\u5757\u6570\u91cf\u7684\u89e3\u8026\u8ba9\u66f4\u65b0\u98de\u8d77\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u771f\u6b63\u7684\u6309\u9700\u7f16\u8bd1\uff0c\u4e0d\u518d\u7b49\u5f85\u6574\u4e2a\u5e94\u7528\u7f16\u8bd1\u5b8c\u6210\uff0c\u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6539\u53d8\u3002")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm init vite-app <project-name>\ncd <project-name>\nnpm install\nnpm run dev\n")),(0,l.kt)("p",null,"\u4e00\u822c\u6765\u8bf4\u6709\u4e24\u4e2a\u7248\u672c\uff1a"),(0,l.kt)("p",null,"\u76f4\u63a5JavaScript\u7248\u672c\uff0c\u8fd0\u884c\u540e\uff0c\u6d4f\u89c8\u5668\u6253\u5f00\u7684\u7684\u9875\u9762\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20220906093706695",src:t(8627).Z,width:"2561",height:"1286"})),(0,l.kt)("p",null,"\u4e5f\u6709Vue.js + TypeScript App"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20220906093826711",src:t(346).Z,width:"2561",height:"1292"})),(0,l.kt)("h1",{id:"3-composition-api\u5e38\u7528\u90e8\u5206"},"3. Composition API(\u5e38\u7528\u90e8\u5206)"),(0,l.kt)("p",null,"\u6587\u6863:"),(0,l.kt)("p",null," ",(0,l.kt)("a",{parentName:"p",href:"https://composition-api.vuejs.org/zh/api.html"},"https://composition-api.vuejs.org/zh/api.html")),(0,l.kt)("h2",{id:"31--setup"},"3.1  setup"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u65b0\u7684option, \u6240\u6709\u7684\u7ec4\u5408API\u51fd\u6570\u90fd\u5728\u6b64\u4f7f\u7528, \u53ea\u5728\u521d\u59cb\u5316\u65f6\u6267\u884c\u4e00\u6b21"),(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u5982\u679c\u8fd4\u56de\u5bf9\u8c61, \u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u6216\u65b9\u6cd5, \u6a21\u677f\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528")),(0,l.kt)("h2",{id:"32-ref"},"3.2 ref"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f5c\u7528: \u5b9a\u4e49\u4e00\u4e2a\u6570\u636e\u7684\u54cd\u5e94\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"\u8bed\u6cd5: const xxx = ref(initValue):",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5f15\u7528(reference)\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"js\u4e2d\u64cd\u4f5c\u6570\u636e: xxx.value"),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u677f\u4e2d\u64cd\u4f5c\u6570\u636e: \u4e0d\u9700\u8981.value"))),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u822c\u7528\u6765\u5b9a\u4e49\u4e00\u4e2a\u57fa\u672c\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f\u6570\u636e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>{{count}}</h2>\n  <hr>\n  <button @click=\"update\">\u66f4\u65b0</button>\n</template>\n\n<script>\nimport {\n  ref\n} from 'vue'\nexport default {\n\n  /* \u5728Vue3\u4e2d\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528data\u548cmethods\u914d\u7f6e, \u4f46\u5efa\u8bae\u4f7f\u7528\u5176\u65b0\u8bed\u6cd5\u5b9e\u73b0 */\n  // data () {\n  //   return {\n  //     count: 0\n  //   }\n  // },\n  // methods: {\n  //   update () {\n  //     this.count++\n  //   }\n  // }\n\n  /* \u4f7f\u7528vue3\u7684composition API */\n  setup () {\n\n    // \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e ref\u5bf9\u8c61\n    const count = ref(1)    //\u521d\u59cb\u503c\u4e3a1\n    console.log(count)\n\n    // \u66f4\u65b0\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u51fd\u6570\n    function update () {\n      // alert('update')\n      count.value = count.value + 1\n    }\n\n    return {\n      count,\n      update\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("p",null,"TS\u7248\u672c\uff08\u4e9b\u8bb8\u533a\u522b\uff09"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <div>vue for TS</div>\n  <h1>set up \u548c ref \u7684\u57fa\u672c\u4f7f\u7528</h1>\n  <h3>{{count}}</h3>\n  <button @click=\"updataCount\">\u6570\u636e\u66f4\u65b0</button>\n\n</template>\n\n<script lang=\"ts\">\n\nimport { defineComponent, ref } from 'vue';\n\nexport default defineComponent({\n  name: 'App',\n  //\u9700\u6c42\uff1a\u9875\u9762\u6253\u5f00\u540e\u53ef\u4ee5\u76f4\u63a5\u770b\u5230\u4e00\u4e2a\u6570\u636e\uff0c\u70b9\u51fb\u6309\u94ae\u540e\uff0c\u8be5\u6570\u636e\u53d1\u751f\u53d8\u5316\n  //vue2\n  // data(){\n  //   return {\n  //     count : 0\n  //   }\n  // },\n  // methods:{\n  //   updataCount(){\n  //     this.count++\n  //   },\n  // },\n\n  //vue3\n  setup(){\n    //\u53d8\u91cf\n    let count = ref(0)\n    //ref\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f5c\u7528\uff1a\u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u6570\u636e\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2aRef\u5bf9\u8c61\uff0c\u5bf9\u8c61\u4e2d\u6709\u4e00\u4e2avalue\u5c5e\u6027\uff0c\u5982\u679c\u9700\u8981\u5bf9\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\uff0c\u9700\u8981\u5bf9\u8be5Ref\u5bf9\u8c61\u8c03\u7528value\u5c5e\u6027\u7684\u65b9\u5f0f\u8fdb\u884c\u6570\u636e\u64cd\u4f5c\uff0ccount\u7684\u7c7b\u578b\u662fRef\u7c7b\u578b\n    // html\u4e2d\u7684\u6a21\u677f\u4e2d\u4e0d\u9700\u8981.value\u7684\u5c5e\u6027\u7684\u5199\u6cd5\n    //\u65b9\u6cd5\n    function updataCount(){\n      console.log('========')\n      // count++  \u62a5\u9519\uff0c\u56e0\u4e3a\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u4e0d\u80fd\u8fdb\u884c++\u64cd\u4f5c\n      count.value++\n    }\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      count,        //\u5c5e\u6027\n      updataCount,    //\u65b9\u6cd5\n    }\n  }\n\n});\n<\/script>\n")),(0,l.kt)("h2",{id:"33-reactive"},"3.3 reactive"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f5c\u7528: \u5b9a\u4e49\u591a\u4e2a\u6570\u636e\u7684\u54cd\u5e94\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"const proxy = reactive(obj): \u63a5\u6536\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\u7136\u540e\u8fd4\u56de\u8be5\u666e\u901a\u5bf9\u8c61\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406\u5668\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u5f0f\u8f6c\u6362\u662f\u201c\u6df1\u5c42\u7684\u201d\uff1a\u4f1a\u5f71\u54cd\u5bf9\u8c61\u5185\u90e8\u6240\u6709\u5d4c\u5957\u7684\u5c5e\u6027"),(0,l.kt)("li",{parentName:"ul"},"\u5185\u90e8\u57fa\u4e8e ES6 \u7684 Proxy \u5b9e\u73b0\uff0c\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u64cd\u4f5c\u6e90\u5bf9\u8c61\u5185\u90e8\u6570\u636e\u90fd\u662f\u54cd\u5e94\u5f0f\u7684")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>name: {{state.name}}</h2>\n  <h2>age: {{state.age}}</h2>\n  <h2>wife: {{state.wife}}</h2>\n  <hr>\n  <button @click=\"update\">\u66f4\u65b0</button>\n</template>\n\n<script>\n/* \nreactive: \n    \u4f5c\u7528: \u5b9a\u4e49\u591a\u4e2a\u6570\u636e\u7684\u54cd\u5e94\u5f0f\n    const proxy = reactive(obj): \u63a5\u6536\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\u7136\u540e\u8fd4\u56de\u8be5\u666e\u901a\u5bf9\u8c61\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406\u5668\u5bf9\u8c61\n    \u54cd\u5e94\u5f0f\u8f6c\u6362\u662f\u201c\u6df1\u5c42\u7684\u201d\uff1a\u4f1a\u5f71\u54cd\u5bf9\u8c61\u5185\u90e8\u6240\u6709\u5d4c\u5957\u7684\u5c5e\u6027\n    \u5185\u90e8\u57fa\u4e8e ES6 \u7684 Proxy \u5b9e\u73b0\uff0c\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u64cd\u4f5c\u6e90\u5bf9\u8c61\u5185\u90e8\u6570\u636e\u90fd\u662f\u54cd\u5e94\u5f0f\u7684\n*/\nimport {\n  reactive,\n} from 'vue'\nexport default {\n  setup () {\n    /* \n    \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\n    */\n    const state = reactive({\n      name: 'tom',\n      age: 25,\n      wife: {\n        name: 'marry',\n        age: 22\n      },\n    })\n    console.log(state, state.wife)\n\n    const update = () => {\n      state.name += '--'\n      state.age += 1\n      state.wife.name += '++'\n      state.wife.age += 2\n    }\n\n    return {\n      state,\n      update,\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("p",null,"TS\u7248\u672c\uff08\u4e9b\u8bb8\u533a\u522b\uff09"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>vue for TS</h1>\n  <h2>reactive\u7684\u5e94\u7528</h2>\n  <h3>\u540d\u5b57:{{user.name}}</h3>\n  <h3>\u5e74\u9f84:{{user.age}}</h3>\n  <h3>\u6027\u522b:{{user.gender}}</h3>\n  <h3>CV\uff1a{{user.other.CV}}</h3>\n  <button @click=\"updataUser\">\u66f4\u65b0\u6570\u636e</button>\n\n\n</template>\n\n<script lang=\"ts\">\n\nimport { defineComponent, reactive } from 'vue';\n\nexport default defineComponent({\n  name: 'App',\n  //\u9700\u6c42\uff1a\u663e\u793a\u7528\u6237\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u70b9\u51fb\u6309\u94ae\uff0c\u53ef\u4ee5\u66f4\u65b0\u7528\u6237\u7684\u76f8\u5173\u4fe1\u606f\u6570\u636e\n\n  //vue3\n  /**\n   * - \u4f5c\u7528: \u5b9a\u4e49\u591a\u4e2a\u6570\u636e\u7684\u54cd\u5e94\u5f0f\n   * - const proxy = reactive(obj): \u63a5\u6536\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\u7136\u540e\u8fd4\u56de\u8be5\u666e\u901a\u5bf9\u8c61\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406\u5668\u5bf9\u8c61\n   * - \u54cd\u5e94\u5f0f\u8f6c\u6362\u662f\u201c\u6df1\u5c42\u7684\u201d\uff1a\u4f1a\u5f71\u54cd\u5bf9\u8c61\u5185\u90e8\u6240\u6709\u5d4c\u5957\u7684\u5c5e\u6027\n   * - \u5185\u90e8\u57fa\u4e8e ES6 \u7684 Proxy \u5b9e\u73b0\uff0c\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u64cd\u4f5c\u6e90\u5bf9\u8c61\u5185\u90e8\u6570\u636e\u90fd\u662f\u54cd\u5e94\u5f0f\u7684\n   */\n  setup(){\n\n    const obj: any = {\n      //obj\u5bf9\u8c61\n      name:'barbatos',\n      age:3000,\n      // gender:'\u7537 ',\n      other:{\n        name:'Venti',\n        nickname:'\u5356\u5531\u7684',\n        CV:['\u55b5\u2606\u9171\u3010\u4e2d\u3011','\u6751\u6fd1\u6b65\u3010\u65e5\u3011'],\n      }\n    }\n\n    //\u628a\u6570\u636e\u53d8\u6210\u76f8\u5e94\u5f0f\n    //\u8fd4\u56de\u7684\u662f\u4e00\u4e2aProxy(\u4ee3\u7406)\u5bf9\u8c61\uff0c\u88ab\u4ee3\u7406\u8005\u5f0fobj\u5bf9\u8c61\n    //user \u73b0\u5728\u662f\u4ee3\u7406\u5bf9\u8c61\uff0c\u7c7b\u578b\u662fProxy(\u4ee3\u7406)\u7c7b\u578b\uff0cobj\u662f\u76ee\u6807\u5bf9\u8c61\n    const user = reactive(obj)\n    console.log(user)\n\n    //\u65b9\u6cd5\n    const updataUser = ()=>{\n      user.name = '\u6e29\u8fea'\n      // obj.name = '\u5356\u5531\u7684'\n      // \u76f4\u63a5\u4f7f\u7528\u76ee\u6807\u5bf9\u8c61\u7684\u65b9\u5f0f\u66f4\u65b0\u76ee\u6807\u5bf9\u8c61\u4e2d\u7684\u6210\u5458\u7684\u503c\u3002\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u4ee3\u7406\u5bf9\u8c61\u7684\u65b9\u5f0f\u6765\u66f4\u65b0\u6570\u636e\n\n      //user\u5bf9\u8c61\u6216\u8005obj\u5bf9\u8c61\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5c5e\u6027\uff0c\u54ea\u4e00\u79cd\u65b9\u6cd5\u4f1a\u5f71\u54cd\u754c\u9762\u7684\u66f4\u65b0?\n      //obj.gender = '\u5973'  //\u5728\u8001\u4e00\u4e9b\u7684\u7248\u672c\u4e2d\uff0c\u9875\u9762\u6ca1\u6709\u66f4\u65b0\uff0c\u4f46\u662f\u5728\u65b0\u7248\u672c\u4e2d\uff0c\u8fd9\u4e2a\u9875\u9762\u4e5f\u53ef\u4ee5\u66f4\u65b0\u4e86\n      user.gender = '\u7537'   //\u5982\u679c\u8981\u66f4\u65b0\u6570\u636e\uff0c\u63a8\u8350\u4f7f\u7528\u672c\u65b9\u6cd5\uff0c\u9875\u9762\u66f4\u65b0\u6e32\u67d3\uff0c\u4e14\u4e5f\u6dfb\u52a0\u5230\u4e86obj\u5bf9\u8c61\u4e0a\n\n      // delete obj.age\n      //delete user.age   //\u5220\u9664\u5bf9\u8c61\u6548\u679c\uff0c\u540c\u4e0a\n      console.log(user)\n\n      user.other.CV[2]= '\u827e\u4e3d\u5361\xb7\u54c8\u62c9\u5f7b\u3010\u82f1\u3011'\n\n    }\n\n    /**\n     * \u603b\u7ed3\uff1a\u63a8\u8350\u4f7f\u7528\uff1a\n     * const user = reactive({\n     *       //obj\u5bf9\u8c61\n     *       name:'barbatos',\n     *       age:3000,\n     *       other:{\n     *         name:'Venti',\n     *         nickname:'\u5356\u5531\u7684',\n     *         CV:['\u55b5\u2606\u9171','\u6751\u6fd1\u6b65'],\n     *       }\n     *     })\n     *\n     *     \u6dfb\u52a0\u548c\u5220\u9664\uff0c\u90fd\u76f4\u63a5\u4f7f\u7528\n     *     user.xxx\u5c5e\u6027\u540d = xxx\n     *     delete user.\u5c5e\u6027\u540d\n     *\n     */\n\n\n    return{\n      user,\n      updataUser\n    }\n  }\n\n});\n<\/script>\n\n")),(0,l.kt)("h2",{id:"34-\u6bd4\u8f83vue2\u4e0evue3\u7684\u54cd\u5e94\u5f0f\u91cd\u8981"},"3.4 \u6bd4\u8f83Vue2\u4e0eVue3\u7684\u54cd\u5e94\u5f0f(\u91cd\u8981)"),(0,l.kt)("h2",{id:"341-vue2\u7684\u54cd\u5e94\u5f0f"},"3.4.1 vue2\u7684\u54cd\u5e94\u5f0f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6838\u5fc3:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u8c61: \u901a\u8fc7defineProperty\u5bf9\u5bf9\u8c61\u7684\u5df2\u6709\u5c5e\u6027\u503c\u7684\u8bfb\u53d6\u548c\u4fee\u6539\u8fdb\u884c\u52ab\u6301(\u76d1\u89c6/\u62e6\u622a)"),(0,l.kt)("li",{parentName:"ul"},"\u6570\u7ec4: \u901a\u8fc7\u91cd\u5199\u6570\u7ec4\u66f4\u65b0\u6570\u7ec4\u4e00\u7cfb\u5217\u66f4\u65b0\u5143\u7d20\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u5143\u7d20\u4fee\u6539\u7684\u52ab\u6301")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"Object.defineProperty(data, 'count', {\n    get () {}, \n    set () {}\n})\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u95ee\u9898",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u8c61\u76f4\u63a5\u65b0\u6dfb\u52a0\u7684\u5c5e\u6027\u6216\u5220\u9664\u5df2\u6709\u5c5e\u6027, \u754c\u9762\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0"),(0,l.kt)("li",{parentName:"ul"},"\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u66ff\u6362\u5143\u7d20\u6216\u66f4\u65b0length, \u754c\u9762\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0 arr","[1]"," = {}")))),(0,l.kt)("h2",{id:"342-vue3\u7684\u54cd\u5e94\u5f0f"},"3.4.2 Vue3\u7684\u54cd\u5e94\u5f0f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6838\u5fc3:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7Proxy(\u4ee3\u7406): \u62e6\u622a\u5bf9data\u4efb\u610f\u5c5e\u6027\u7684\u4efb\u610f(13\u79cd)\u64cd\u4f5c, \u5305\u62ec\u5c5e\u6027\u503c\u7684\u8bfb\u5199, \u5c5e\u6027\u7684\u6dfb\u52a0, \u5c5e\u6027\u7684\u5220\u9664\u7b49..."),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 Reflect(\u53cd\u5c04): \u52a8\u6001\u5bf9\u88ab\u4ee3\u7406\u5bf9\u8c61\u7684\u76f8\u5e94\u5c5e\u6027\u8fdb\u884c\u7279\u5b9a\u7684\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"\u6587\u6863:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy"},"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect"},"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect"))))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"new Proxy(data, {\n // \u62e6\u622a\u8bfb\u53d6\u5c5e\u6027\u503c\n    get (target, prop) {\n     return Reflect.get(target, prop)\n    },\n    // \u62e6\u622a\u8bbe\u7f6e\u5c5e\u6027\u503c\u6216\u6dfb\u52a0\u65b0\u5c5e\u6027\n    set (target, prop, value) {\n     return Reflect.set(target, prop, value)\n    },\n    // \u62e6\u622a\u5220\u9664\u5c5e\u6027\n    deleteProperty (target, prop) {\n     return Reflect.deleteProperty(target, prop)\n    }\n})\n\nproxy.name = 'tom' \n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Proxy \u4e0e Reflect</title>\n</head>\n<body>\n  <script>\n    \n    //\u76ee\u6807\u5bf9\u8c61\n    const user = {\n      name: \"beelzebul\",\n      age: 4000,\n      friends:{\n          name:'YaeMiko'\n          age:500\n      }\n    };\n\n    /* \n    proxyUser\u662f\u4ee3\u7406\u5bf9\u8c61, user\u662f\u88ab\u4ee3\u7406\u5bf9\u8c61\n    \u540e\u9762\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u6765\u64cd\u4f5c\u88ab\u4ee3\u7406\u5bf9\u8c61\u5185\u90e8\u5c5e\u6027\n    \n    \u53c2\u65701\uff1auser---\x3etarget\u76ee\u6807\u5bf9\u8c61\n    \u53c2\u65702\uff1ahandler---\x3e\u5904\u7406\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u76d1\u89c6\u6570\u636e\uff0c\u4ee5\u53ca\u6570\u636e\u7684\u64cd\u4f5c\n    */\n    const proxyUser = new Proxy(user, {\n  //\u83b7\u53d6\u76ee\u6807\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\n      get(target, prop) {\n        console.log('\u52ab\u6301get()', prop)\n        return Reflect.get(target, prop)\n      },\n  //\u4fee\u6539\u6216\u8005\u5220\u9664\u76ee\u6807\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\n      set(target, prop, val) {\n        console.log('\u52ab\u6301set()', prop, val)\n        return Reflect.set(target, prop, val); // (2)\n      },\n        //\u5220\u9664\u76ee\u6807\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\n      deleteProperty (target, prop) {\n        console.log('\u52ab\u6301delete\u5c5e\u6027', prop)\n        return Reflect.deleteProperty(target, prop)\n      }\n    });\n      \n    // \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u83b7\u53d6\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u503c\n    // \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u8bfb\u53d6\u5c5e\u6027\u503c \u7528\u5230get()\n    console.log(proxyUser===user)\n    console.log(proxyUser.name, proxyUser.age)   //beelzebul 4000\n      \n    // \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u8bbe\u7f6e\u5c5e\u6027\u503c \u7528\u5230set()\n    proxyUser.name = '\u96f7\u7535\u5f71'\n    proxyUser.age = 4000\n    console.log(user)\n      \n    // \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027  \u7528\u5230set()\n    proxyUser.sex = '\u5973'\n    console.log(user)\n      \n    // \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u5220\u9664\u5c5e\u6027   \u7528\u5230deleteProperty()\n    delete proxyUser.sex\n    console.log(user)\n      \n    //\u66f4\u65b0\u76ee\u6807\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u503c  \u7528\u5230set()\n    proxyUser.friends.name = '\u516b\u91cd\u795e\u5b50'\n    console.log(user)\n  <\/script>\n</body>\n</html>\n")),(0,l.kt)("h2",{id:"35-setup\u7ec6\u8282"},"3.5 setup\u7ec6\u8282"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"setup\u6267\u884c\u7684\u65f6\u673a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u5728beforeCreate\u4e4b\u524d\u6267\u884c(\u4e00\u6b21), \u6b64\u65f6\u7ec4\u4ef6\u5bf9\u8c61\u8fd8\u6ca1\u6709\u521b\u5efa")),(0,l.kt)("li",{parentName:"ul"},"this\u662fundefined, \u4e0d\u80fd\u901a\u8fc7this\u6765\u8bbf\u95eedata/computed/methods / props"),(0,l.kt)("li",{parentName:"ul"},"\u5176\u5b9e\u6240\u6709\u7684composition API\u76f8\u5173\u56de\u8c03\u51fd\u6570\u4e2d\u4e5f\u90fd\u4e0d\u53ef\u4ee5"))),(0,l.kt)("li",{parentName:"ul"},"setup\u7684\u8fd4\u56de\u503c",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e00\u822c\u90fd\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61: \u4e3a\u6a21\u677f\u63d0\u4f9b\u6570\u636e, \u4e5f\u5c31\u662f\u6a21\u677f\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6b64\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5c5e\u6027/\u65b9\u6cd5"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u8fd4\u56de\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u4f1a\u4e0edata\u51fd\u6570\u8fd4\u56de\u5bf9\u8c61\u7684\u5c5e\u6027\u5408\u5e76\u6210\u4e3a\u7ec4\u4ef6\u5bf9\u8c61\u7684\u5c5e\u6027")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u8fd4\u56de\u5bf9\u8c61\u4e2d\u7684\u65b9\u6cd5\u4f1a\u4e0emethods\u4e2d\u7684\u65b9\u6cd5\u5408\u5e76\u6210\u529f\u7ec4\u4ef6\u5bf9\u8c61\u7684\u65b9\u6cd5")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u5982\u679c\u6709\u91cd\u540d, setup\u4f18\u5148")),(0,l.kt)("li",{parentName:"ul"},"\u6ce8\u610f:"),(0,l.kt)("li",{parentName:"ul"},"\u5728vue3\u4e2d\u4e00\u822c\u4e0d\u8981\u6df7\u5408\u4f7f\u7528: methods\u4e2d\u53ef\u4ee5\u8bbf\u95eesetup\u63d0\u4f9b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5, \u4f46\u5728setup\u65b9\u6cd5\u4e2d\u4e0d\u80fd\u8bbf\u95eedata\u548cmethods"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"setup\u4e0d\u80fd\u662f\u4e00\u4e2aasync\u51fd\u6570: \u56e0\u4e3a\u8fd4\u56de\u503c\u4e0d\u518d\u662freturn\u7684\u5bf9\u8c61, \u800c\u662fpromise"),", \u6a21\u677f\u770b\u4e0d\u5230return\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u6570\u636e"))),(0,l.kt)("li",{parentName:"ul"},"setup\u7684\u53c2\u6570",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"setup(props, context) / setup(props, {attrs, slots, emit})"),(0,l.kt)("li",{parentName:"ul"},"props: \u5305\u542bprops\u914d\u7f6e\u58f0\u660e\u4e14\u4f20\u5165\u4e86\u7684\u6240\u6709\u5c5e\u6027\u7684\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"attrs: \u5305\u542b\u6ca1\u6709\u5728props\u914d\u7f6e\u4e2d\u58f0\u660e\u7684\u5c5e\u6027\u7684\u5bf9\u8c61, \u76f8\u5f53\u4e8e this.$attrs"),(0,l.kt)("li",{parentName:"ul"},"slots: \u5305\u542b\u6240\u6709\u4f20\u5165\u7684\u63d2\u69fd\u5185\u5bb9\u7684\u5bf9\u8c61, \u76f8\u5f53\u4e8e this.$slots"),(0,l.kt)("li",{parentName:"ul"},"emit: \u7528\u6765\u5206\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u51fd\u6570, \u76f8\u5f53\u4e8e this.$emit")))),(0,l.kt)("p",null,"\u7236\u7ea7\u7ec4\u4ef6\uff1a App.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>App</h2>\n  <p>msg: {{msg}}</p>\n  <button @click="fn(\'--\')">\u66f4\u65b0</button>\n\n  <child :msg="msg" msg2="\u771f\u9999" @fn="fn"/>   \n      \x3c!--\n                                \u6ce8\u610f\uff1a\u8fd9\u91cc\u7684 @fn="fn" \u662f\u81ea\u5b9a\u4e49\u4e8b\u4ef6\n                                     \u6700\u65b0\u7684vue\u7248\u672c\u5404\u6709\u5404\u7684\u8981\u6c42\uff0c\u5728\u6211\u6240\u4f7f\u7528\u7684\u7248\u672c\n                                @fn\u548cfn \u5fc5\u987b\u4e00\u81f4\uff0c\u5426\u8005\u65e0\u6cd5\u901a\u8fc7emit()\u5206\u53d1\u4e8b\u4ef6\u548c\u4f20\u53c2\n                        --\x3e\n</template>\n\n<script lang="ts">\nimport {\n  reactive,\n  ref,\n} from \'vue\'\nimport child from \'./child.vue\'\n\nexport default {\n\n  components: {\n    child\n  },\n\n  setup () {\n    const msg = ref(\'abc\')\n\n    function fn (content: string) {\n      msg.value += content            //\u8fd9\u91cc\u7684content \u4f1a\u859b\u5b9a\u8c14\u7684 undefined\n    }\n    return {\n      msg,\n      fn\n    }\n  }\n}\n<\/script>\n')),(0,l.kt)("p",null,"\u5b50\u7ea7\u7ec4\u4ef6\uff1aChild.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <div>\n    <h3>{{n}}</h3>\n    <h3>{{m}}</h3>\n\n    <h3>msg: {{msg}}</h3>\n    <h3>msg2: {{$attrs.msg2}}</h3>\n\n    <slot name=\"xxx\"></slot>\n\n    <button @click=\"update\">\u66f4\u65b0</button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport {\n  ref,\n  defineComponent\n} from 'vue'\n\nexport default defineComponent({\n  name: 'child',\n\n  props: ['msg'],   //\u7528\u4e8e\u4f20\u9012\u4ece\u7236\u7ea7\u7ec4\u4ef6\u4f20\u6765\u7684msg\u53c2\u6570\u6570\u636e\n\n  emits: ['fn'], // \u53ef\u9009\u7684, \u58f0\u660e\u4e86\u66f4\u5229\u4e8e\u7a0b\u5e8f\u5458\u9605\u8bfb, \u4e14\u53ef\u4ee5\u5bf9\u5206\u53d1\u7684\u4e8b\u4ef6\u6570\u636e\u8fdb\u884c\u6821\u9a8c\n\n  data () {\n    console.log('data', this)\n    return {\n      // n: 1\n    }\n  },\n    \n    //setup\u662f\u5728beforeCreate\u751f\u547d\u5468\u671f\u56de\u8c03\u4e4b\u524d\u5c31\u5df2\u7ecf\u6267\u884c\u4e86\u4e00\u6b21\n    //\u7531\u6b64\u53ef\u77e5\uff0csetup\u6267\u884c\u7684\u65f6\u5019\uff0c\u5f53\u524d\u7ec4\u4ef6\u8fd8\u6ca1\u521b\u5efa\u51fa\u6765\uff0c\u4e5f\u5c31\u610f\u5473\u7740\uff1a\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61\u7684this\u4e0d\u53ef\u7528\n\n  //\u6570\u636e\u521d\u59cb\u5316\u7684\u58f0\u660e\u56de\u8c03\n  beforeCreate () {\n    console.log('beforeCreate', this)     //beforeCreate undefined\n              //this\u662fundefined, \u4e0d\u80fd\u901a\u8fc7this\u6765\u8bbf\u95eedata/computed/methods/props\n  },\n\n  methods: {\n    // update () {\n    //   this.n++\n    //   this.m++\n    // }\n  },\n\n  // setup (props, context) {\n  setup (props, {attrs, emit, slots}) {\n      \n      //props\u53c2\u6570\uff0c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u91cc\u9762\u6709\u7236\u7ea7\u7ec4\u4ef6\u5411\u5b50\u7ea7\u7ec4\u4ef6\u4f20\u9012\u7684\u6570\u636e\uff0c\u5e76\u4e14\u662f\u5728\u5b50\u7ea7\u7ec4\u4ef6\u4e2d\u4f7f\u7528props\u63a5\u6536\u5230\u7684\u6240\u6709\u5c5e\u6027\n      console.log(props.msg)    //abc\n      \n      //context\uff0c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542battrs\u5bf9\u8c61\uff08\u83b7\u53d6\u5f53\u524d\u7ec4\u4ef6\u6807\u7b7e\u4e0a\u7684\u7684\u6240\u6709\u5c5e\u6027\uff0c\u4f46\u662f\u8be5\u5c5e\u6027\u662f\u6ca1\u6709\u5728props\u914d\u7f6e\u4e2d\u58f0\u660e\u7684\u5c5e\u6027\u7684\u5bf9\u8c61\uff09, emit\u5bf9\u8c61\uff08\u5206\u53d1\u4e8b\u4ef6\u7684\uff09, slots\u5bf9\u8c61\uff08\u63d2\u69fd\uff09\n          \n      //attrs\n      console.log(attrs.msg2)   //\u771f\u9999\n      \n      //emit\n           \n      //slots\n     \n\n    console.log('setup', this)\n    console.log(props.msg, attrs.msg2, slots, emit)\n\n    const m = ref(2)\n    const n = ref(3)\n\n    function update () {\n      // console.log('--', this)\n      // this.n += 2 \n      // this.m += 2\n\n      m.value += 2\n      n.value += 2\n\n      // \u5206\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\n      emit('fn', '++')\n    }\n\n    return {\n        //setup\u4e00\u822c\u8fd4\u56de\u7684\u90fd\u662f\u5bf9\u8c61\uff0c\u5185\u90e8\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0chtml\u6a21\u677f\u90fd\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\n      m,\n      n,\n      update,\n    }\n  },\n    \n    //\u754c\u9762\u6e32\u67d3\u540e\u7684\u751f\u547d\u5468\u671f\u56de\u8c03\n//    mounted(){\n//        console.log(this)\n//    }\n})\n<\/script>\n")),(0,l.kt)("p",null,"setup\u4e2d\u7684emit()\u7684\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff1a"),(0,l.kt)("p",null,'\u6ce8\u610f\uff1a\u5728\u7236\u7ea7\u7684\u7ec4\u4ef6\u4e2d\uff0c\u8fd9\u91cc\u7684 @fn="fn" \u662f\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u6700\u65b0\u7684vue\u7248\u672c\u5404\u6709\u5404\u7684\u8981\u6c42\uff0c\u5728\u6211\u6240\u4f7f\u7528\u7684\u7248\u672c\uff0c@fn\u548cfn \u5fc5\u987b\u4e00\u81f4\uff0c\u5426\u8005\u65e0\u6cd5\u901a\u8fc7emit()\u5206\u53d1\u4e8b\u4ef6\u548c\u4f20\u53c2\u3002'),(0,l.kt)("p",null,"\u53c2\u8003\u8d44\u6599\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/3757745039e4"},"https://www.jianshu.com/p/3757745039e4")),(0,l.kt)("p",null,"\u7236\u7ea7\u7ec4\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>vue for TS</h1>\n  <h2>App\u7236\u7ea7\u7ec4\u4ef6</h2>\n  <h3>{{msg}}</h3>\n  <button @click=\"updataMsg('==')\">\u66f4\u65b0\u6570\u636e</button>\n  <hr>\n  <Child :msg=\"msg\" :msg2=\"msg2\" @fn=\"fn\"/>\n\n\n\n</template>\n\n<script lang=\"ts\">\n\nimport {defineComponent, reactive, ref} from 'vue';\nimport Child from './components/Child.vue';\n\nexport default defineComponent({\n  name: 'App',\n\n  setup(){\n    let msg = ref('\u4f60\u5e2e\u6211\u505a\u68ee\u6797\u4e66\u4efb\u52a1\uff0c\u6211\u4eec\u5c31\u662f\u597d\u670b\u53cb')\n    let msg2 = ref('\u771f\u9999')\n    function updataMsg(content:string){\n      msg.value += content\n    }\n\n    function fn (item:string) {\n      console.log('\u5b57\u7ec4\u4ef6\u4f20\u6765\u7684\u7684\u6570\u636e', item)\n      msg.value += item\n    }\n    return{\n      msg,\n      msg2,\n      updataMsg,\n      fn,\n    }\n  },\n\n  //\u6ce8\u518c\u7ec4\u4ef6\n  components:{\n    Child,\n\n  }\n\n});\n<\/script>\n")),(0,l.kt)("p",null,"\u5b50\u7ea7\u7ec4\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>App\u5b50\u7ea7\u7ec4\u4ef6</h2>\n  <h3>{{msg}}</h3>\n  <h4>{{count}}</h4>\n  <button @click=\"myemit\">\u5206\u53d1\u4e8b\u4ef6</button>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: \"Child\",\n  props: ['msg'],\n  setup(props:any,{attrs, emit}:any){\n    console.log(props.msg)\n    console.log(attrs.msg2)\n\n\n\n    //\u6309\u94ae\u7684\u70b9\u51fb\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\n    function myemit() {\n      console.log('emit')\n      emit('fn','     \u4f60\u5988\u7684\u5feb\u7ed9\u7237\u4f20\u53c2')\n    }\n\n    return{\n      myemit\n    }\n\n  },\n\n\n}\n<\/script>\n\n<style scoped>\n\n</style>\n")),(0,l.kt)("h2",{id:"36-reactive\u4e0eref-\u7ec6\u8282"},"3.6 reactive\u4e0eref-\u7ec6\u8282"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u662fVue3\u7684 composition API\u4e2d2\u4e2a\u6700\u91cd\u8981\u7684\u54cd\u5e94\u5f0fAPI"),(0,l.kt)("li",{parentName:"ul"},"ref\u7528\u6765\u5904\u7406\u57fa\u672c\u7c7b\u578b\u6570\u636e, reactive\u7528\u6765\u5904\u7406\u5bf9\u8c61(\u9012\u5f52\u6df1\u5ea6\u54cd\u5e94\u5f0f)"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u7528ref\u5bf9\u8c61/\u6570\u7ec4, \u5185\u90e8\u4f1a\u81ea\u52a8\u5c06\u5bf9\u8c61/\u6570\u7ec4\u8f6c\u6362\u4e3areactive\u7684\u4ee3\u7406\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"ref\u5185\u90e8: \u901a\u8fc7\u7ed9value\u5c5e\u6027\u6dfb\u52a0getter/setter\u6765\u5b9e\u73b0\u5bf9\u6570\u636e\u7684\u52ab\u6301"),(0,l.kt)("li",{parentName:"ul"},"reactive\u5185\u90e8: \u901a\u8fc7\u4f7f\u7528Proxy\u6765\u5b9e\u73b0\u5bf9\u5bf9\u8c61\u5185\u90e8\u6240\u6709\u6570\u636e\u7684\u52ab\u6301, \u5e76\u901a\u8fc7Reflect\u64cd\u4f5c\u5bf9\u8c61\u5185\u90e8\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"ref\u7684\u6570\u636e\u64cd\u4f5c: \u5728js\u4e2d\u8981.value, \u5728\u6a21\u677f\u4e2d\u4e0d\u9700\u8981(\u5185\u90e8\u89e3\u6790\u6a21\u677f\u65f6\u4f1a\u81ea\u52a8\u6dfb\u52a0.value)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>App</h2>\n  <p>m1: {{m1}}</p>\n  <p>m2: {{m2}}</p>\n  <p>m3: {{m3}}</p>\n  <button @click=\"update\">\u66f4\u65b0</button>\n</template>\n\n<script lang=\"ts\">\nimport {\n  reactive,\n  ref\n} from 'vue'\n\nexport default {\n\n  setup () {\n    const m1 = ref('abc')\n    const m2 = reactive({x: 1, y: {z: 'abc'}})\n\n    // \u4f7f\u7528ref\u5904\u7406\u5bf9\u8c61  ==> \u5bf9\u8c61\u4f1a\u88ab\u81ea\u52a8reactive\u4e3aproxy\u5bf9\u8c61\n    const m3 = ref({a1: 2, a2: {a3: 'abc'}})\n    console.log(m1, m2, m3)\n    console.log(m3.value.a2) // \u4e5f\u662f\u4e00\u4e2aproxy\u5bf9\u8c61\n\n    function update() {\n      m1.value += '--'\n      m2.x += 1\n      m2.y.z += '++'\n\n      m3.value = {a1: 3, a2: {a3: 'abc---'}}\n      m3.value.a2.a3 += '==' // reactive\u5bf9\u5bf9\u8c61\u8fdb\u884c\u4e86\u6df1\u5ea6\u6570\u636e\u52ab\u6301\n      console.log(m3.value.a2)\n    }\n\n    return {\n      m1,\n      m2,\n      m3,\n      update\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("h2",{id:"37--\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6"},"3.7  \u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"computed\u51fd\u6570:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0ecomputed\u914d\u7f6e\u529f\u80fd\u4e00\u81f4"),(0,l.kt)("li",{parentName:"ul"},"\u53ea\u6709getter"),(0,l.kt)("li",{parentName:"ul"},"\u6709getter\u548csetter"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"watch\u51fd\u6570"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0ewatch\u914d\u7f6e\u529f\u80fd\u4e00\u81f4"),(0,l.kt)("li",{parentName:"ul"},"\u76d1\u89c6\u6307\u5b9a\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e, \u4e00\u65e6\u6570\u636e\u53d8\u5316, \u5c31\u81ea\u52a8\u6267\u884c\u76d1\u89c6\u56de\u8c03"),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u521d\u59cb\u65f6\u4e0d\u6267\u884c\u56de\u8c03, \u4f46\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6eimmediate\u4e3atrue, \u6765\u6307\u5b9a\u521d\u59cb\u65f6\u7acb\u5373\u6267\u884c\u7b2c\u4e00\u6b21"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u914d\u7f6edeep\u4e3atrue, \u6765\u6307\u5b9a\u6df1\u5ea6\u76d1\u89c6"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"watchEffect\u51fd\u6570"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u7528\u76f4\u63a5\u6307\u5b9a\u8981\u76d1\u89c6\u7684\u6570\u636e, \u56de\u8c03\u51fd\u6570\u4e2d\u4f7f\u7528\u7684\u54ea\u4e9b\u54cd\u5e94\u5f0f\u6570\u636e\u5c31\u76d1\u89c6\u54ea\u4e9b\u54cd\u5e94\u5f0f\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u521d\u59cb\u65f6\u5c31\u4f1a\u6267\u884c\u7b2c\u4e00\u6b21, \u4ece\u800c\u53ef\u4ee5\u6536\u96c6\u9700\u8981\u76d1\u89c6\u7684\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u76d1\u89c6\u6570\u636e\u53d1\u751f\u53d8\u5316\u65f6\u56de\u8c03")),(0,l.kt)("p",{parentName:"li"},"\u8f83\u65b0\u7248\u672c\u7684vue3"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h1>vue for TS</h1>\n  <h2>\u8ba1\u7b97\u5c5e\u6027\u548c\u76d1\u89c6</h2>\n  <fieldset>\n    <legend>\u59d3\u540d\u64cd\u4f5c</legend>\n    \u59d3\u6c0f\uff1a<input type="text" placeholder="\u8bf7\u8f93\u5165\u59d3\u6c0f" v-model="user.fistName">\n    \u540d\u5b57\uff1a<input type="text" placeholder="\u8bf7\u8f93\u5165\u540d\u5b57" v-model="user.lastName">\n  </fieldset>\n  <fieldset>\n    <legend>\u8ba1\u7b97\u5c5e\u6027\u548c\u76d1\u89c6\u7684\u6f14\u793a</legend>\n    \u59d3\u540d\uff1a<input type="text" placeholder="\u663e\u793a\u59d3\u540d" v-model="fullName1">\n    \u59d3\u540d\uff1a<input type="text" placeholder="\u663e\u793a\u59d3\u540d" v-model="fullName2">\n    \u59d3\u540d\uff1a<input type="text" placeholder="\u663e\u793a\u59d3\u540d" v-model="fullName3">\n  </fieldset>\n\n</template>\n\n<script lang="ts">\n\nimport {computed, defineComponent, ref, watch, watchEffect} from \'vue\';\n\n\nexport default defineComponent({\n  name: \'App\',\n\n  setup(){\n    const user = ref({\n      fistName:\'\u4e1c\u65b9\',\n      lastName:\'\u4e0d\u8d25\'\n    })\n\n    //\u901a\u8fc7\u8ba1\u7b97\u5c5e\u6027\u7684\u65b9\u5f0f\uff0c\u5b9e\u73b0\u7b2c\u4e00\u4e2a\u59d3\u540d\u7684\u663e\u793a\n    //vue3 \u4e2d\u7684\u8ba1\u7b97\u5c5e\u6027\n    // \u8ba1\u7b97\u5c5e\u6027\u7684\u51fd\u6570\u4e2d\u5982\u679c\u4f20\u5165\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u8868\u793a\u7684\u662fget\n\n    //\u7b2c\u4e00\u4e2a\u59d3\u540d\n    //\u8fd4\u56de\u7684\u662f\u4e00\u4e2aRef\u7c7b\u578b\u7684\u5bf9\u8c61\n    const fullName1 = computed(()=>{\n      return user.value.fistName + \'_\' + user.value.lastName\n    })\n\n    //\u7b2c\u4e8c\u4e2a\u59d3\u540d\n    const fullName2 = computed({\n      get(){\n        return user.value.fistName + \'_\' + user.value.lastName\n      },\n      set(val:string){\n        const names = val.split(\'_\')\n        user.value.fistName = names[0]\n        user.value.lastName = names[1]\n\n      }\n    })\n\n    //\u7b2c\u4e09\u4e2a\u59d3\u540d\n    const fullName3 = ref()\n\n    //\u76d1\u89c6---\u76d1\u89c6\u6307\u5b9a\u7684\u6570\u636e\n    watch(user,({fistName,lastName})=>{\n        fullName3.value = fistName + \'_\' + lastName\n    },{immediate:true,deep:true})\n    //immediate \u9ed8\u8ba4\u4f1a\u6267\u884c\u4e00\u6b21watch\uff0cdeep\u6df1\u5ea6\u76d1\u89c6\n\n    //\u76d1\u89c6  watchEffect,\u4e0d\u9700\u8981\u914d\u7f6eimmediate\uff0c\u672c\u8eab\u9ed8\u8ba4\u8fdb\u884c\u76d1\u89c6\uff08\u9ed8\u8ba4\u5148\u6267\u884c\u4e00\u6b21\uff09\n    // watchEffect(()=>{\n    //   fullName3.value = user.value.fistName + \'_\' + user.value.lastName\n    // })\n\n    //\u76d1\u89c6fullName3\u7684\u6570\u636e\uff0c\u6539\u53d8fistName\u548clastName\n    watchEffect(()=>{\n      const names = fullName3.value.split(\'_\')\n      user.value.fistName = names[0]\n      user.value.lastName = names[1]\n    })\n\n    //watch----\u53ef\u4ee5\u76d1\u89c6\u591a\u4e2a\u6570\u636e\n    //\u5728vue3\u65e9\u671f\u7248\u672c\u4e2d\uff0c\u8fd9\u91cc\u7684\u4ee3\u7801\u4e0d\u4f1a\u6267\u884c\u3002\u56e0\u4e3a\u6570\u7ec4\u5185\u7684\u53c2\u6570\u90fd\u5fc5\u987b\u662f\u54cd\u5e94\u5f0f\u7684\u6570\u636e\uff0c\n    // \u800cuser.value.fistName\u3001user.value.lastName\u4e0d\u662f\u76f8\u5e94\u5f0f\u7684\u6570\u636e\uff0cfullName\u662f\u54cd\u5e94\u5f0f\u7684\u6570\u636e\n\n    //\u5728\u6bd4\u8f83\u65b0\u7684\u7248\u672c\u4e2d\u4f1a\u51fa\u73b0\u8b66\u544a\u3002\u539f\u56e0\u5982\u4e0a\n    // watch([user.value.fistName,user.value.lastName,fullName3],()=>{\n    //   console.log(\'watch----\u53ef\u4ee5\u76d1\u89c6\u591a\u4e2a\u6570\u636e\')\n    // })\n\n    //\u6240\u4ee5\u901a\u8fc7\u56de\u8c03\u7684\u5199\u6cd5\uff0c\u5c06user.value.fistName,user.value.lastName\u8f6c\u4e3a\u54cd\u5e94\u5f0f\u7684\u6570\u636e\n    //()=>user.value.fistName,()=>user.value.lastName  \u662f\u54cd\u5e94\u5f0f\u7684\u6570\u636e\n    watch([()=>user.value.fistName,()=>user.value.lastName,fullName3],()=>{\n      console.log(\'watch----\u53ef\u4ee5\u76d1\u89c6\u591a\u4e2a\u6570\u636e\')\n    })\n\n\n    return{\n      user,\n      fullName1,\n      fullName2,\n      fullName3\n    }\n  },\n\n  //\u6ce8\u518c\u7ec4\u4ef6\n  components:{\n\n\n  }\n\n});\n<\/script>\n')),(0,l.kt)("h2",{id:"38-\u751f\u547d\u5468\u671f"},"3.8 \u751f\u547d\u5468\u671f"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"vue2.x\u7684\u751f\u547d\u5468\u671f")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(7569).Z,width:"1200",height:"3039"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"vue3\u7684\u751f\u547d\u5468\u671f")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(608).Z,width:"838",height:"1388"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4e0e 2.x \u7248\u672c\u751f\u547d\u5468\u671f\u76f8\u5bf9\u5e94\u7684\u7ec4\u5408\u5f0f API")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeCreate")," -> \u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"setup()")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"created")," -> \u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"setup()")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeMount")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onBeforeMount")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mounted")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onMounted")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeUpdate")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onBeforeUpdate")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"updated")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onUpdated")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeDestroy")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onBeforeUnmount")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"destroyed")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onUnmounted")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"errorCaptured")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"onErrorCaptured"))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u65b0\u589e\u7684\u94a9\u5b50\u51fd\u6570")),(0,l.kt)("p",null,"\u7ec4\u5408\u5f0f API \u8fd8\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u8c03\u8bd5\u94a9\u5b50\u51fd\u6570\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"onRenderTracked"),(0,l.kt)("li",{parentName:"ul"},"onRenderTriggered")),(0,l.kt)("p",null,"\u5b50\u7ec4\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<h2>Child \u5b50\u7ea7\u7ec4\u4ef6</h2>\n  <h3>{{msg}}</h3>\n  <button @click=\"update\">\u70b9\u51fb\u66f4\u65b0</button>\n</template>\n\n<script>\nimport {\n  ref,\n  onMounted,\n  onUpdated,\n  onUnmounted,\n  onBeforeMount,\n  onBeforeUpdate,\n  onBeforeUnmount\n} from \"vue\";\n\nexport default {\n  name: \"Child\",\n\n  //vue2.x \u4e2d\u7684\u751f\u547d\u94a9\u5b50\n  beforeCreate(){\n    console.log('vue2.x \u4e2d\u7684 beforeCreate')\n  },\n  created() {\n    console.log('vue2.x \u4e2d\u7684 created')\n  },\n  beforeMount() {\n    console.log('vue2.x \u4e2d\u7684 beforeMount')\n  },\n  mounted() {\n    console.log('vue2.x \u4e2d\u7684 mounted')\n  },\n  beforeUpdate() {\n    console.log('vue2.x \u4e2d\u7684 beforeCreate')\n  },\n  updated() {\n    console.log('vue2.x \u4e2d\u7684 updated')\n  },\n  //beforeDestroy,destroyed\u5728vue3\u4e2d\u6539\u540d\u4e86\n  \n  beforeUnmount() {\n    console.log('vue2.x \u4e2d\u7684 beforeDestroy')\n  },\n  unmounted() {\n    console.log('vue2.x \u4e2d\u7684 destroyed')\n  },\n\n\n\n  setup() {\n\n    const msg = ref('abc')\n\n    const update = () => {\n      msg.value += '--'\n    }\n\n    onBeforeMount(() => {\n      console.log('vue3.x--onBeforeMount')\n    })\n\n    onMounted(() => {\n      console.log('vue3.x--onMounted')\n    })\n\n    onBeforeUpdate(() => {\n      console.log('vue3.x--onBeforeUpdate')\n    })\n\n    onUpdated(() => {\n      console.log('vue3.x--onUpdated')\n    })\n\n    onBeforeUnmount(() => {\n      console.log('vue3.x--onBeforeUnmount')\n    })\n\n    onUnmounted(() => {\n      console.log('vue3.x--onUnmounted')\n    })\n\n    return {\n      msg,\n      update\n    }\n  }\n}\n\n<\/script>\n\n")),(0,l.kt)("p",null,"\u7236\u7ec4\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>App</h2>\n  <button @click="isShow=!isShow">\u5207\u6362</button>\n  <hr>\n  <Child v-if="isShow"/>\n</template>\n\n<script lang="ts">\nimport Child from \'./Child.vue\'\nexport default {\n\n  data () {\n    return {\n      isShow: true\n    }\n  },\n\n  components: {\n    Child\n  }\n}\n<\/script>\n')),(0,l.kt)("h2",{id:"39-\u81ea\u5b9a\u4e49hook\u51fd\u6570"},"3.9 \u81ea\u5b9a\u4e49hook\u51fd\u6570"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4f7f\u7528Vue3\u7684\u7ec4\u5408API\u5c01\u88c5\u7684\u53ef\u590d\u7528\u7684\u529f\u80fd\u51fd\u6570")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u81ea\u5b9a\u4e49hook\u7684\u4f5c\u7528\u7c7b\u4f3c\u4e8evue2\u4e2d\u7684mixin\u6280\u672f")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u81ea\u5b9a\u4e49Hook\u7684\u4f18\u52bf: \u5f88\u6e05\u695a\u590d\u7528\u529f\u80fd\u4ee3\u7801\u7684\u6765\u6e90, \u66f4\u6e05\u695a\u6613\u61c2")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u9700\u6c421: \u6536\u96c6\u7528\u6237\u9f20\u6807\u70b9\u51fb\u7684\u9875\u9762\u5750\u6807"),(0,l.kt)("p",{parentName:"li"},"hooks/useMousePosition.ts"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import { ref, onMounted, onUnmounted } from 'vue'\n/* \n\u6536\u96c6\u7528\u6237\u9f20\u6807\u70b9\u51fb\u7684\u9875\u9762\u5750\u6807\n*/\nexport default function useMousePosition () {\n  // \u521d\u59cb\u5316\u5750\u6807\u6570\u636e\n  const x = ref(-1)\n  const y = ref(-1)\n\n  // \u7528\u4e8e\u6536\u96c6\u70b9\u51fb\u4e8b\u4ef6\u5750\u6807\u7684\u51fd\u6570\n  const updatePosition = (e: MouseEvent) => {\n    x.value = e.pageX\n    y.value = e.pageY\n  }\n\n  // \u6302\u8f7d\u540e\u7ed1\u5b9a\u70b9\u51fb\u76d1\u542c\n  onMounted(() => {\n    document.addEventListener('click', updatePosition)\n  })\n\n  // \u5378\u8f7d\u524d\u89e3\u7ed1\u70b9\u51fb\u76d1\u542c\n  onUnmounted(() => {\n    document.removeEventListener('click', updatePosition)\n  })\n\n  return {x, y}\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<div>\n  <h2>x: {{x}}, y: {{y}}</h2>\n</div>\n</template>\n\n<script>\n\nimport {\n  ref\n} from \"vue\"\n/* \n\u5728\u7ec4\u4ef6\u4e2d\u5f15\u5165\u5e76\u4f7f\u7528\u81ea\u5b9a\u4e49hook\n\u81ea\u5b9a\u4e49hook\u7684\u4f5c\u7528\u7c7b\u4f3c\u4e8evue2\u4e2d\u7684mixin\u6280\u672f\n\u81ea\u5b9a\u4e49Hook\u7684\u4f18\u52bf: \u5f88\u6e05\u695a\u590d\u7528\u529f\u80fd\u4ee3\u7801\u7684\u6765\u6e90, \u66f4\u6e05\u695a\u6613\u61c2\n*/\nimport useMousePosition from './hooks/useMousePosition'\n\nexport default {\n  setup() {\n\n    const {x, y} = useMousePosition()\n\n    return {\n      x,\n      y,\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5229\u7528TS\u6cdb\u578b\u5f3a\u5316\u7c7b\u578b\u68c0\u67e5")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u9700\u6c422: \u5c01\u88c5\u53d1ajax\u8bf7\u6c42\u7684hook\u51fd\u6570"),(0,l.kt)("p",{parentName:"li"},"hooks/useRequest.ts"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import { ref } from 'vue'\nimport axios from 'axios'\n\n/* \n\u4f7f\u7528axios\u53d1\u9001\u5f02\u6b65ajax\u8bf7\u6c42\n*/\nexport default function useUrlLoader<T>(url: string) {\n\n  const result = ref<T | null>(null)\n  const loading = ref(true)\n  const errorMsg = ref(null)\n\n  axios.get(url)\n    .then(response => {\n      loading.value = false\n      result.value = response.data\n    })\n    .catch(e => {\n      loading.value = false\n      errorMsg.value = e.message || '\u672a\u77e5\u9519\u8bef'\n    })\n\n  return {\n    loading,\n    result,\n    errorMsg,\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n<div class="about">\n  <h2 v-if="loading">LOADING...</h2>\n  <h2 v-else-if="errorMsg">{{errorMsg}}</h2>\n  \x3c!-- <ul v-else>\n    <li>id: {{result.id}}</li>\n    <li>name: {{result.name}}</li>\n    <li>distance: {{result.distance}}</li>\n  </ul> --\x3e\n\n  <ul v-for="p in result" :key="p.id">\n    <li>id: {{p.id}}</li>\n    <li>title: {{p.title}}</li>\n    <li>price: {{p.price}}</li>\n  </ul>\n  \x3c!-- <img v-if="result" :src="result[0].url" alt=""> --\x3e\n</div>\n</template>\n\n<script lang="ts">\nimport {\n  watch\n} from "vue"\nimport useRequest from \'./hooks/useRequest\'\n\n// \u5730\u5740\u6570\u636e\u63a5\u53e3\ninterface AddressResult {\n  id: number;\n  name: string;\n  distance: string;\n}\n\n// \u4ea7\u54c1\u6570\u636e\u63a5\u53e3\ninterface ProductResult {\n  id: string;\n  title: string;\n  price: number;\n}\n\nexport default {\n  setup() {\n\n    // const {loading, result, errorMsg} = useRequest<AddressResult>(\'/data/address.json\')\n    const {loading, result, errorMsg} = useRequest<ProductResult[]>(\'/data/products.json\')\n\n    watch(result, () => {\n      if (result.value) {\n        console.log(result.value.length) // \u6709\u63d0\u793a\n      }\n    })\n\n    return {\n      loading,\n      result, \n      errorMsg\n    }\n  }\n}\n<\/script>\n')),(0,l.kt)("h2",{id:"310-torefs"},"3.10 toRefs"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u628a\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u8f6c\u6362\u6210\u666e\u901a\u5bf9\u8c61"),"\uff0c\u8be5\u666e\u901a\u5bf9\u8c61\u7684\u6bcf\u4e2a property \u90fd\u662f\u4e00\u4e2a ref"),(0,l.kt)("p",null,"\u5e94\u7528: \u5f53\u4ece\u5408\u6210\u51fd\u6570\u8fd4\u56de\u54cd\u5e94\u5f0f\u5bf9\u8c61\u65f6\uff0ctoRefs \u975e\u5e38\u6709\u7528\uff0c\u8fd9\u6837\u6d88\u8d39\u7ec4\u4ef6\u5c31\u53ef\u4ee5\u5728\u4e0d\u4e22\u5931\u54cd\u5e94\u5f0f\u7684\u60c5\u51b5\u4e0b\u5bf9\u8fd4\u56de\u7684\u5bf9\u8c61\u8fdb\u884c\u5206\u89e3\u4f7f\u7528"),(0,l.kt)("p",null,"\u95ee\u9898: reactive \u5bf9\u8c61\u53d6\u51fa\u7684\u6240\u6709\u5c5e\u6027\u503c\u90fd\u662f\u975e\u54cd\u5e94\u5f0f\u7684"),(0,l.kt)("p",null,"\u89e3\u51b3: \u5229\u7528 toRefs \u53ef\u4ee5\u5c06\u4e00\u4e2a\u54cd\u5e94\u5f0f reactive \u5bf9\u8c61\u7684\u6240\u6709\u539f\u59cb\u5c5e\u6027\u8f6c\u6362\u4e3a\u54cd\u5e94\u5f0f\u7684 ref \u5c5e\u6027"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>App</h2>\n  <h3>foo: {{foo}}</h3>\n  <h3>bar: {{bar}}</h3>\n  <h3>foo2: {{foo2}}</h3>\n  <h3>bar2: {{bar2}}</h3>\n\n\n</template>\n\n<script lang=\"ts\">\nimport { reactive, toRefs } from 'vue'\n/*\ntoRefs:\n  \u5c06\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u6240\u6709\u5c5e\u6027\u5305\u88c5\u4e3aref\u5bf9\u8c61, \u5e76\u8fd4\u56de\u5305\u542b\u8fd9\u4e9bref\u5bf9\u8c61\u7684\u666e\u901a\u5bf9\u8c61\n  \u5e94\u7528: \u5f53\u4ece\u5408\u6210\u51fd\u6570\u8fd4\u56de\u54cd\u5e94\u5f0f\u5bf9\u8c61\u65f6\uff0ctoRefs \u975e\u5e38\u6709\u7528\uff0c\n        \u8fd9\u6837\u6d88\u8d39\u7ec4\u4ef6\u5c31\u53ef\u4ee5\u5728\u4e0d\u4e22\u5931\u54cd\u5e94\u5f0f\u7684\u60c5\u51b5\u4e0b\u5bf9\u8fd4\u56de\u7684\u5bf9\u8c61\u8fdb\u884c\u5206\u89e3\u4f7f\u7528\n*/\nexport default {\n\n  setup () {\n\n    const state = reactive({\n      foo: 'a',\n      bar: 'b',\n    })\n\n    const stateAsRefs = toRefs(state)\n\n    setTimeout(() => {\n      state.foo += '++'\n      state.bar += '++'\n    }, 2000);\n\n    const {foo2, bar2} = useReatureX()\n\n    return {\n      // ...state,\n      ...stateAsRefs,\n      foo2, \n      bar2\n    }\n  },\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"function useReatureX() {\n  const state = reactive({\n    foo2: 'a',\n    bar2: 'b',\n  })\n\n  setTimeout(() => {\n    state.foo2 += '++'\n    state.bar2 += '++'\n  }, 2000);\n\n  return toRefs(state)\n}\n\n<\/script>\n")),(0,l.kt)("p",null,"\u770b\u7684\u4e71\uff0c\u6ca1\u5173\u7cfb\uff0c\u770b\u8fd9\u4e2a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>vue for TS</h1>\n  <h2>toRefs\u7684\u4f7f\u7528</h2>\n\x3c!--  <h3>name\uff1a{{state.name}}</h3>--\x3e\n\x3c!--  <h3>age\uff1a{{state.age}}</h3>--\x3e\n\x3c!--  state\u662f\u54cd\u5e94\u5f0f\u6570\u503c\uff0c\u7ed3\u6784\u51fa\u6765\u7684name\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\n  <h3>name\uff1a{{name}}</h3>\n  <h3>age\uff1a{{age}}</h3>\n  --\x3e\n  <h3>name\uff1a{{name}}</h3>\n  <h3>age\uff1a{{age}}</h3>\n\n\n  <h3>name2\uff1a{{name2}}</h3>\n  <h3>age2\uff1a{{age2}}</h3>\n\n</template>\n\n<script lang=\"ts\">\n\nimport {defineComponent, reactive, toRefs} from 'vue';\n\n\n\n\nexport default defineComponent({\n  name: 'App',\n\n  setup(){\n    const state = reactive({\n      name:'Nahida',\n      age:500\n    });\n\n    // setInterval(()=>{\n    //   state.name += '2233'\n    //   console.log('11')\n    // },5000)\n\n    //================================================================\n\n    //\u5229\u7528 toRefs \u53ef\u4ee5\u5c06\u4e00\u4e2a\u54cd\u5e94\u5f0f reactive \u5bf9\u8c61\u7684\u6240\u6709\u539f\u59cb\u5c5e\u6027\u8f6c\u6362\u4e3a\u54cd\u5e94\u5f0f\u7684 ref \u5c5e\u6027\n    const state2 = toRefs(state)    //state2\u662f\u539f\u59cb\u5c5e\u6027\n    const {name,age} =state2\n    setInterval(()=>{\n      name.value += '2233'        //\u539f\u59cb\u5c5e\u6027\u5bf9\u8c61\u6210\u5458\u4e3aref\u5c5e\u6027\uff0c\u8fd9\u91cc\u9700\u8981\u7528\n      console.log('11')\n    },10000)\n\n\n    //===================\u4f7f\u7528\u573a\u666f\uff1a\u81ea\u5b9a\u4e49\u4e00\u4e2ahook\u51fd\u6570====================\n    function useReatureX() {\n      const state = reactive({\n        name2: 'Morax',\n        age2: '5000',\n      })\n      setInterval(()=>{\n        state.name2 +='\u6ca1\u94b1'\n      },3000)\n      return toRefs(state)\n    }\n    const {name2,age2} = useReatureX()\n\n\n    return{\n      //ref\u5bf9\u8c61\n      state,\n      //...state \u7ed3\u6784\u8d4b\u503c\uff0c\u56e0\u4e3astate\u662f\u54cd\u5e94\u6570\u503c\uff0c\u6a21\u677f\u6587\u4ef6\u4e2d\u7684 name\u3001age\u6ca1\u6709\u53d8\u5316\n      //\n\n      //ref\u5bf9\u8c61\u8f6c\u4e3a\u539f\u59cb\u5c5e\u6027\u540e\uff1a\uff08\u4f7f\u7528toRefs\uff09\n      name,\n      age,\n\n      //\u81ea\u5b9a\u4e49hook\n      name2,\n      age2\n\n    }\n\n  },\n\n  //\u6ce8\u518c\u7ec4\u4ef6\n  components:{\n  }\n\n});\n<\/script>\n")),(0,l.kt)("h2",{id:"311-ref\u83b7\u53d6\u5143\u7d20"},"3.11 ref\u83b7\u53d6\u5143\u7d20"),(0,l.kt)("p",null,"\u5229\u7528ref\u51fd\u6570\u83b7\u53d6\u7ec4\u4ef6\u4e2d\u7684\u6807\u7b7e\u5143\u7d20"),(0,l.kt)("p",null,"\u529f\u80fd\u9700\u6c42: \u8ba9\u8f93\u5165\u6846\u81ea\u52a8\u83b7\u53d6\u7126\u70b9"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>App</h2>\n  <input type="text">---\n  <input type="text" ref="inputRef">\n</template>\n\n<script lang="ts">\nimport { onMounted, ref } from \'vue\'\n/* \nref\u83b7\u53d6\u5143\u7d20: \u5229\u7528ref\u51fd\u6570\u83b7\u53d6\u7ec4\u4ef6\u4e2d\u7684\u6807\u7b7e\u5143\u7d20\n\u529f\u80fd\u9700\u6c42: \u8ba9\u8f93\u5165\u6846\u81ea\u52a8\u83b7\u53d6\u7126\u70b9\n*/\nexport default {\n  setup() {\n    const inputRef = ref<HTMLElement|null>(null)   //\u9ed8\u8ba4\u5bf9\u8c61\u4e3a\u7a7a\n \n    ////\u9875\u9762\u52a0\u8f7d\u5b8c\u6bd5\u540e\uff1a\u7ec4\u5408\u6807\u7b7eonMounted \u751f\u547d\u5468\u671f\u94a9\u5b50\n    onMounted(() => {\n      inputRef.value && inputRef.value.focus()   \n        //\u5982\u679cinputRef.value\u4e3a\u5047\uff0c\u4e0d\u8fdb\u884cinputRef.value.focus()\u64cd\u4f5c\n        //\u5982\u679cinputRef.value\u4e0d\u771f\uff0c\u8fdb\u884cinputRef.value.focus()\u64cd\u4f5c\n    })\n\n    return {\n      inputRef\n    }\n  },\n}\n<\/script>\n')),(0,l.kt)("h1",{id:"4-composition-api\u5176\u5b83\u90e8\u5206"},"4 Composition API(\u5176\u5b83\u90e8\u5206)"),(0,l.kt)("h2",{id:"41--shallowreactive-\u4e0e-shallowref"},"4.1  shallowReactive \u4e0e shallowRef"),(0,l.kt)("p",null,"shallow\uff1a\u6d45"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"shallowReactive : ",(0,l.kt)("strong",{parentName:"li"},"\u53ea\u5904\u7406\u4e86\u5bf9\u8c61\u5185\u6700\u5916\u5c42\u5c5e\u6027"),"\u7684\u54cd\u5e94\u5f0f(\u4e5f\u5c31\u662f\u6d45\u54cd\u5e94\u5f0f)"),(0,l.kt)("li",{parentName:"ul"},"shallowRef: ",(0,l.kt)("strong",{parentName:"li"},"\u53ea\u5904\u7406\u4e86value\u7684\u54cd\u5e94\u5f0f"),", \u4e0d\u8fdb\u884c\u5bf9\u8c61\u7684reactive\u5904\u7406"),(0,l.kt)("li",{parentName:"ul"},"\u4ec0\u4e48\u65f6\u5019\u7528\u6d45\u54cd\u5e94\u5f0f\u5462?",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e00\u822c\u60c5\u51b5\u4e0b\u4f7f\u7528ref\u548creactive\u5373\u53ef"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e, \u7ed3\u6784\u6bd4\u8f83\u6df1, \u4f46\u53d8\u5316\u65f6\u53ea\u662f\u5916\u5c42\u5c5e\u6027\u53d8\u5316 ===> shallowReactive"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e, \u540e\u9762\u4f1a\u4ea7\u751f\u65b0\u7684\u5bf9\u8c61\u6765\u66ff\u6362 ===> shallowRef")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>App</h2>\n\n  <h3>m1: {{m1}}</h3>\n  <h3>m2: {{m2}}</h3>\n  <h3>m3: {{m3}}</h3>\n  <h3>m4: {{m4}}</h3>\n\n  <button @click="update">\u66f4\u65b0</button>\n</template>\n\n<script lang="ts">\nimport { reactive, ref, shallowReactive, shallowRef } from \'vue\'\n/* \nshallowReactive\u4e0eshallowRef\n  shallowReactive: \u53ea\u5904\u7406\u4e86\u5bf9\u8c61\u5185\u6700\u5916\u5c42\u5c5e\u6027\u7684\u54cd\u5e94\u5f0f(\u4e5f\u5c31\u662f\u6d45\u54cd\u5e94\u5f0f)\n  shallowRef: \u53ea\u5904\u7406\u4e86value\u7684\u54cd\u5e94\u5f0f, \u4e0d\u8fdb\u884c\u5bf9\u8c61\u7684reactive\u5904\u7406\n\u603b\u7ed3:\n  reactive\u4e0eref\u5b9e\u73b0\u7684\u662f\u6df1\u5ea6\u54cd\u5e94\u5f0f, \u800cshallowReactive\u4e0eshallowRef\u662f\u6d45\u54cd\u5e94\u5f0f\n  \u4ec0\u4e48\u65f6\u5019\u7528\u6d45\u54cd\u5e94\u5f0f\u5462?\n    \u4e00\u822c\u60c5\u51b5\u4e0b\u4f7f\u7528ref\u548creactive\u5373\u53ef,\n    \u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e, \u7ed3\u6784\u6bd4\u8f83\u6df1, \u4f46\u53d8\u5316\u65f6\u53ea\u662f\u5916\u5c42\u5c5e\u6027\u53d8\u5316 ===> shallowReactive\n    \u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e, \u540e\u9762\u4f1a\u4ea7\u751f\u65b0\u7684\u5bf9\u8c61\u6765\u66ff\u6362 ===> shallowRef\n*/\n\nexport default {\n\n  setup () {\n\n    const m1 = reactive({\n        a: 1,\n        b: {c: 2}\n    })\n    \n    const m2 = shallowReactive({\n        a: 1,\n        b: {c: 2}\n    })\n\n    const m3 = ref({\n        a: 1, \n        b: {c: 2}\n    })\n    const m4 = shallowRef({\n        a: 1,\n        b: {c: 2}\n    })\n\n    const update = () => {\n      //\u66f4\u65b0m1\u6570\u636e reactive\n      m1.b.c += 1\n        \n        //\u66f4\u65b0m2\u6570\u636e shallowReactive\n      m2.a +=1      //\u89e6\u53d1\u4e8b\u4ef6\u6709\u53d8\u5316\n      m2.b.c += 1   //\u89e6\u53d1\u4e8b\u4ef6\u540e\u65e0\u53d8\u5316\n  \n        //\u66f4\u65b0m3\u6570\u636e ref\n      m3.value.a += 1\n        \n        ////\u66f4\u65b0m4\u6570\u636e shallowRef\n      m4.value.a += 1   //\u89e6\u53d1\u4e8b\u4ef6\u540e\u65e0\u53d8\u5316\uff0cm4\u662f\u5bf9\u8c61\n            //\u56e0\u4e3ashallowRef: \u53ea\u5904\u7406\u4e86value\u7684\u54cd\u5e94\u5f0f, \u4e0d\u8fdb\u884c\u5bf9\u8c61\u7684reactive\u5904\u7406\n    }\n\n    return {\n      m1,\n      m2,\n      m3,\n      m4,\n      update,\n    }\n  }\n}\n<\/script>\n')),(0,l.kt)("h2",{id:"42-readonly-\u4e0e-shallowreadonly"},"4.2 readonly \u4e0e shallowReadonly"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"readonly:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6df1\u5ea6\u53ea\u8bfb\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u4e00\u4e2a\u5bf9\u8c61 (\u54cd\u5e94\u5f0f\u6216\u7eaf\u5bf9\u8c61) \u6216 ref \u5e76\u8fd4\u56de\u539f\u59cb\u4ee3\u7406\u7684\u53ea\u8bfb\u4ee3\u7406\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u53ea\u8bfb\u4ee3\u7406\u662f\u6df1\u5c42\u7684\uff1a\u8bbf\u95ee\u7684\u4efb\u4f55\u5d4c\u5957 property \u4e5f\u662f\u53ea\u8bfb\u7684\u3002"))),(0,l.kt)("li",{parentName:"ul"},"shallowReadonly",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6d45\u53ea\u8bfb\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\uff0c\u4f7f\u5176\u81ea\u8eab\u7684 property \u4e3a\u53ea\u8bfb\uff0c\u4f46\u4e0d\u6267\u884c\u5d4c\u5957\u5bf9\u8c61\u7684\u6df1\u5ea6\u53ea\u8bfb\u8f6c\u6362"))),(0,l.kt)("li",{parentName:"ul"},"\u5e94\u7528\u573a\u666f:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5728\u67d0\u4e9b\u7279\u5b9a\u60c5\u51b5\u4e0b, \u6211\u4eec\u53ef\u80fd\u4e0d\u5e0c\u671b\u5bf9\u6570\u636e\u8fdb\u884c\u66f4\u65b0\u7684\u64cd\u4f5c, \u90a3\u5c31\u53ef\u4ee5\u5305\u88c5\u751f\u6210\u4e00\u4e2a\u53ea\u8bfb\u4ee3\u7406\u5bf9\u8c61\u6765\u8bfb\u53d6\u6570\u636e, \u800c\u4e0d\u80fd\u4fee\u6539\u6216\u5220\u9664")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>App</h2>\n  <h3>{{state}}</h3>\n  <button @click="update">\u66f4\u65b0</button>\n</template>\n\n<script lang="ts">\nimport { reactive, readonly, shallowReadonly } from \'vue\'\n/*\nreadonly: \u6df1\u5ea6\u53ea\u8bfb\u6570\u636e\n  \u83b7\u53d6\u4e00\u4e2a\u5bf9\u8c61 (\u54cd\u5e94\u5f0f\u6216\u7eaf\u5bf9\u8c61) \u6216 ref \u5e76\u8fd4\u56de\u539f\u59cb\u4ee3\u7406\u7684\u53ea\u8bfb\u4ee3\u7406\u3002\n  \u53ea\u8bfb\u4ee3\u7406\u662f\u6df1\u5c42\u7684\uff1a\u8bbf\u95ee\u7684\u4efb\u4f55\u5d4c\u5957 property \u4e5f\u662f\u53ea\u8bfb\u7684\u3002\nshallowReadonly: \u6d45\u53ea\u8bfb\u6570\u636e\n  \u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\uff0c\u4f7f\u5176\u81ea\u8eab\u7684 property \u4e3a\u53ea\u8bfb\uff0c\u4f46\u4e0d\u6267\u884c\u5d4c\u5957\u5bf9\u8c61\u7684\u6df1\u5ea6\u53ea\u8bfb\u8f6c\u6362 \n\u5e94\u7528\u573a\u666f: \n  \u5728\u67d0\u4e9b\u7279\u5b9a\u60c5\u51b5\u4e0b, \u6211\u4eec\u53ef\u80fd\u4e0d\u5e0c\u671b\u5bf9\u6570\u636e\u8fdb\u884c\u66f4\u65b0\u7684\u64cd\u4f5c, \u90a3\u5c31\u53ef\u4ee5\u5305\u88c5\u751f\u6210\u4e00\u4e2a\u53ea\u8bfb\u4ee3\u7406\u5bf9\u8c61\u6765\u8bfb\u53d6\u6570\u636e, \u800c\u4e0d\u80fd\u4fee\u6539\u6216\u5220\u9664\n*/\n\nexport default {\n\n  setup () {\n\n    const state = reactive({\n      a: 1,\n      b: {\n        c: 2\n      }\n    })\n\n    // const rState1 = readonly(state)\n    const rState2 = shallowReadonly(state)\n\n    const update = () => {\n      // rState1.a++ // error\n      // rState1.b.c++ // error\n\n      // rState2.a++ // error\n      rState2.b.c++\n    }\n    \n    return {\n      state,\n      update\n    }\n  }\n}\n<\/script>\n')),(0,l.kt)("h2",{id:"43-toraw-\u4e0e-markraw"},"4.3 toRaw \u4e0e markRaw"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"toRaw",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u7531 ",(0,l.kt)("inlineCode",{parentName:"li"},"reactive")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"li"},"readonly")," \u65b9\u6cd5",(0,l.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210\u54cd\u5e94\u5f0f\u4ee3\u7406\u7684\u666e\u901a\u5bf9\u8c61"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u662f\u4e00\u4e2a\u8fd8\u539f\u65b9\u6cd5\uff0c\u53ef\u7528\u4e8e\u4e34\u65f6\u8bfb\u53d6\uff0c\u8bbf\u95ee\u4e0d\u4f1a\u88ab\u4ee3\u7406/\u8ddf\u8e2a\uff0c\u5199\u5165\u65f6\u4e5f\u4e0d\u4f1a\u89e6\u53d1\u754c\u9762\u66f4\u65b0\u3002"))),(0,l.kt)("li",{parentName:"ul"},"markRaw",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6807\u8bb0\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f7f\u5176\u6c38\u8fdc\u4e0d\u4f1a\u8f6c\u6362\u4e3a\u4ee3\u7406\u3002\u8fd4\u56de\u5bf9\u8c61\u672c\u8eab"),(0,l.kt)("li",{parentName:"ul"},"\u5e94\u7528\u573a\u666f:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6709\u4e9b\u503c\u4e0d\u5e94\u88ab\u8bbe\u7f6e\u4e3a\u54cd\u5e94\u5f0f\u7684\uff0c\u4f8b\u5982\u590d\u6742\u7684\u7b2c\u4e09\u65b9\u7c7b\u5b9e\u4f8b\u6216 Vue \u7ec4\u4ef6\u5bf9\u8c61\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5f53\u6e32\u67d3\u5177\u6709\u4e0d\u53ef\u53d8\u6570\u636e\u6e90\u7684\u5927\u5217\u8868\u65f6\uff0c\u8df3\u8fc7\u4ee3\u7406\u8f6c\u6362\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>{{state}}</h2>\n  <button @click=\"testToRaw\">\u6d4b\u8bd5toRaw</button>\n  <button @click=\"testMarkRaw\">\u6d4b\u8bd5markRaw</button>\n</template>\n\n<script lang=\"ts\">\n/* \ntoRaw: \u5f97\u5230reactive\u4ee3\u7406\u5bf9\u8c61\u7684\u76ee\u6807\u6570\u636e\u5bf9\u8c61\n*/\nimport {\n  markRaw,\n  reactive, toRaw,\n} from 'vue'\ninterface UserInfo{\n    name:string;\n    age:number;\n    likes?:string[];\n}\nexport default {\n  setup () {\n    const state = reactive<UserInfo>({\n      name: 'tom',\n      age: 25,\n    })\n\n    const testToRaw = () => {\n        //\u628a\u4ee3\u7406\u5bf9\u8c61\u53d8\u6210\u666e\u901a\u5bf9\u8c61\uff0c\u6570\u636e\u53d8\u5316\uff0c\u754c\u9762\u4e0d\u53d8\u5316\n      const user = toRaw(state)\n      user.age++  // \u6570\u636e\u6709\u53d8\u5316\uff0c\u4f46\u662f\u754c\u9762\u4e0d\u4f1a\u66f4\u65b0\n\n    }\n\n    const testMarkRaw = () => {\n      const likes = ['a', 'b']\n      // state.likes = likes\n      // markRow\u6807\u8bb0\u7684\u5bf9\u8c61\u6570\u636e\uff0c\u4ece\u6b64\u4e0d\u518d\u79f0\u4e3a\u4ee3\u7406\u5bf9\u8c61 \n      state.likes = markRaw(likes) // likes\u6570\u7ec4\u5c31\u4e0d\u518d\u662f\u54cd\u5e94\u5f0f\u7684\u4e86\n      setTimeout(() => {\n        state.likes[0] += '--'\n      }, 1000)\n    }\n\n    return {\n      state,\n      testToRaw,\n      testMarkRaw,\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("h2",{id:"44-toref"},"4.4 toRef"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e3a",(0,l.kt)("strong",{parentName:"li"},"\u6e90\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e0a\u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u4e00\u4e2a ref\u5bf9\u8c61, \u4e8c\u8005\u5185\u90e8\u64cd\u4f5c\u7684\u662f\u540c\u4e00\u4e2a\u6570\u636e\u503c, \u66f4\u65b0\u65f6\u4e8c\u8005\u662f\u540c\u6b65\u7684")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u533a\u522bref: \u62f7\u8d1d\u4e86\u4e00\u4efd\u65b0\u7684\u6570\u636e"),"\u503c\u5355\u72ec\u64cd\u4f5c, \u66f4\u65b0\u65f6\u76f8\u4e92\u4e0d\u5f71\u54cd"),(0,l.kt)("li",{parentName:"ul"},"\u5e94\u7528: \u5f53\u8981\u5c06 \u67d0\u4e2aprops\u7684 ref \u4f20\u9012\u7ed9\u590d\u5408\u51fd\u6570\u65f6\uff0ctoRef \u5f88\u6709\u7528")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>App</h2>\n  <p>{{state}}</p>\n  <p>{{foo}}</p>\n  <p>{{foo2}}</p>\n\n  <button @click=\"update\">\u66f4\u65b0</button>\n\n  <Child :foo=\"foo\"/>\n</template>\n\n<script lang=\"ts\">\n/*\ntoRef:\n  \u4e3a\u6e90\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e0a\u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u4e00\u4e2a ref\u5bf9\u8c61, \u4e8c\u8005\u5185\u90e8\u64cd\u4f5c\u7684\u662f\u540c\u4e00\u4e2a\u6570\u636e\u503c, \u66f4\u65b0\u65f6\u4e8c\u8005\u662f\u540c\u6b65\u7684\n  \u533a\u522bref: \u62f7\u8d1d\u4e86\u4e00\u4efd\u65b0\u7684\u6570\u636e\u503c\u5355\u72ec\u64cd\u4f5c, \u66f4\u65b0\u65f6\u76f8\u4e92\u4e0d\u5f71\u54cd\n  \u5e94\u7528: \u5f53\u8981\u5c06\u67d0\u4e2a prop \u7684 ref \u4f20\u9012\u7ed9\u590d\u5408\u51fd\u6570\u65f6\uff0ctoRef \u5f88\u6709\u7528\n*/\n\nimport {\n  reactive,\n  toRef,\n  ref,\n} from 'vue'\nimport Child from './Child.vue'\n\nexport default {\n\n  setup () {\n\n    const state = reactive({\n      foo: 1,\n      bar: 2\n    })\n\n    const foo = toRef(state, 'foo')\n    const foo2 = ref(state.foo)\n\n    const update = () => {\n      state.foo++\n      // foo.value++\n        \n      // foo2.value++  // foo\u548cstate\u4e2d\u7684\u6570\u636e\u4e0d\u4f1a\u66f4\u65b0\n    }\n\n    return {\n      state,\n      foo,\n      foo2,\n      update,\n    }\n  },\n\n  components: {\n    Child\n  }\n}\n<\/script>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>Child</h2>\n  <h3>{{foo}}</h3>\n  <h3>{{length}}</h3>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, Ref, toRef } from 'vue'\n\nconst component = defineComponent({\n  props: {    //props\u662f\u4ece\u7236\u7ec4\u4ef6\u4f20\u5165\u7684\u662ffoo.value\u7684\u503c\uff0c\u56e0\u6b64\u53ef\u89c1\uff0cprops\u662f\u539f\u59cb\u5c5e\u6027\uff0c\u4e0d\u662fref\u5bf9\u8c61\n    foo: {\n      type: Number,\n      require: true  //\u5fc5\u987b\u5f15\u7528\n    }\n  },\n\n  setup (props, context) {\n    const length = useFeatureX(toRef(props, 'foo'))\n\n    return {\n      length\n    }\n  }\n})\n\nfunction useFeatureX(foo: Ref) {\n  const lenth = computed(() => foo.value.length)  \n    //computed \u8ba1\u7b97\u5c5e\u6027\uff0c\u8fd4\u56de\u4e00\u4e2aRef\u7c7b\u578b\uff08ref\u5bf9\u8c61\u54cd\u5e94\u578b\u7684\u6570\u636e\uff09\n\n  return lenth //\u56e0\u6b64\uff0c\u5f53foo\u53d1\u751f\u53d8\u5316\u65f6\uff0cfoo\u7684\u957f\u5ea6\uff0clenth\u4e5f\u4f1a\u76f8\u5e94\u53d8\u5316\n}\n\nexport default component\n<\/script>\n")),(0,l.kt)("h2",{id:"45-customref"},"4.5 customRef"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 ref\uff0c\u5e76\u5bf9\u5176\u4f9d\u8d56\u9879\u8ddf\u8e2a\u548c\u66f4\u65b0\u89e6\u53d1\u8fdb\u884c\u663e\u5f0f\u63a7\u5236"),(0,l.kt)("li",{parentName:"ul"},"\u9700\u6c42: \u4f7f\u7528 customRef \u5b9e\u73b0 debounce \u7684\u793a\u4f8b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>App</h2>\n  <input v-model="keyword" placeholder="\u641c\u7d22\u5173\u952e\u5b57"/>\n  <p>{{keyword}}</p>\n</template>\n\n<script lang="ts">\n/*\ncustomRef:\n  \u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 ref\uff0c\u5e76\u5bf9\u5176\u4f9d\u8d56\u9879\u8ddf\u8e2a\u548c\u66f4\u65b0\u89e6\u53d1\u8fdb\u884c\u663e\u5f0f\u63a7\u5236\n\n\u9700\u6c42: \n  \u4f7f\u7528 customRef \u5b9e\u73b0 debounce \u7684\u793a\u4f8b\n*/\n\nimport {\n  ref,\n  customRef\n} from \'vue\'\n\nexport default {\n\n  setup () {\n    const keyword = useDebouncedRef(\'\', 500)\n    console.log(keyword)\n    return {\n      keyword\n    }\n  },\n}\n\n/* \n\u5b9e\u73b0\u51fd\u6570\u9632\u6296\u7684\u81ea\u5b9a\u4e49ref\n*/\nfunction useDebouncedRef<T>(value: T, delay = 200) {\n  let timeout: number\n  return customRef((track, trigger) => {\n    return {\n      get() {   //get \u8fd4\u56de\u4e00\u4e2a\u6570\u636e\n        // \u544a\u8bc9Vue\u8ffd\u8e2a\u6570\u636e\n        track()\n        return value\n      },\n      set(newValue: T) {      //newValue\u4f20\u5165\u65b0\u66f4\u65b0\u7684\u6570\u636e\uff0cset()\u8bbe\u7f6e\u6570\u636e\n        clearTimeout(timeout)\n        timeout = setTimeout(() => {\n          value = newValue\n          // \u544a\u8bc9Vue\u53bb\u89e6\u53d1\u754c\u9762\u66f4\u65b0\n          trigger()\n        }, delay)\n      }\n    }\n  })\n}\n\n<\/script>\n')),(0,l.kt)("h2",{id:"46-provide-\u4e0e-inject"},"4.6 provide \u4e0e inject"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"provide",(0,l.kt)("inlineCode",{parentName:"li"},"\u548c"),"inject",(0,l.kt)("inlineCode",{parentName:"li"},"\u63d0\u4f9b\u4f9d\u8d56\u6ce8\u5165\uff0c\u529f\u80fd\u7c7b\u4f3c 2.x \u7684"),"provide/inject"),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u8de8\u5c42\u7ea7\u7ec4\u4ef6(\u7956\u5b59)\u95f4\u901a\u4fe1")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>\u7236\u7ec4\u4ef6</h1>\n  <p>\u5f53\u524d\u989c\u8272: {{color}}</p>\n  <button @click=\"color='red'\">\u7ea2</button>\n  <button @click=\"color='yellow'\">\u9ec4</button>\n  <button @click=\"color='blue'\">\u84dd</button>\n  \n  <hr>\n  <Son />\n</template>\n\n<script lang=\"ts\">\nimport { provide, ref } from 'vue'\n/* \n- provide` \u548c `inject` \u63d0\u4f9b\u4f9d\u8d56\u6ce8\u5165\uff0c\u529f\u80fd\u7c7b\u4f3c 2.x \u7684 `provide/inject\n- \u5b9e\u73b0\u8de8\u5c42\u7ea7\u7ec4\u4ef6(\u7956\u5b59)\u95f4\u901a\u4fe1\n*/\n\nimport Son from './Son.vue'\nexport default {\n  name: 'ProvideInject',\n  components: {\n    Son\n  },\n  setup() {\n    \n    const color = ref('red')\n\n    provide('color', color)\n\n    return {\n      color\n    }\n  }\n}\n<\/script>\n<template>\n  <div>\n    <h2>\u5b50\u7ec4\u4ef6</h2>\n    <hr>\n    <GrandSon />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport GrandSon from './GrandSon.vue'\nexport default {\n  components: {\n    GrandSon\n  },\n}\n<\/script>\n<template>\n  <h3 :style=\"{color}\">\u5b59\u5b50\u7ec4\u4ef6: {{color}}</h3>\n  \n</template>\n\n<script lang=\"ts\">\nimport { inject } from 'vue'\nexport default {\n  setup() {\n    const color = inject('color')\n\n    return {\n      color\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("h2",{id:"47-\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad"},"4.7 \u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"isRef: \u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a\u4e00\u4e2a ref \u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"isReactive: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 ",(0,l.kt)("inlineCode",{parentName:"li"},"reactive")," \u521b\u5efa\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406"),(0,l.kt)("li",{parentName:"ul"},"isReadonly: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 ",(0,l.kt)("inlineCode",{parentName:"li"},"readonly")," \u521b\u5efa\u7684\u53ea\u8bfb\u4ee3\u7406"),(0,l.kt)("li",{parentName:"ul"},"isProxy: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 ",(0,l.kt)("inlineCode",{parentName:"li"},"reactive")," \u6216\u8005 ",(0,l.kt)("inlineCode",{parentName:"li"},"readonly")," \u65b9\u6cd5\u521b\u5efa\u7684\u4ee3\u7406")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>vue for TS</h1>\n  <h2>\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad</h2>\n\n</template>\n\n<script lang=\"ts\">\n// - isRef: \u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a\u4e00\u4e2a ref \u5bf9\u8c61\n// - isReactive: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 `reactive` \u521b\u5efa\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406\n// - isReadonly: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 `readonly` \u521b\u5efa\u7684\u53ea\u8bfb\u4ee3\u7406\n// - isProxy: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 `reactive` \u6216\u8005 `readonly` \u65b9\u6cd5\u521b\u5efa\u7684\u4ee3\u7406\n\nimport {defineComponent, isProxy, isReactive, isReadonly, isRef, reactive, readonly, ref} from 'vue';\n\nexport default defineComponent({\n  name: 'App',\n\n  setup(){\n    console.log(isRef(ref()))\n    console.log(isReactive(reactive({})))\n    console.log(isReadonly(readonly({})))\n    console.log(isProxy(reactive({})))\n    return{\n    }\n  },\n\n  //\u6ce8\u518c\u7ec4\u4ef6\n  components:{\n  }\n\n});\n<\/script>\n")),(0,l.kt)("h1",{id:"5-\u624b\u5199\u7ec4\u5408api"},"5. \u624b\u5199\u7ec4\u5408API"),(0,l.kt)("h2",{id:"51-shallowreactive-\u4e0e-reactive"},"5.1 shallowReactive \u4e0e reactive"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"//===============\u5b9a\u4e49\u4e00\u4e2areactiveHandler\u5904\u7406\u5bf9\u8c61============================\nconst reactiveHandler = {\n    //\u83b7\u53d6\u6570\u636e\n  get (target, key) {\n//    if (key==='_is_reactive') return true\n    return Reflect.get(target, key)\n  },\n    \n //\u4fee\u6539\u6570\u636e\n  set (target, key, value) {\n    const result = Reflect.set(target, key, value)\n    console.log('\u6570\u636e\u5df2\u66f4\u65b0, \u53bb\u66f4\u65b0\u754c\u9762')\n    return result\n  },\n\n    //\u5220\u9664\u67d0\u4e2a\u5c5e\u6027\n  deleteProperty (target, key) {\n    const result = Reflect.deleteProperty(target, key)\n    console.log('\u6570\u636e\u5df2\u5220\u9664, \u53bb\u66f4\u65b0\u754c\u9762')\n    return result\n  },\n}\n\n/* \n\u81ea\u5b9a\u4e49shallowReactive\uff0c\u4f20\u5165\u4e00\u4e2a\u76ee\u6807\u5bf9\u8c61\n*/\nfunction shallowReactive(obj) {\n  //\u5224\u65ad\u5f53\u524d\u7684\u76ee\u6807\u5bf9\u8c61\u662f\u4e0d\u662fobject\u7c7b\u578b\n  if(obj && typeof obj === 'object'){\n      return new Proxy(obj, reactiveHandler)\n  }\n  return obj\n}\n\n\n//===========================================================================================\n/* \n\u81ea\u5b9a\u4e49reactive\n*/\nfunction reactive (target) {\n    ////\u5224\u65ad\u5f53\u524d\u7684\u76ee\u6807\u5bf9\u8c61\u662f\u4e0d\u662fobject\u7c7b\u578b\n  if (target && typeof target==='object') {\n      //\u5bf9\u6570\u7ec4\u6216\u8005\u5bf9\u8c61\u4e2d\u6240\u6709\u7684\u6570\u636e\u8fdb\u884creactive\u7684\u9012\u5f52\u5904\u7406\n    if (target instanceof Array) { // \u5148\u5224\u65ad\u5f53\u524d\u6570\u636e\u662f\u4e0d\u662f\u6570\u7ec4\n      target.forEach((item, index) => {\n        target[index] = reactive(item)\n      })\n    } else { // \u5bf9\u8c61\n      Object.keys(target).forEach(key => {\n        target[key] = reactive(target[key])\n      })\n    }\n\n    const proxy = new Proxy(target, reactiveHandler)\n    return proxy\n  }\n\n  return target\n}\n\n\n/* \u6d4b\u8bd5\u81ea\u5b9a\u4e49shallowReactive */\nconst proxy = shallowReactive({\n  a: {\n    b: 3\n  }\n})\n\nproxy.a = {b: 4} // \u52ab\u6301\u5230\u4e86\nproxy.a.b = 5 // \u6ca1\u6709\u52ab\u6301\u5230\n\n\n/* \u6d4b\u8bd5\u81ea\u5b9a\u4e49reactive */\nconst obj = {\n  a: 'abc',\n  b: [{x: 1}],\n  c: {x: [11]},\n}\n\nconst proxy = reactive(obj)\nconsole.log(proxy)\nproxy.b[0].x += 1\nproxy.c.x[0] += 1\n")),(0,l.kt)("h2",{id:"52-shallowref-\u4e0e-ref"},"5.2 shallowRef \u4e0e ref"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/*\n====================\u81ea\u5b9a\u4e49shallowRef====================\n*/\nfunction shallowRef(target) {\n  const result = {\n    _value: target, // \u7528\u6765\u4fdd\u5b58\u6570\u636e\u7684\u5185\u90e8\u5c5e\u6027\n    _is_ref: true, // \u7528\u6765\u6807\u8bc6\u662fref\u5bf9\u8c61\n    get value () {\n      return this._value\n    },\n    set value (val) {  // val \u662f\u4f20\u6765\u7684\u65b0\u503c\n      this._value = val\n      console.log('set value \u6570\u636e\u5df2\u66f4\u65b0, \u53bb\u66f4\u65b0\u754c\u9762')\n    }\n  }\n\n  return result\n}\n\n/* \n=====================\u81ea\u5b9a\u4e49ref======================\n*/\nfunction ref(target) {\n  if (target && typeof target==='object') {\n    target = reactive(target)\n  }\n\n  const result = {\n    _value: target, // \u7528\u6765\u4fdd\u5b58\u6570\u636e\u7684\u5185\u90e8\u5c5e\u6027\n    _is_ref: true, // \u7528\u6765\u6807\u8bc6\u662fref\u5bf9\u8c61\n    get value () {\n      return this._value\n    },\n    set value (val) {\n      this._value = val\n      console.log('set value \u6570\u636e\u5df2\u66f4\u65b0, \u53bb\u66f4\u65b0\u754c\u9762')\n    }\n  }\n\n  return result\n}\n\n//==============================================================================\n/* \u6d4b\u8bd5\u81ea\u5b9a\u4e49shallowRef */\nconst ref3 = shallowRef({\n  a: 'abc',\n})\nref3.value = 'xxx'\nref3.value.a = 'yyy'\n\n\n/* \u6d4b\u8bd5\u81ea\u5b9a\u4e49ref */\nconst ref1 = ref(0)\nconst ref2 = ref({\n  a: 'abc',\n  b: [{x: 1}],\n  c: {x: [11]},\n})\nref1.value++\nref2.value.b[0].x++\nconsole.log(ref1, ref2)\n")),(0,l.kt)("h2",{id:"53-shallowreadonly-\u4e0e-readonly"},"5.3 shallowReadonly \u4e0e readonly"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"//\u5b9a\u4e49\u4e86\u4e00\u4e2areadonlyHandler\u5904\u7406\u5668\nconst readonlyHandler = {\n  get (target, key) {\n//    if (key==='_is_readonly') return true\n    return Reflect.get(target, key)\n  },\n\n  set () {\n    console.warn('\u53ea\u8bfb\u7684, \u4e0d\u80fd\u4fee\u6539')\n    return true\n  },\n\n  deleteProperty () {\n    console.warn('\u53ea\u8bfb\u7684, \u4e0d\u80fd\u5220\u9664')\n    return true\n  },\n}\n\n/*======================================================= \n\u81ea\u5b9a\u4e49shallowReadonly\n*/\nfunction shallowReadonly(obj) {\n    //\u5224\u65ad\u5f53\u524d\u6570\u636e\u662f\u4e0d\u662f\u5bf9\u8c61\n  if(obj && typeof obj === 'object'){\n      return new Proxy(obj, readonlyHandler)\n  }\n    return obj\n  \n}\n\n/* ======================================================\n\u81ea\u5b9a\u4e49readonly\n*/\nfunction readonly(target) {\n  if (target && typeof target==='object') {\n      //\u5bf9\u6570\u7ec4\u6216\u8005\u5bf9\u8c61\u4e2d\u6240\u6709\u7684\u6570\u636e\u8fdb\u884creadonly\u7684\u9012\u5f52\u5904\u7406\n    if (target instanceof Array) { // \u6570\u7ec4\n      target.forEach((item, index) => {\n        target[index] = readonly(item)\n      })\n    } else { // \u5bf9\u8c61\n      Object.keys(target).forEach(key => {\n        target[key] = readonly(target[key])\n      })\n    }\n    const proxy = new Proxy(target, readonlyHandler)\n    return proxy \n  }\n    //\u5982\u679c\u4e0d\u662f\u5bf9\u8c61\u6216\u8005\u6570\u7ec4\uff0c\u76f4\u63a5\u8fd4\u56de\n  return target\n}\n\n//=======================================================\n/* \u6d4b\u8bd5\u81ea\u5b9a\u4e49readonly */\n/* \u6d4b\u8bd5\u81ea\u5b9a\u4e49shallowReadonly */\nconst objReadOnly = readonly({\n  a: {\n    b: 1\n  }\n})\nconst objReadOnly2 = shallowReadonly({\n  a: {\n    b: 1\n  }\n})\n\n//readonly\nobjReadOnly.a = 1\nobjReadOnly.a.b = 2\n\n//shallowReadonly\nobjReadOnly2.a = 1\nobjReadOnly2.a.b = 2    //\u62e6\u622a\u4e0d\u4e86\u6df1\u5ea6\u7684\u4fee\u6539\n")),(0,l.kt)("h2",{id:"54-isref-isreactive-isreadonly\u4e0eisproxy"},"5.4 isRef, isReactive, isReadonly\u4e0eisProxy"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* \n\u5224\u65ad\u662f\u5426\u662fref\u5bf9\u8c61\n*/\nfunction isRef(obj) {\n  return obj && obj._is_ref\n}\n\n/* \n\u5224\u65ad\u662f\u5426\u662freactive\u5bf9\u8c61\n*/\nfunction isReactive(obj) {\n  return obj && obj._is_reactive\n}\n\n/* \n\u5224\u65ad\u662f\u5426\u662freadonly\u5bf9\u8c61\n*/\nfunction isReadonly(obj) {\n  return obj && obj._is_readonly\n}\n\n/* \n\u662f\u5426\u662freactive\u6216readonly\u4ea7\u751f\u7684\u4ee3\u7406\u5bf9\u8c61\n*/\nfunction isProxy (obj) {\n  return isReactive(obj) || isReadonly(obj)\n}\n\n\n/* \u6d4b\u8bd5\u5224\u65ad\u51fd\u6570 */\nconsole.log(isReactive(reactive({})))\nconsole.log(isRef(ref({})))\nconsole.log(isReadonly(readonly({})))\nconsole.log(isProxy(reactive({})))\nconsole.log(isProxy(readonly({})))\n")),(0,l.kt)("h1",{id:"6-composition-api-vs-option-api"},"6 Composition API VS Option API"),(0,l.kt)("h2",{id:"61-option-api\u7684\u95ee\u9898"},"6.1 Option API\u7684\u95ee\u9898"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728\u4f20\u7edf\u7684Vue OptionsAPI\u4e2d\uff0c\u65b0\u589e\u6216\u8005\u4fee\u6539\u4e00\u4e2a\u9700\u6c42\uff0c\u5c31\u9700\u8981\u5206\u522b\u5728data\uff0cmethods\uff0ccomputed\u91cc\u4fee\u6539 \uff0c\u6eda\u52a8\u6761\u53cd\u590d\u4e0a\u4e0b\u79fb\u52a8")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(5555).Z,width:"960",height:"657"})),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(6253).Z,width:"523",height:"720"})),(0,l.kt)("h2",{id:"62-\u4f7f\u7528compisition-api"},"6.2 \u4f7f\u7528Compisition API"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u66f4\u52a0\u4f18\u96c5\u7684\u7ec4\u7ec7\u6211\u4eec\u7684\u4ee3\u7801\uff0c\u51fd\u6570\u3002\u8ba9\u76f8\u5173\u529f\u80fd\u7684\u4ee3\u7801\u66f4\u52a0\u6709\u5e8f\u7684\u7ec4\u7ec7\u5728\u4e00\u8d77"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(6008).Z,width:"785",height:"540"})),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(5954).Z,width:"735",height:"600"})),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(2597).Z,width:"1200",height:"1201"})),(0,l.kt)("h1",{id:"7-\u5176\u4ed6\u65b0\u7ec4\u4ef6"},"7 \u5176\u4ed6\u65b0\u7ec4\u4ef6"),(0,l.kt)("h2",{id:"71-fragment\u7247\u65ad"},"7.1 Fragment(\u7247\u65ad)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728Vue2\u4e2d: \u7ec4\u4ef6\u5fc5\u987b\u6709\u4e00\u4e2a\u6839\u6807\u7b7e"),(0,l.kt)("li",{parentName:"ul"},"\u5728Vue3\u4e2d: \u7ec4\u4ef6\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e, \u5185\u90e8\u4f1a\u5c06\u591a\u4e2a\u6807\u7b7e\u5305\u542b\u5728\u4e00\u4e2aFragment\u865a\u62df\u5143\u7d20\u4e2d"),(0,l.kt)("li",{parentName:"ul"},"\u597d\u5904: \u51cf\u5c11\u6807\u7b7e\u5c42\u7ea7, \u51cf\u5c0f\u5185\u5b58\u5360\u7528")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n    <h2>aaaa</h2>\n    <h2>aaaa</h2>\n</template>\n")),(0,l.kt)("h2",{id:"72-teleport\u77ac\u79fb"},"7.2 Teleport(\u77ac\u79fb)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Teleport \u63d0\u4f9b\u4e86\u4e00\u79cd\u5e72\u51c0\u7684\u65b9\u6cd5, \u8ba9\u7ec4\u4ef6\u7684html\u5728\u7236\u7ec4\u4ef6\u754c\u9762\u5916\u7684\u7279\u5b9a\u6807\u7b7e(\u5f88\u53ef\u80fd\u662fbody)\u4e0b\u63d2\u5165\u663e\u793a")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"ModalButton.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <button @click="modalOpen = true">\n      Open full screen modal! (With teleport!)\n  </button>\n\n\x3c!--\u5bf9\u8bdd\u6846\u4ee3\u7801--\x3e\n  <teleport to="body">\n    <div v-if="modalOpen" class="modal">\n      <div>\n        I\'m a teleported modal! \n        (My parent is "body")\n        <button @click="modalOpen = false">\n          Close\n        </button>\n      </div>\n    </div>\n  </teleport>\n\x3c!----\x3e\n\n</template>\n\n<script>\nimport { ref } from \'vue\'\nexport default {\n  name: \'modal-button\',\n  setup () {\n      //\u63a7\u5236\u5bf9\u8bdd\u6846\u663e\u793a\u6216\u8005\u9690\u85cf\n    const modalOpen = ref(false)\n    return {\n      modalOpen\n    }\n  }\n}\n<\/script>\n\n\n<style>\n.modal {\n  position: absolute;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background-color: rgba(0,0,0,.5);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal div {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  width: 300px;\n  height: 300px;\n  padding: 5px;\n}\n</style>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"App.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>App</h2>\n  <modal-button></modal-button>\n</template>\n\n<script lang=\"ts\">\nimport ModalButton from './ModalButton.vue'\n\nexport default {\n  setup() {\n    return {\n    }\n  },\n\n  components: {\n    ModalButton\n  }\n}\n<\/script>\n")),(0,l.kt)("h2",{id:"73-suspense"},"7.3 Suspense"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e2d\u6587\u542b\u4e49\uff1a\u4e0d\u786e\u5b9a\u7684"),(0,l.kt)("li",{parentName:"ul"},"\u5b83\u4eec\u5141\u8bb8\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u5728\u7b49\u5f85\u5f02\u6b65\u7ec4\u4ef6\u65f6\u6e32\u67d3\u4e00\u4e9b\u540e\u5907\u5185\u5bb9\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u5e73\u6ed1\u7684\u7528\u6237\u4f53\u9a8c\uff08\u8bf4\u4eba\u8bdd\uff1a\u5c31\u662f\u9875\u9762\u8fd8\u6ca1\u52a0\u8f7d\u5b8c\u6bd5\u7684\u65f6\u5019\u9875\u9762\u663e\u793a\u4e2a\u4ec0\u4e48\u6837\u7684\u6548\u679c\uff0c\u6bd4\u5982\uff1aloading\u52a8\u753b\uff09")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"app.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>App\u7236\u7ea7\u7ec4\u4ef6</h1>\n  <Suspense>\n      \n    <template v-slot:default>\n        \x3c!--\u5f02\u6b65\u7ec4\u4ef6--\x3e\n      <AsyncComp/>\n      \x3c!-- <AsyncAddress/> --\x3e\n    </template>\n\n    <template v-slot:fallback>\n  \x3c!--\u51c6\u5907\u7684\u5185\u5bb9\uff08LOADING...\uff09--\x3e\n      <h1>LOADING...</h1>\n    </template>\n  </Suspense>\n</template>\n\n<script lang=\"ts\">\n    \nimport { defineAsyncComponent } from 'vue'\n    \n// import AsyncComp from './AsyncComp.vue'    //vue3\u4e2d\u9759\u6001\u5f15\u5165\u7ec4\u4ef6\nimport AsyncAddress from './AsyncAddress.vue'\n \n//vue3\u4e2d\u52a8\u6001\u5f15\u5165\u5f15\u5165\u7ec4\u4ef6\u7684\u5199\u6cd5\uff1a\nconst AsyncComp = defineAsyncComponent(() => import('./AsyncComp.vue'))\nexport default {\n  name:'app'\n  setup() {\n    return {\n     \n    }\n  },\n\n  components: {\n    AsyncComp,\n    AsyncAddress\n  }\n}\n<\/script>\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"AsyncComp.vue"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>AsyncComp22</h2>\n  <p>{{msg}}</p>\n</template>\n\n<script lang=\"ts\">\n\nexport default {\n  name: 'AsyncComp',\n  setup () {\n    // return new Promise((resolve, reject) => {\n    //   setTimeout(() => {\n    //     resolve({\n    //       msg: 'abc'\n    //     })\n    //   }, 2000)\n    // })\n    return {\n      msg: 'abc'\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"AsyncAddress.vue"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<h2>{{data}}</h2>\n</template>\n\n<script lang=\"ts\">\nimport axios from 'axios'\nexport default {\n    //\u8fd9\u662f\u5f02\u6b65\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528async\u4fee\u9970setup\u51fd\u6570\uff0c\u4f7f\u7528async await \u5f02\u6b65\u64cd\u4f5c\n  async setup() {\n    const result = await axios.get('/data/address.json')\n    return {\n      data: result.data\n    }\n  }\n}\n<\/script>\n")),(0,l.kt)("h1",{id:"8-\u5176\u4ed6\u65b0\u7684api"},"8 \u5176\u4ed6\u65b0\u7684API"),(0,l.kt)("h2",{id:"81-\u5168\u65b0\u7684\u5168\u5c40api"},"8.1 \u5168\u65b0\u7684\u5168\u5c40API"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"createApp()"),(0,l.kt)("li",{parentName:"ul"},"defineProperty()"),(0,l.kt)("li",{parentName:"ul"},"defineAsyncComponent()"),(0,l.kt)("li",{parentName:"ul"},"nextTick()")),(0,l.kt)("h2",{id:"82-\u5c06\u539f\u6765\u7684\u5168\u5c40api\u8f6c\u79fb\u5230\u5e94\u7528\u5bf9\u8c61"},"8.2 \u5c06\u539f\u6765\u7684\u5168\u5c40API\u8f6c\u79fb\u5230\u5e94\u7528\u5bf9\u8c61"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"app.component()"),(0,l.kt)("li",{parentName:"ul"},"app.config()"),(0,l.kt)("li",{parentName:"ul"},"app.directive()"),(0,l.kt)("li",{parentName:"ul"},"app.mount()"),(0,l.kt)("li",{parentName:"ul"},"app.unmount()"),(0,l.kt)("li",{parentName:"ul"},"app.use()")),(0,l.kt)("h2",{id:"83-\u6a21\u677f\u8bed\u6cd5\u53d8\u5316"},"8.3 \u6a21\u677f\u8bed\u6cd5\u53d8\u5316"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"v-model\u7684\u672c\u8d28\u53d8\u5316"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"prop\uff1avalue -> modelValue\uff1b"),(0,l.kt)("li",{parentName:"ul"},"event\uff1ainput -> update:modelValue\uff1b"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h2",{parentName:"li",id:"sync\u4fee\u6539\u7b26\u5df2\u79fb\u9664-\u7531v-model\u4ee3\u66ff"},".sync\u4fee\u6539\u7b26\u5df2\u79fb\u9664, \u7531v-model\u4ee3\u66ff")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"v-if\u4f18\u5148v-for\u89e3\u6790"))),(0,l.kt)("h1",{id:"9-vue\u7efc\u5408\u6848\u4f8b"},"9 Vue\u7efc\u5408\u6848\u4f8b"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20220908095737116",src:t(5214).Z,width:"1061",height:"575"})),(0,l.kt)("p",null,"\u4e0b\u9762\u7684\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u5747\u5728vue\u4e2d\u7684src\u6587\u4ef6\u5939\u4e2d\uff0c\u5982\u679c\u51fa\u73b0\u7c7b\u4f3c",(0,l.kt)("inlineCode",{parentName:"p"},"type/todo.ts"),"\uff0c\u5219\u662fsrc\u6587\u4ef6\u76ee\u5f55\u4e0b\u7684type\u6587\u4ef6\u5939\u4e2d"),(0,l.kt)("h3",{id:"91-\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3"},"9.1 \u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"type/todo.ts")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"//\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u7ea6\u675fstate\u7684\u6570\u636e\u7c7b\u578b\nexport interface Todo{\n    id:number,\n    title:string,\n    isCompleted:boolean\n\n}\n")),(0,l.kt)("h3",{id:"92-\u8bbe\u7f6e\u4e00\u4e2a\u7f13\u5b58\u5de5\u5177"},"9.2 \u8bbe\u7f6e\u4e00\u4e2a\u7f13\u5b58\u5de5\u5177"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"localStorageUtils.ts")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"import {Todo} from \"@/Types/todo\";\n\n//\u4fdd\u5b58\u6570\u636e\u5230\u6d4f\u89c8\u5668\u7684\u7f13\u5b58\u4e2d\nexport function saveTodos(todos:Todo[]){\n    localStorage.setItem('todos_key',JSON.stringify(todos))\n}\n\n//\u4ece\u6d4f\u89c8\u5668\u7f13\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e\nexport function readTodos(){\n    return JSON.parse(localStorage.getItem('todos_key') || '[]')\n}\n")),(0,l.kt)("h3",{id:"93-\u5199\u7ec4\u4ef6"},"9.3 \u5199\u7ec4\u4ef6"),(0,l.kt)("p",null,"App.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="todo-container">\n    <div class="todo-wrap">\n      <Header :addTodo="addTodo"/>\n      <List :todos="todos" :deleteTodo="deleteTodo" :updateTodo="updateTodo"/>\n      <Footer :todos="todos" :checkAll="checkAll " :claerAllCompletedTodos="claerAllCompletedTodos"/>\n\n    </div>\n  </div>\n\n</template>\n\n<script lang="ts">\n//\u5f15\u5165\u5b50\u7ea7\u7ec4\u4ef6\nimport {defineComponent, onMounted, reactive, toRefs, watch} from \'vue\';\nimport Header from \'./components/Header.vue\';\nimport List from \'./components/List.vue\';\nimport Footer from \'./components/Footer.vue\';\n//\u5f15\u5165\u4e00\u4e2a\u7ea6\u675fstate\u7684\u63a5\u53e3\nimport {Todo} from "@/Types/todo";\nimport {saveTodos, readTodos} from \'./utils/localStorageU\'\n\nexport default defineComponent({\n  name: \'App\',\n  //\u6570\u636e\u5e94\u8be5\u7528\u6570\u7ec4\u6765\u5b58\u50a8\uff0c\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u6570\u636e\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u4e2d\u5e94\u8be5\u6709\u4e09\u4e2a\u5c5e\u6027\uff08id,title,isCompleted\uff09\n  //\u5e94\u8be5\u628a\u6570\u636e\u6682\u4e14\u5b9a\u4e49\u518dApp.vue\u4e2d\n  setup() {\n    //\u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4\n    const state = reactive<{ todos: Todo[] }>({\n      todos:[],\n    //  \u6570\u7ec4\u53ef\u4ee5\u4ece\u672c\u5730\u5b58\u50a8\u8bfb\u53d6\uff0c\u5219\u8bbe\u7f6e\u4e00\u4e2a\u7a7a\u6570\u7ec4\n    //  todos: [\n        // {id:1,title:\'\u5954\u9a70\',isCompleted:false},\n        // {id:2,title:\'\u5b9d\u9a6c\',isCompleted:false},\n        // {id:3,title:\'\u5965\u8fea\',isCompleted:false},\n    //  ]\n\n    })\n\n    //\u9875\u9762\u52a0\u8f7d\u5b8c\u6bd5\u540e\u8fc7\u4e86\u4e00\u4f1a\u518d\u4ece\u672c\u5730\u8bfb\u53d6\u6570\u7ec4\n    onMounted(() => {\n      setTimeout(() => {\n        state.todos = readTodos()\n      }, 200)\n    })\n\n    //\u6dfb\u52a0\u6570\u636e\u65b9\u6cd5\uff1a\n    const addTodo = (todo: any) => {\n      state.todos.unshift(todo)\n    }\n    //\u5220\u9664\u6570\u636e\u65b9\u6cd5\n    const deleteTodo = (index: number) => {\n      state.todos.splice(index, 1)\n    }\n\n    // \u4fee\u6539todo\u7684isCompleted\u5c5e\u6027\u7684\u72b6\u6001\n    const updateTodo = (todo: Todo, isCompleted: boolean) => {\n      todo.isCompleted = isCompleted\n    }\n\n    //\u5168\u9009\u6216\u8005\u662f\u5168\u4e0d\u9009\u7684\u65b9\u6cd5\n    const checkAll = (isCompleted: boolean) => {\n      //\u904d\u5386\u6570\u7ec4\uff0c\u8bbe\u7f6e\u5168\u9009\u6216\u8005\u5168\u4e0d\u9009\n      state.todos.forEach(todo => {\n        todo.isCompleted = isCompleted\n      })\n    }\n\n    //\u6e05\u7406\u6240\u6709\u6570\u636e\n    const claerAllCompletedTodos = () => {\n      state.todos = state.todos.filter(todo => !todo.isCompleted)\n    }\n\n    //\u76d1\u89c6\u64cd\u4f5c\uff1a\u5982\u679ctodos\u6570\u7ec4\u7684\u6570\u636e\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u76f4\u63a5\u5b58\u50a8\u5230\u6d4f\u89c8\u5668\u7684\u7f13\u5b58\u4e2d\n    // watch(()=> state.todos,(value)=>{\n    //   saveTodos(value)\n    // })\n    // \u4e0b\u9762\u662f\u7b80\u5316\u5199\u6cd5\n    watch(() => state.todos, saveTodos, {deep: true})\n\n    return {\n      ...toRefs(state),\n      addTodo,\n      deleteTodo,\n      updateTodo,\n      checkAll,\n      claerAllCompletedTodos\n    }\n  },\n\n  //\u6ce8\u518c\u7ec4\u4ef6\n  components: {\n    Header,\n    List,\n    Footer\n  }\n\n\n});\n<\/script>\n<style scoped>\n.todo-container {\n  width: 600px;\n  margin: 0 auto;\n}\n\n.todo-container .todo-wrap {\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n}\n</style>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"components/Header.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="todo-header">\n    <input type="text" v-model="title" placeholder="\u8bf7\u8f93\u5165\u4f60\u7684\u4efb\u52a1\u540d\u79f0\uff0c\u6309\u56de\u8f66\u952e\u786e\u8ba4" @keyup.enter = \'add\'/>\n  </div>\n</template>\n\n<script>\nimport {ref} from "vue";\n\nexport default {\n  name: "Header",\n  props:{\n    addTodo:{\n      type:Function,\n      required:true\n    }\n  },\n\n  setup(props){\n    //\u5b9a\u4e49\u4e00\u4e2aref\u7c7b\u578b\u7684\u6570\u636e\n    const title = ref(\'\')\n    // \u56de\u8f66\u7684\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7528\u6765\u6dfb\u52a0\u6570\u636e\n    const add =()=>{\n      // \u83b7\u53d6\u6587\u672c\u6846\u8f93\u5165\u7684\u6570\u636e\uff0c\u5224\u65ad\u4e0d\u4e3a\u7a7a\n      const text = title.value\n      if (!text.trim()) return\n      // \u5982\u679c\u8f93\u5165\u7684\u6570\u636e\u4e0d\u4e3a\u7a7a\uff0c\u521b\u5efa\u4e00\u4e2atodo\u6570\u7ec4\n      const todo = {\n        id:Date.now(),\n        title:text,\n        isCompleted:false\n      }\n      // \u8c03\u7528 App.vue \u4e2d\u4f20\u6765\u7684\u6dfb\u52a0\u6570\u636e\u7684\u65b9\u6cd5\n      props.addTodo(todo)\n      // \u6e05\u7a7a\u6587\u672c\u6846\n      title.value = \'\'\n    }\n    return{\n      add,\n      title,\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n  .todo-header input {\n    width: 560px;\n    height: 28px;\n    font-size: 14px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    padding: 4px 7px;\n  }\n\n  .todo-header input:focus {\n    outline: none;\n    border-color: rgba(82, 168, 236, 0.8);\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);\n  }\n\n</style>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"components/List.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <ul class="todo-main">\n  <Item v-for="(todo) in todos" :key="todo.id" :todo="todo" :deleteTodo="deleteTodo" :updateTodo="updateTodo"/>\n  </ul>\n</template>\n\n<script>\n//\u5f15\u5165\u5b50\u7ea7\u7ec4\u4ef6\nimport Item from \'./Item.vue\';\n\nexport default {\n  name: "List",\n  components:{\n    Item\n  },\n  //\u63a5\u6536\n  props:[\'todos\',\'deleteTodo\',\'updateTodo\']\n}\n<\/script>\n\n<style scoped>\n  .todo-main {\n    margin-left: 0px;\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    padding: 0px;\n  }\n\n  .todo-empty {\n    height: 40px;\n    line-height: 40px;\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    padding-left: 5px;\n    margin-top: 10px;\n  }\n\n</style>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"components/Item.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <li\n      @mouseenter="mouseHandler(true)"\n      @mouseleave="mouseHandler(false)"\n      :style="{ backgroundColor:bgcolor,color:myColor}"\n      :index="index"\n>\n    <label>\n      <input type="checkbox" v-model="isCompleted"/>\n      <span>{{ todo.title }}</span>\n    </label>\n    <button class="btn btn-danger" style="display:none" v-show="isShow" @click="delTodo">\u5220\u9664</button>\n  </li>\n</template>\n\n<script lang="ts">\n// \u5f15\u5165\u63a5\u53e3\nimport {Todo} from \'../Types/todo\'\nimport {computed, ref} from "vue";\nexport default {\n  name: "Item",\n  //\u83b7\u53d6\u6570\u636e\uff1a\n  props:{\n    todo:{\n      type:Object as unknown as(Todo) ,  //\u51fd\u6570\u8fd4\u56de\u7c7b\u578b\u662fTodo\n      required:true\n    },\n    deleteTodo:{\n      type:Function,\n      required:true\n    },\n    index:{\n      type:Number,\n      required:true\n    },\n    updateTodo:{\n      type:Function,\n      required:true\n    }\n\n  },\n  setup(props:any){\n    //\u8bbe\u7f6e\u80cc\u666f\u8272\n    const bgcolor = ref(\'#fff\')\n    //\u524d\u666f\u8272\n    const myColor = ref(\'#000\')\n    // \u5220\u9664\u6309\u94ae\u662f\u5426\u663e\u793a\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793a\n    const isShow = ref(false)\n    //\u5b9a\u4e49\u9f20\u6807\u8fdb\u5165\u6216\u8005\u79bb\u5f00\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\n    const mouseHandler = (flag:boolean)=>{\n      if (flag){\n        bgcolor.value = \'pink\'\n        myColor.value = \'green\'\n        isShow.value = true\n      }else {\n        bgcolor.value = \'#fff\'\n        myColor.value = \'#000\'\n        isShow.value = flag\n      }\n    }\n    // \u70b9\u51fb\u5220\u9664\u6309\u94ae\uff0c\u5220\u9664\u6570\u636e\u7684\u65b9\u5f0f\n    const delTodo = ()=>{\n      //\u63d0\u793a\u4fe1\u606f\n      if (window.confirm(\'\u786e\u5b9a\u5220\u9664\u5417\')){\n        //\u8c03\u7528 App.vue \u4e2d\u5220\u9664\u6570\u636e\u7684\u65b9\u6cd5\n        props.deleteTodo(props.index)\n      }\n    }\n    // \u8ba1\u7b97\u5c5e\u6027\u7684\u65b9\u5f0f---\u6765\u8ba9\u5f53\u524d\u7684\u590d\u9009\u6846\u4e2d\u4e0d\u9009\u62e9\n    const isCompleted = computed({\n      get(){\n        return props.todo.isCompleted\n      },\n      set(val){\n        //\u56e0\u4e3a\u9875\u9762\u7684\u9009\u4e2d\u548c\u4e0d\u9009\u4e2d\uff0c\u90fd\u8981\u5bf9\u539f\u6765\u7684todo\u5bf9\u8c61\u6570\u7ec4\u7684isCompleted\u5c5e\u6027\u8fdb\u884c\u4fee\u6539\n        //\u8c03\u7528 App.vue \u4e2d\u4fee\u6539todo\u7684isCompleted\u5c5e\u6027\u7684\u72b6\u6001\u7684\u65b9\u6cd5\n        props.updateTodo(props.todo,val)\n      }\n    })\n    return{\n      isCompleted,\n      mouseHandler,\n      bgcolor,\n      myColor,\n      isShow,\n      delTodo\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n  li {\n    list-style: none;\n    height: 36px;\n    line-height: 36px;\n    padding: 0 5px;\n    border-bottom: 1px solid #ddd;\n  }\n\n  li label {\n    float: left;\n    cursor: pointer;\n  }\n\n  li label li input {\n    vertical-align: middle;\n    margin-right: 6px;\n    position: relative;\n    top: -1px;\n  }\n\n  li button {\n    float: right;\n    /*display: none;*/\n    margin-top: 3px;\n  }\n\n  li:before {\n    content: initial;\n  }\n\n  li:last-child {\n    border-bottom: none;\n\n  }\n\n\n</style>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"components/Footer.vue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="todo-footer">\n    <label>\n      <input type="checkbox" v-model="isCheckAll"/>\n    </label>\n    <span>\n          <span>\u5df2\u5b8c\u6210{{ count }}</span> / \u5168\u90e8{{ todos.length }}\n        </span>\n    <button class="btn btn-danger" @click="claerAllCompletedTodos">\u6e05\u9664\u5df2\u5b8c\u6210\u4efb\u52a1</button>\n  </div>\n</template>\n\n<script lang="ts">\nimport {Todo} from "@/Types/todo";\nimport {computed} from "vue";\n\nexport default {\n  name: "Footer",\n  props:{\n    todos:{\n      type:Object as unknown as(Todo) ,  //\u51fd\u6570\u8fd4\u56de\u7c7b\u578b\u662fTodo\n      required:true\n    },\n    checkAll:{\n      type:Function,\n      require:true\n    },\n    claerAllCompletedTodos:{\n      type:Function,\n      require:true\n    }\n  },\n  setup(props:any){\n    // \u5df2\u5b8c\u6210\u7684\u8ba1\u7b97\u5c5e\u6027\u64cd\u4f5c\n    const count = computed({\n      get(){\n        return props.todos.reduce(\n            (pre:any,todo:any,index:any)=> pre + (todo.isCompleted? 1:0),0)\n      },\n      set(){\n        return \'\'\n      }\n    })\n    //\u5168\u9009\u6216\u8005\u5168\u4e0d\u9009\u8ba1\u7b97\u5c5e\u6027\n    const isCheckAll = computed({\n      get(){\n        return count.value>0 && props.todos.length === count.value\n      },\n      set(val){\n        //\u8c03\u7528App.vue \u5168\u9009/\u5168\u4e0d\u9009\u7684\u65b9\u6cd5checkAll\n        props.checkAll(val)\n      },\n\n    })\n    return{\n      count,\n      isCheckAll,\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n  .todo-footer {\n    height: 40px;\n    line-height: 40px;\n    padding-left: 6px;\n    margin-top: 5px;\n  }\n\n  .todo-footer label {\n    display: inline-block;\n    margin-right: 20px;\n    cursor: pointer;\n  }\n\n  .todo-footer label input {\n    position: relative;\n    top: -1px;\n    vertical-align: middle;\n    margin-right: 5px;\n  }\n\n  .todo-footer button {\n    float: right;\n    margin-top: 5px;\n  }\n\n</style>\n')),(0,l.kt)("h1",{id:"10-\u9762\u8bd5\u9898"},"10 \u9762\u8bd5\u9898"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"/**\n * \n * Vue2\u548cVue3\u7684\u76f8\u6bd4\u8f83\u800c\u8a00\u7684\u76f8\u5173\u7684\u9762\u8bd5\u9898\n * 1.\u62b1\u6b49:Vue3\u6ca1\u6709\u7814\u7a76\u90a3\u4e48\u6df1,\u4e0d\u77e5\u9053\n * 2. \n * \n * 2020\u5e749\u6708\u53d1\u5e03\u7684\u6b63\u5f0f\u7248\n * Vue3\u652f\u6301\u5927\u591a\u6570\u7684Vue2\u7684\u7279\u6027\n * Vue\u4e2d\u8bbe\u8ba1\u4e86\u4e00\u5957\u5f3a\u5927\u7684\u7ec4\u5408APi\u4ee3\u66ff\u4e86Vue2\u4e2d\u7684option API ,\u590d\u7528\u6027\u66f4\u5f3a\u4e86\n * \u66f4\u597d\u7684\u652f\u6301TS\n * \u6700\u4e3b\u8981: Vue3\u4e2d\u4f7f\u7528\u4e86Proxy\u914d\u5408Reflect \u4ee3\u66ff\u4e86Vue2\u4e2dObject.defineProperty()\u65b9\u6cd5\u5b9e\u73b0\u6570\u636e\u7684\u54cd\u5e94\u5f0f(\u6570\u636e\u4ee3\u7406)\n * \u91cd\u5199\u4e86\u865a\u62dfDOM,\u901f\u5ea6\u66f4\u5feb\u4e86\n * \u65b0\u7684\u7ec4\u4ef6: Fragment(\u7247\u6bb5) / Teleport(\u77ac\u79fb) / Suspense(\u4e0d\u786e\u5b9a)\n * \u8bbe\u8ba1\u4e86\u4e00\u4e2a\u65b0\u7684\u811a\u624b\u67b6\u5de5\u5177,vite \n *  \n * \n * \n * \n * \n * \n")))}m.isMDXComponent=!0},608:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/27300703-5d131132311cb218-7dce27ee61f582ca6a345d50a79e5c6f.png"},2597:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/2c421e5392504ecc94c222057dba338a~tplv-k3u1fbpfcp-watermark-df123fe57452bd55cce12e0417790dca.image"},5954:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark-5957f47c9faaeeb054759c4736e41c55.image"},6008:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark-42b1907f9629d16552dff226eef79c4d.image"},6253:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark-501c2fd2f63a80c980f909c479a8e673.image"},5555:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark-95737932ab743fe867870346cc98cc01.image"},8627:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220906093706695-8e0698268c72e12c4bbd14c97a06e773.png"},346:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220906093826711-0e7b473c0343e8f471bd7850336129e0.png"},5214:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220908095737116-a71b3d917d80b11b2ac7c6de5ff5fbfe.png"},7569:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/lifecycle-4a919f7471e246973e7380cf0871a739.png"}}]);