<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Java/thread">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Java的线程基础 | 胖螺</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://blog.luomoe.com/docs/Java/thread"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="胖螺,JavaScript,python,tensorflow,nvidia"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Java的线程基础 | 胖螺"><meta data-rh="true" name="description" content="一、进程线程"><meta data-rh="true" property="og:description" content="一、进程线程"><link data-rh="true" rel="icon" href="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png"><link data-rh="true" rel="canonical" href="https://blog.luomoe.com/docs/Java/thread"><link data-rh="true" rel="alternate" href="https://blog.luomoe.com/docs/Java/thread" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://blog.luomoe.com/docs/Java/thread" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="胖螺 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="胖螺 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.dfc5b64c.css">
<link rel="preload" href="/assets/js/runtime~main.b2abe4ed.js" as="script">
<link rel="preload" href="/assets/js/main.cf17977a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">胖螺</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">笔记</a><a class="navbar__item navbar__link" href="/blog/welcome">博客</a><a class="navbar__item navbar__link" href="/blog/links">友链</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--dark_i4oU"><b>胖螺</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/java">Java</a><button aria-label="打开/收起侧边栏菜单「Java」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/java_basic">java基础篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/eiCom">八大常用类</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/comF">java 集合框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/io">IO流</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/annotations">Java的注解与反射</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/reflection">Java的反射</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Java/thread">Java的线程基础</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/python">python</a><button aria-label="打开/收起侧边栏菜单「python」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/javascript">JavaScript</a><button aria-label="打开/收起侧边栏菜单「JavaScript」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Java的线程基础</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Java的线程基础</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="一进程线程">一、进程线程<a class="hash-link" href="#一进程线程" title="标题的直接链接">​</a></h2><p>（数据结构）进程是程序的一次执行过程，或者是政治运行的一个程序。线程是由进程创建，是进程的一个实体，一个进程可以拥有多个线程。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="二并发并行">二、并发并行<a class="hash-link" href="#二并发并行" title="标题的直接链接">​</a></h2><p>单线程：同一个时刻，只允许执行一个线程</p><p>多线程：同一时刻，可以执行多个线程</p><p>并发：同一时刻，多个任务交替执行。单核CPU实现的多任务就是并发</p><p>并行：同一时刻，多个任务同事执行。多核CPU可以实现并行</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.omg.SendingContext.RunTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo01 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Runtime runtime = Runtime.getRuntime();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int cpuNums = runtime.availableProcessors();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(cpuNums);  //显示cpu核数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="三继承thread创建线程">三、继承Thread创建线程<a class="hash-link" href="#三继承thread创建线程" title="标题的直接链接">​</a></h2><p>创建线程的两种方法：</p><ul><li>继承Thread类，重写run方法</li><li>实现runnable接口，重写run方法</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 继承Thread创建线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo02 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //创建Cat对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cat cat = new Cat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cat.start();   //启动线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//1. 当一个类继承了Thread类，该类就可以当作线程使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//2. 我们会重写run方法，写上自己的业务代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//3. run Thread 类 实现了 Runnable接口的run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Cat extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int times = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {   //重写run方法，写上自己的业务逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //每隔一秒。控制台输出“喵喵”，共10次.执行完毕结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;喵喵&quot; + (++times));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (times ==10){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;  //当times=10时候，进程退出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="四多线程机制">四、多线程机制<a class="hash-link" href="#四多线程机制" title="标题的直接链接">​</a></h2><p>当mian线程启动一个子线程 Thread-0 ，主线程不会阻塞，会继续执行</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 继承Thread创建线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo02 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //创建Cat对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cat cat = new Cat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cat.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //当mian线程启动一个子线程 Thread-0 ，主线程不会阻塞，会继续执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //这时，我们的子线程会交替执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;主线程&quot;+ Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i&lt;60 ; i++){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;主线程i=&quot;+ i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//1. 当一个类继承了Thread类，该类就可以当作线程使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//2. 我们会重写run方法，写上自己的业务代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//3. run Thread 类 实现了 Runnable接口的run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Cat extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int times = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {   //重写run方法，写上自己的业务逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //每隔一秒。控制台输出“喵喵”，共80次.执行完毕结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;喵喵&quot; + (++times) + &quot; 子线程&quot;+Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (times ==80){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;  //当times=80时候，进程退出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809085507372.png" alt="image-20220809085507372" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="41-start">4.1 start<a class="hash-link" href="#41-start" title="标题的直接链接">​</a></h3><p><strong>为什么调用stat方法？</strong></p><p><code>cat.start();  //最终会执行cat的run（）方法</code></p><p><code>cat.run();  //run方法只是一个普通方法，没有真正启动一个线程,就会把run方法执行完毕，才向下执行</code></p><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809090450789.png" alt="image-20220809090450789" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="42-runnable创建线程">4.2 Runnable创建线程<a class="hash-link" href="#42-runnable创建线程" title="标题的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Runnable接口 实现创建线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 这里底层使用了设计模式：代理模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo03 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Dog dog = new Dog();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        dog.start();     这里不能用start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //创建Thread对象,把dog对象（实现Runnable），放入Thread，从而调用start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread = new Thread(dog);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Dog implements Runnable{    //通过Runnable接口，开发线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while(true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;小狗汪汪叫 &quot; +(++count) + Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (count == 10){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="43-子线程">4.3 子线程<a class="hash-link" href="#43-子线程" title="标题的直接链接">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * main方法实现两个子线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo04 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T1 t1 = new T1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T2 t2 = new T2();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread = new Thread(t1);     //新建一个进程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread1 = new Thread(t2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  Thread thread2 = new Thread(t2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread.start();   //启动第一个子线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.start();   //启动第二个子线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class  T1 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;hello world&quot; + (++count));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (count == 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class  T2 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot; hi&quot; + (++count));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (count == 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="44-多线程售票">4.4 多线程售票<a class="hash-link" href="#44-多线程售票" title="标题的直接链接">​</a></h3><p>经典售票问题</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 使用多线程，模拟三个窗口同时售票，每个窗口都会卖出100张票</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo05 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用继承 Thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket01 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket02 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket03 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        //会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket01.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket02.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket03.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用Runnable方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SellTicket02 sellTicket021 = new SellTicket02();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread1 = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread2 = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread2.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket01 extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //快捷键 CTRL + O   ，选run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket02 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="45通知线程退出">4.5通知线程退出<a class="hash-link" href="#45通知线程退出" title="标题的直接链接">​</a></h3><ul><li>当线程完成任务后，会自动退出</li><li>还可以通过 使用变量 来控制 run方法退出的方式停止线程，即 通知方式</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo06 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T t1 = new T();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果希望主线程main 去控制t1，必须可以修改loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //让t1 退出run方法，从而终止 t1线程 -&gt; 通知方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //让主线程休眠10秒，再通知t1线程退出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;main线程休眠10s&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(10 * 1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1.setLoop(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class T extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean loop = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (loop){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;执行&quot; + (++count));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setLoop(boolean loop) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.loop = loop;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="46线程中断">4.6线程中断<a class="hash-link" href="#46线程中断" title="标题的直接链接">​</a></h3><p>线程常用的方法第一组：</p><ol><li><code>setName</code>     //设置线程名称</li><li><code>getName</code>     //返回该线程名称</li><li><code>start</code>     //使该线程开始执行；Java虚拟机底层调用该线程的start0方法</li><li><code>run</code>     //调用线程对象run方法</li><li><code>setPriority</code>     //修改线程优先级</li><li><code>getPriority</code>    //获得线程优先级</li><li><code>sleep</code>     //在指定的毫秒数没让当前正在执行的线程休眠</li><li><code>interrupt</code>     //中断进程</li></ol><p>注意事项和细节</p><ul><li>start 底层会创建新的进程，调用run，run就是一个简单方法调用，不会启动新线程</li><li>线程优先级的范围</li><li>interrupt，中断进程，但是并没有真正结束进程。多以一般用于种端正在休眠的进程</li><li>sleep：线程的静态方法，使当前线程休眠</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo07 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T3 t3 = new T3();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t3.setName(&quot;摩拉克斯&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t3.setPriority(Thread.MIN_PRIORITY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t3.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(t3.getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;优先级&quot;+ t3.getPriority());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //主线程先打印5个hi ，然后中断子线程的休眠</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 5; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;hi&quot; +i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t3.interrupt();  //当执行到这里时，就会中断 t3的线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class T3 extends Thread{     //自定义的线程类</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 100; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //Thread.currentThread().getName() 获取当前线程的名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(Thread.currentThread().getName() + &quot;吃包子&quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(Thread.currentThread().getName()+ &quot;休眠中...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(20000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //当该线程执行到一个interrupt时，就会catch 一个异常，可以加入自己的业务代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //InterruptedException 是捕获到了一个中断异常，而不是终止</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(Thread.currentThread().getName() + &quot;被 interrupt了&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="47线程插队">4.7线程插队<a class="hash-link" href="#47线程插队" title="标题的直接链接">​</a></h3><p>常用方法第二组</p><ol><li>yield  : 线程的礼让。让出CPU，让其他线程执行，但是礼让时间不确定，所以也不一定礼让成功</li><li>join  ：线程插队。插队的线程一旦插队成功，则肯定先执行完插入线程的所有任务。</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo08 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T5 t5 = new T5();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t5.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 1; i &lt;= 20; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;吃了&quot; + i + &quot;包子&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (i == 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;================先吃了&quot; + i + &quot;包子===============&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //join 线程插队，一定成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                t5.join();   //再吃饺子</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                Thread.yield();     //线程礼让，不一定成功，看cpu心情</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;=============饺子吃完了，又开始吃包子=============&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class T5 extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 1; i &lt;= 20 ; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;吃了&quot; + i + &quot;饺子 JoinThread----------&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="线程插队练习">线程插队练习<a class="hash-link" href="#线程插队练习" title="标题的直接链接">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 主线程每隔1s，输出hi，一共10次</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 当输出hi 5 时，启动一个子线程（要求runnable），每隔1s 输出hello ，等该线程输出10次hello后，退出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 主线程继续输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 程序结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo09 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T6 t6 = new T6();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread = new Thread(t6);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 1; i &lt;= 10 ; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;hi  &quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (i == 5){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //说明输出了5次 hi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                thread.join();  //立即将t6子线程插入到主线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);  //输出一次hi，让main线程也休眠1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class T6 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;hello  &quot; + (++count));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (count == 10){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="五守护线程">五、守护线程<a class="hash-link" href="#五守护线程" title="标题的直接链接">​</a></h2><p>用户现场和守护线程</p><ol><li>用户线程：也叫工作线程，当线程任务执行完毕或通知方式结束</li><li>守护线程：一般是为工作线程服务的，当所有的用户线程结束，守护线程自动结束</li><li>常见的守护线程：垃圾回收机制</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo10 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T7 t7 = new T7();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果我们希望当main主线程结束后，子线程自动结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //只需要将子线程 设为守护线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t7.setDaemon(true);    //将子线程设为守护线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t7.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;nahida 快来&quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class T7 extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for ( ; ;){   //无限循环</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(500);  //休眠50ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;须弥什么时候开啊，等不及了&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="六线程7大状态">六、线程7大状态<a class="hash-link" href="#六线程7大状态" title="标题的直接链接">​</a></h2><p>JDK：在 Thread.State   中（操作系统中的几种状态：挂起、就绪、运行、阻塞、终止等几个状态）</p><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809115518098.png" alt="image-20220809115518098" class="img_ev3q"></p><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809115626915.png" alt="image-20220809115626915" class="img_ev3q"></p><p>runnable状态是处于可运行状态。</p><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809120451345.png" alt="image-20220809120451345" class="img_ev3q"></p><div class="language-Java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo11 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T8 t8 = new T8();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;状态 &quot; + t8.getState());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t8.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (Thread.State.TERMINATED != t8.getState()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;状态 &quot; + t8.getState());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;状态 &quot; + t8.getState());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class T8 extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;hi&quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="七线程同步机制">七、线程同步机制<a class="hash-link" href="#七线程同步机制" title="标题的直接链接">​</a></h2><ol><li>在多线程编程，一些敏感数据不允许被多个线程同时访问，此时就使用同步访问技术，保证数据在任何同一时刻，最多有一个线程访问，以保证数据的完整性</li><li>也可以这里理解：即当有一个线程在对内存进行操作时，其他线程都不可以对这个内存地址进行操作，知道该线程完成操作，其他线程才能对该内存地址进行操作</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 使用多线程，模拟三个窗口同时售票，每个窗口都会卖出100张票</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo05 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用继承 Thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket01 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket02 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket03 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        //会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket01.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket02.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket03.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用Runnable方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket02 sellTicket021 = new SellTicket02();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        Thread thread = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        Thread thread1 = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        Thread thread2 = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        thread1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        thread2.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 实现接口方法，使用synchronize实现线程同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SellTicket03 sellTicket031 = new SellTicket03();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread thread = new Thread(sellTicket031);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread1 = new Thread(sellTicket031);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread2 = new Thread(sellTicket031);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //不会出现超卖的现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread2.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//实现接口方法，使用synchronize实现线程同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//因为这里涉及到多个线程共享资源，所以我们使用实现Runnable方式（重要）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket03 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean loop = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void sell(){   //同步方法，在同一时刻，只能有一个线程来执行sell方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            loop = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //快捷键 CTRL + O   ，选run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public  void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (loop){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sell();    //sell 是一个同步方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//============================================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket01 extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //快捷键 CTRL + O   ，选run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket02 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="71互斥锁">7.1互斥锁<a class="hash-link" href="#71互斥锁" title="标题的直接链接">​</a></h3><ul><li>引入对象互斥锁的概念，来保证共享数据的完整性</li><li>每个对象都对应一个可称为“互斥锁”的标记，这个标记用来保证任一时刻，只能由一个线程访问该对象</li><li>关键字synchronized 来与对象互斥锁练习，当某个对象用synchronized修饰时，表面该对象在任一时刻只能由一个线程访问</li><li>同步的局限性：倒置程序的执行效率要降低</li><li>同步方法（非静态的）的锁可以是this ，也可以是其他对象（要求是同一个对象）</li><li>同步方法（静态的）的锁为当前类本身</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 使用多线程，模拟三个窗口同时售票，每个窗口都会卖出100张票</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo05 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用继承 Thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket01 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket02 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket01 sellTicket03 = new SellTicket01();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        //会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket01.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket02.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        sellTicket03.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用Runnable方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 会出现超卖的现象，sleep时间越短，就会出现超卖现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        SellTicket02 sellTicket021 = new SellTicket02();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        Thread thread = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        Thread thread1 = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        Thread thread2 = new Thread(sellTicket021);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        thread1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        thread2.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 实现接口方法，使用synchronize实现线程同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SellTicket03 sellTicket031 = new SellTicket03();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread thread = new Thread(sellTicket031);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread1 = new Thread(sellTicket031);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread2 = new Thread(sellTicket031);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //不会出现超卖的现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread2.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//实现接口方法，使用synchronize实现线程同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//1. public synchronized void sell() 就是一个同步方法  【非静态】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//2. 这时锁在 this对象   【非静态】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//3. 也可以在代码块上写synchronized ， 如：class SellTicket04，互斥锁还是在this对象   【非静态】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket03 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //因为这里涉及到多个线程共享资源，所以我们使用实现Runnable方式（重要）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean loop = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    ///////【同步方法（静态）】的锁为当前类本身！！！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    ///////public synchronized static void m1() 的锁加在SellTicket03.class！！！【静态同步方法】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    ///////这里的m1()方法使用时static修饰，所以是静态同步方法    【静态同步方法】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    public synchronized static void m1(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ///////这里的m2()方法使用static修饰，则底下的synchronized代码块也是【静态同步方法】  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    public static void m2(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        synchronized (SellTicket03.class) {        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//               ///////如果在【静态同步方法】中，实现一个同步代码块，synchronized (当前类名.class)  ！！！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            System.out.println(&quot;m2&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void sell(){   //同步方法，在同一时刻，只能有一个线程来执行sell方法  【非静态】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            loop = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //快捷键 CTRL + O   ，选run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public  void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (loop){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sell();    //sell 是一个同步方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//3. 也可以在代码块上写synchronized ， 如：class SellTicket04，互斥锁还在this对象 【非静态】   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket04 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //因为这里涉及到多个线程共享资源，所以我们使用实现Runnable方式（重要）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean loop = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Object object = new Object();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sell() {   //同步方法，在同一时刻，只能有一个线程来执行sell方法   【非静态】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (this) {                     //同步代码块！！！！！  【非静态】 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//      synchronized (object) {                     //同步代码块！！！互斥锁还在this对象object  【非静态】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;= 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                loop = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //快捷键 CTRL + O   ，选run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public  void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (loop){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sell();    //sell 是一个同步方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//===================================================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket01 extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //快捷键 CTRL + O   ，选run方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SellTicket02 implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 100;   //让多个线程共享num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (num &lt;=0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;售票结束&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;窗口线程名称:&quot; + Thread.currentThread().getName() + &quot;   还剩票数:&quot; + (--num));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意事项</p><ol><li>同步方法如果没有使用static修饰，默认锁对象为this</li><li>如果同步方法使用static修饰，默认锁对象：当前类.class</li><li>实现的落地步骤<ul><li>需要分析上锁的代码</li><li>选择同步代码块或同步方法（尽量使用同步代码块）</li><li>要求多个线程的锁对象为同一个即可</li></ul></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="72进程死锁">7.2进程死锁<a class="hash-link" href="#72进程死锁" title="标题的直接链接">​</a></h3><p>多个线程都占用了对方的锁资源，但不肯相让，导致了思索，在编程时一定要避免死锁的发生</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import javax.swing.plaf.synth.SynthOptionPaneUI;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo12 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //模拟一个死锁现象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeadLockDemo A = new DeadLockDemo(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeadLockDemo B = new DeadLockDemo(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A.setName(&quot;A线程&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        B.setName(&quot;B线程&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        B.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DeadLockDemo extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static Object o1 = new Object();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static Object o2 = new Object();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    boolean flag;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DeadLockDemo(boolean flag){     //构造器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.flag = flag;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //下面业务逻辑的分析</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1. 如果flag 为T ，线程就会先得到/持有 o1 对象锁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2. 如果线程A 得不到o2 对象锁，就会Blocked;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //3. 如果flag 为False ，线程B 就会先得到/持有 o2对象锁，然后尝试获取o1对象锁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //4. 如果线程B 得到o1 对象锁，就会Blocked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (flag){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized (o1){     //对象互斥锁，下面就是同步代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() +&quot;  进入1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                synchronized (o2){   //这里获得li对象的监视权</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.println(Thread.currentThread().getName() +&quot;  进入2&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized (o2){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() +&quot; 进入3&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                synchronized (o1){     //这里获得li对象的监视权</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.println(Thread.currentThread().getName() +&quot; 进入4&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="73释放锁">7.3释放锁<a class="hash-link" href="#73释放锁" title="标题的直接链接">​</a></h3><p>下面的操作会释放锁</p><ol><li>当前线程的同步方法、同步代码块执行结束</li><li>当前线程在同步代码块、同步方法遇到break、return</li><li>当前线程在同步代码块、同步方法中出现未处理的Error 或者Exception，导致异常结束</li><li>当前线程在同步代码块、同步方法中执行了线程对象的wait( ) 方法，当前线程暂停，并释放锁。</li></ol><p>下面的操作不会释放锁</p><ol><li><p>线程执行同步代码块或同步方法时，线程调用sleep、yield方法暂停当前线程的执行，不会释放锁</p></li><li><p>线程执行同步代码块时，其他线程调用了该线程的suspend( ) 方法将该线程挂起，该线程不会释放锁。</p><p>提示：应尽量避免使用suspend和resume 来控制线程，这两种方法不再推荐使用。</p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="八作业">八、作业<a class="hash-link" href="#八作业" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="作业一">作业一<a class="hash-link" href="#作业一" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809155212471.png" alt="image-20220809155212471" class="img_ev3q"></p><p>方法一：</p><p>main先启动TA、TB两个线程</p><p>TA先继续打印随机数，TB 等待键盘输入“Q”指令</p><p>键盘输入“Q”指令，TB 通知TA停止。通过中间变量loop实现通知。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.Random;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo13 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TA ta = new TA();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread1 = new Thread(ta);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TB tb = new TB(ta);  //一定要注意</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tb.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TA implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean loop = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (loop){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println((int)(Math.random()*100+1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setLoop(boolean loop) {   //可以修改loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.loop = loop;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TB extends Thread{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private TA ta;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Scanner scanner = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TB(TA ta) {  //构造器中，直接传入TA对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.ta = ta;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String str = &quot; &quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;输入Q 停止&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            char key = scanner.next().toUpperCase().charAt(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (key == &#x27;Q&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ta.setLoop(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;B退出&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>方法二：进程守护</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="作业二">作业二<a class="hash-link" href="#作业二" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://img.up.cdn.nahida.cn/typora-user-images/image-20220809162257978.png" alt="image-20220809162257978" class="img_ev3q"></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package opp1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class demo16 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Bank bank = new Bank();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread t1 = new Thread(bank);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread t2 = new Thread(bank);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1.setName(&quot;摩拉克斯&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t2.setName(&quot;巴巴托斯&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t2.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 因为这里涉及到多个线程共享资源，所以我们使用实现Runnable方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Bank implements Runnable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int money = 10000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 1. 这里使用synchronized实现线程同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 2. 当多个线程执行到这里时，就会去争夺this对象锁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 3. 哪个线程争夺到 this对象锁，就执行synchronized代码块，执行完后会释放this对象锁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 4. 争夺不到this对象锁，就blocked，准备继续争夺</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 5. this对象锁是非公平锁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized(this) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (money &lt; 1000) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.println(&quot;余额不足&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                money -=1000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;取出了1000元   当前余额为&quot; + money + &quot;元&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Java/reflection"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Java的反射</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/python"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">python</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#一进程线程" class="table-of-contents__link toc-highlight">一、进程线程</a></li><li><a href="#二并发并行" class="table-of-contents__link toc-highlight">二、并发并行</a></li><li><a href="#三继承thread创建线程" class="table-of-contents__link toc-highlight">三、继承Thread创建线程</a></li><li><a href="#四多线程机制" class="table-of-contents__link toc-highlight">四、多线程机制</a><ul><li><a href="#41-start" class="table-of-contents__link toc-highlight">4.1 start</a></li><li><a href="#42-runnable创建线程" class="table-of-contents__link toc-highlight">4.2 Runnable创建线程</a></li><li><a href="#43-子线程" class="table-of-contents__link toc-highlight">4.3 子线程</a></li><li><a href="#44-多线程售票" class="table-of-contents__link toc-highlight">4.4 多线程售票</a></li><li><a href="#45通知线程退出" class="table-of-contents__link toc-highlight">4.5通知线程退出</a></li><li><a href="#46线程中断" class="table-of-contents__link toc-highlight">4.6线程中断</a></li><li><a href="#47线程插队" class="table-of-contents__link toc-highlight">4.7线程插队</a></li></ul></li><li><a href="#五守护线程" class="table-of-contents__link toc-highlight">五、守护线程</a></li><li><a href="#六线程7大状态" class="table-of-contents__link toc-highlight">六、线程7大状态</a></li><li><a href="#七线程同步机制" class="table-of-contents__link toc-highlight">七、线程同步机制</a><ul><li><a href="#71互斥锁" class="table-of-contents__link toc-highlight">7.1互斥锁</a></li><li><a href="#72进程死锁" class="table-of-contents__link toc-highlight">7.2进程死锁</a></li><li><a href="#73释放锁" class="table-of-contents__link toc-highlight">7.3释放锁</a></li></ul></li><li><a href="#八作业" class="table-of-contents__link toc-highlight">八、作业</a><ul><li><a href="#作业一" class="table-of-contents__link toc-highlight">作业一</a></li><li><a href="#作业二" class="table-of-contents__link toc-highlight">作业二</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 胖螺 2020-2023 . <br>
                    <a href="https://www.nahida.cn/" target="_blank" style="color:#fff">纳西妲 世界第一可爱</a> <br>
                  <span style="text-align: center">  本网站由<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img src="https://img.up.cdn.nahida.cn/icon/upyun_logo5.png" width="53px" style="vertical-align: middle; display: inline-block;"></a>提供CDN加速/云存储服务</span>

        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.b2abe4ed.js"></script>
<script src="/assets/js/main.cf17977a.js"></script>
</body>
</html>