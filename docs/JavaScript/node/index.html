<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-JavaScript/node/node">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">node node与npm | 胖螺</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://blog.luomoe.com/docs/JavaScript/node/"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="胖螺,JavaScript,python,tensorflow,nvidia"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="node node与npm | 胖螺"><meta data-rh="true" name="description" content="1.1 为什么要学习nodejs?"><meta data-rh="true" property="og:description" content="1.1 为什么要学习nodejs?"><link data-rh="true" rel="icon" href="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png"><link data-rh="true" rel="canonical" href="https://blog.luomoe.com/docs/JavaScript/node/"><link data-rh="true" rel="alternate" href="https://blog.luomoe.com/docs/JavaScript/node/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://blog.luomoe.com/docs/JavaScript/node/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="胖螺 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="胖螺 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.dfc5b64c.css">
<link rel="preload" href="/assets/js/runtime~main.b2abe4ed.js" as="script">
<link rel="preload" href="/assets/js/main.cf17977a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">胖螺</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">笔记</a><a class="navbar__item navbar__link" href="/blog/welcome">博客</a><a class="navbar__item navbar__link" href="/blog/links">友链</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://img.up.cdn.nahida.cn/2020/03/cropped-logo2-1.png" alt="胖螺" class="themedImage_ToTc themedImage--dark_i4oU"><b>胖螺</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/java">Java</a><button aria-label="打开/收起侧边栏菜单「Java」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/python">python</a><button aria-label="打开/收起侧边栏菜单「python」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/javascript">JavaScript</a><button aria-label="打开/收起侧边栏菜单「JavaScript」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/base">JavaScript基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/dom">WEB APIs ( JS  DOM )</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/bom">WEB APIs ( JS  BOM )</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/js-plus">JavaScript 高级</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/Ajax">Ajax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/git/">git和数据可视化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/JavaScript/node/">node node与npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/webpack/">ES6模块化与webpack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/typescript/">typescript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/JavaScript/Vue3/">Vue3</a></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/javascript"><span itemprop="name">JavaScript</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">node node与npm</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>1. nodejs基本介绍</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-为什么要学习nodejs">1.1 为什么要学习nodejs?<a class="hash-link" href="#11-为什么要学习nodejs" title="标题的直接链接">​</a></h2><p>① 为什么要学习服务端的开发？</p><ol><li><p>通过学习Node.js开发理解<strong>服务器开发</strong>、<strong>Web请求和响应过程</strong>、 <strong>了解服务器端如何与客户端配合</strong></p></li><li><p>作为前端开发工程师（FE - front-end engineer）需要具备一定的服务端开发能力</p></li><li><p>全栈工程师的必经之路</p></li></ol><p>② 服务器端开发语言有很多，为什么要选择nodejs ?</p><ol><li>降低编程语言切换的成本(nodejs实质上用的还是javascript)</li><li>NodeJS是前端项目的基础设施，不仅仅是做服务端开发， 前端项目中用到的大量工具都是基于Node的, 比如: webpack ...</li><li>nodejs在处理高并发上有得天独厚的优势, 大型项目经常会用Node做<code>web服务器上层的中间件</code>,  <code>web服务器上层网关</code>...</li><li><strong>对于前端工程师，面试时可能对于nodejs有一定的要求</strong></li></ol><p><strong>问题小结:</strong></p><ol><li>现阶段为什么要学习nodejs开发?  </li><li>服务器开发有很多,为什么要选择nodejs呢?</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-浏览器与javascript">1.2 浏览器与javaScript<a class="hash-link" href="#12-浏览器与javascript" title="标题的直接链接">​</a></h2><blockquote><p>思考问题：为什么浏览器能够执行js代码?</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="js的组成部分">js的组成部分<a class="hash-link" href="#js的组成部分" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="image-20210511124905844" src="/assets/images/image-20210511124905844-905e253aeafb06cc5d980b46caf35a8f.png" width="651" height="365" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="浏览器的组成部分">浏览器的组成部分<a class="hash-link" href="#浏览器的组成部分" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="image-20210510154247797" src="/assets/images/image-20210510154247797-917e3ab8ae1e1e773585dfcb69847b7f.png" width="1362" height="960" class="img_ev3q"></p><p><strong>浏览器引擎</strong>:  </p><ul><li>负责在用户界面和渲染引擎之间传送指令</li><li>在客户端本地缓存中读写数据</li><li>是浏览器中各个部分之间相互通信的核心</li></ul><p><strong>渲染引擎</strong>：负责解析html和css</p><p><strong>js引擎</strong>：负责解析javascript代码</p><p><img loading="lazy" src="/assets/images/Snipaste_2020-10-08_17-06-46-8cf02f50e7937eb31d10efbb5078c4a4.png" width="457" height="277" class="img_ev3q"></p><p>不同的浏览器使用不同的<strong>JavaScript引擎</strong>：</p><ul><li>Chrome 浏览器 =&gt;  V8  </li><li>Firefox 浏览器 =&gt;  OdinMonkey（奥丁猴）</li><li>Safri 浏览器 =&gt;  JSCore</li><li>IE 浏览器 =&gt;  Chakra（查克拉）</li><li>其中，Chrome 浏览器的 V8 解析引擎性能最好！</li></ul><p>不同的浏览器使用不同的<strong>渲染引擎</strong>：</p><ul><li>Chrome 浏览器 =&gt;  webkit, blink</li><li>Firefox 浏览器 =&gt;  Gecko</li><li>Safri 浏览器 =&gt;  webkit</li><li>IE 浏览器 =&gt;  Trident</li></ul><blockquote><p>联想记忆:  JS引擎 类比 车的发动机;  渲染引擎  类比  车的车载系统</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="为什么js可以操作网页内容和浏览器功能">为什么JS可以操作&quot;网页内容&quot;和&quot;浏览器功能&quot;?<a class="hash-link" href="#为什么js可以操作网页内容和浏览器功能" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="/assets/images/Snipaste_2020-10-08_17-29-12-050e6d37526b803b406b794472c01dff.png" width="460" height="281" class="img_ev3q"></p><p>每个浏览器都内置了DOM、BOM 这样的 API</p><p>因此，浏览器中的JavaScript 才可以调用它们。</p><p><strong>浏览器中的JavaScript运行环境</strong></p><p><img loading="lazy" src="/assets/images/Snipaste_2020-10-08_17-33-05-4bdf1174d52e8fe033268d11db3241c0.png" width="495" height="299" class="img_ev3q"></p><p>总结：</p><ul><li>运行环境指的是代码正常运行所需的必要环境。</li><li>浏览器是javascript的运行环境。</li></ul><blockquote><p>思考:  是不是只要一个软件的运行环境中有JS引擎, 就可以执行JS代码?</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-nodejs简介">1.3 nodejs简介<a class="hash-link" href="#13-nodejs简介" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是nodejs">什么是nodejs?<a class="hash-link" href="#什么是nodejs" title="标题的直接链接">​</a></h3><p>Node.js® is a JavaScript runtime built on Chrome&#x27;s V8 JavaScript engine.</p><p>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。</p><p>通俗的理解：Node.js 为 JavaScript 代码的正常运行，提供的必要的环境。</p><p>Node.js 的中文官网地址： <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">https://nodejs.org/zh-cn/</a></p><p><img loading="lazy" src="/assets/images/Snipaste_2020-10-08_17-37-30-7b04c2c7077d36d49cbcaba67383242f.png" width="489" height="296" class="img_ev3q"></p><p>注意：</p><p>① 浏览器是 JavaScript 的前端运行环境。</p><p>② Node.js 是 JavaScript 的后端运行环境。</p><p>③ Node.js 中无法调用 DOM 和 BOM 等 浏览器内置 API。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs与浏览器的区别">nodejs与浏览器的区别?<a class="hash-link" href="#nodejs与浏览器的区别" title="标题的直接链接">​</a></h3><p>相同点：nodejs与浏览器都是javascript的运行环境，都能够解析js程序。</p><p>不同点：nodejs无法使用DOM和BOM的操作，浏览器无法执行nodejs中的文件操作等功能</p><p><img loading="lazy" src="/assets/images/jh-node-c929c11ae74ba3e6ca1cc8bf67859b5d.png" width="942" height="355" class="img_ev3q"></p><p><strong>问题小结：</strong></p><ol><li><p>在浏览器端，可以使用javascript操作文件么？</p></li><li><p>在nodejs端，可以使用BOM和DOM的方法么？</p></li><li><p>我们学习nodejs，学习什么内容？</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs可以做什么">Node.js可以做什么?<a class="hash-link" href="#nodejs可以做什么" title="标题的直接链接">​</a></h3><p>Node.js 作为一个 JavaScript 的运行环境，仅仅提供了基础的功能和API。</p><p>然而，基于Node.js 提供的这些基础能，很多强大的工具和框架如雨后春笋，层出不穷。</p><p>所以学会了Node.js ，可以让前端程序员胜任更多的工作和岗位：</p><p>① 基于 Express/Koa/Egg 等框架（<a href="http://www.expressjs.com.cn/%EF%BC%89%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAWeb" target="_blank" rel="noopener noreferrer">http://www.expressjs.com.cn/），可以快速构建Web</a> 应用</p><p>② 基于 Electron框架（<a href="https://electronjs.org/" target="_blank" rel="noopener noreferrer">https://electronjs.org/</a>），可以构建跨平台的桌面应用</p><p>③ 基于 restify 框架（<a href="http://restify.com/%EF%BC%89%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAAPI" target="_blank" rel="noopener noreferrer">http://restify.com/），可以快速构建API</a> 接口项目</p><p>④ 读写和操作数据库、创建实用的命令行工具辅助前端开发、etc…</p><p>总之：</p><p>Node.js 是大前端时代的“<strong>大宝剑</strong>”，有了Node.js 这个超级 <strong>buff</strong> 的加持，前端程序员的行业竞争力会越来越强！</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs怎么学">Node.js怎么学?<a class="hash-link" href="#nodejs怎么学" title="标题的直接链接">​</a></h3><p>浏览器中的 JavaScript 学习路径：
JavaScript 基础语法 + 浏览器内置API（DOM + BOM） + 第三方库（Echarts、AntD 等）</p><p>Node.js 的学习路径：
JavaScript 基础语法 + <strong>Node.js 内置 API 模块（fs、path、http等）</strong>+ 第三方框架（Express、Electron等）</p><h1>2. nodejs环境的安装</h1><p>如果希望通过Node.js 来运行 Javascript 代码，则必须在计算机上安装Node.js 环境才行。</p><p>安装包可以从Node.js 的官网首页直接下载，进入到Node.js 的官网首页（<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">https://nodejs.org/zh-cn/</a>），点 击绿色的按钮，下载所需的版本后，双击直接安装即可。</p><p><img loading="lazy" alt="image-20220830155912046" src="/assets/images/image-20220830155912046-269f6695ac3a53c09824bd431e0d685d.png" width="1277" height="616" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21-版本说明">2.1 版本说明<a class="hash-link" href="#21-版本说明" title="标题的直接链接">​</a></h2><ul><li>LTS 为长期稳定版，对于追求稳定性的企业级项目来说，推荐安装LTS 版本的 Node.js。</li><li>Current 为新特性尝鲜版，对于热衷于尝试新特性的用户来说，推荐安装Current 版本的 Node.js。但是，Current 版本 中可能存在隐藏的Bug 或安全性漏洞，因此不推荐在企业级项目中使用Current 版本的 Node.js。</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22-安装nodejs">2.2 安装nodejs<a class="hash-link" href="#22-安装nodejs" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="windows安装步骤">windows安装步骤<a class="hash-link" href="#windows安装步骤" title="标题的直接链接">​</a></h3><p>打开终端测试</p><p>使用快捷键（Windows徽标键+ R）打开运行面板，输入cmd 后直接回车，即可打开终端。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mac安装步骤">mac安装步骤<a class="hash-link" href="#mac安装步骤" title="标题的直接链接">​</a></h3><ol><li>选择安装包</li></ol><p><img loading="lazy" alt="image-20210510171319260" src="/assets/images/image-20210510171319260-922338c3be4c4f0ad7d8abe09cc92410.png" width="862" height="426" class="img_ev3q"></p><ol start="2"><li>如图</li></ol><p><img loading="lazy" alt="image-20210510171357404" src="/assets/images/image-20210510171357404-947608875c265a1e6dfdfc93ebcc5cb0.png" width="1238" height="892" class="img_ev3q"></p><ol start="3"><li>点击继续</li></ol><p><img loading="lazy" alt="image-20210510171418285" src="/assets/images/image-20210510171418285-0ba86e058adc6e2878a039e671e8a753.png" width="1236" height="894" class="img_ev3q"></p><ol start="4"><li>点击继续</li></ol><p><img loading="lazy" alt="image-20210510171439220" src="/assets/images/image-20210510171439220-2f829cc45dcc3a16e73101516cde576e.png" width="1244" height="884" class="img_ev3q"></p><ol start="5"><li>点击同意</li></ol><p><img loading="lazy" alt="image-20210510171508041" src="/assets/images/image-20210510171508041-d86441d203ddfe70d3db89175249d5c0.png" width="1246" height="896" class="img_ev3q"></p><ol start="6"><li>点击继续</li></ol><p><img loading="lazy" alt="image-20210510171537415" src="/assets/images/image-20210510171537415-94c22de5e5f513b2fe0a23c850ecbc05.png" width="1238" height="894" class="img_ev3q"></p><ol start="7"><li>点击安装</li></ol><p><img loading="lazy" alt="image-20210510171612177" src="/assets/images/image-20210510171612177-dc5deb1e233bf1842dad2ccb1698b4be.png" width="1248" height="902" class="img_ev3q"></p><ol start="8"><li>使用指纹或者输入密码进行安装</li></ol><p><img loading="lazy" alt="image-20210510171648170" src="/assets/images/image-20210510171648170-2d3f3e084693c911936391f3a3c66e96.png" width="1232" height="898" class="img_ev3q"></p><p>能够看到如图，说明安装成功了。</p><ol start="9"><li>打开终端测试node是否安装成功</li></ol><p><img loading="lazy" alt="image-20210510171804256" src="/assets/images/image-20210510171804256-3c2b0515a89be94d78d421e32ac0ac26.png" width="1784" height="984" class="img_ev3q"></p><ol start="10"><li><p>输入<code>node -v</code>查看node安装的版本</p><p><img loading="lazy" alt="image-20210510171911844" src="/assets/images/node-version-a3476654d07b7f331921b4697cf30e64.png" width="751" height="298" class="img_ev3q"></p></li></ol><blockquote><p>测试是否安装成功</p></blockquote><p>打开终端，在终端输入命令node –v 后，按下回车键，即可查看已安装的Node.js 的版本号。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="23-终端的使用">2.3 终端的使用<a class="hash-link" href="#23-终端的使用" title="标题的直接链接">​</a></h2><p>终端（英文：Terminal）是专门为开发人员设计的，用 于实现人机交互的一种方式。</p><p>nodejs和普通的程序运行不一样，需要在终端中使用node命令来使用。</p><p>windows终端和mac电脑的终端打开方式稍微有些不同。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="windows打开终端的方式">windows打开终端的方式<a class="hash-link" href="#windows打开终端的方式" title="标题的直接链接">​</a></h3><ol><li>window + R:  cmd  powershell  默认在C盘的用户目录打开</li><li>在任意的文件夹下，按住shift键，使用鼠标右键  （好处：可以在任意的文件夹下打开命令窗口）</li></ol><p><img loading="lazy" alt="image-20210512100917960" src="/assets/images/image-20210512100917960-f54aec3fc38623b0ac2c64f7b571a9c3.png" width="311" height="386" class="img_ev3q"></p><ol start="3"><li>使用vscode集成的终端，在js文件或者在文件夹上右键 </li></ol><p><img loading="lazy" alt="node-o.png" src="/assets/images/node-o-2fa01e952a69054dc1396e832de9b626.png" width="511" height="658" class="img_ev3q"></p><p><code>shift + Escape</code></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mac打开终端的方式">mac打开终端的方式<a class="hash-link" href="#mac打开终端的方式" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="image-20210512101308687" src="/assets/images/image-20210512101308687-06ada2ee7a501374744e51ecfd1272e8.png" width="1004" height="236" class="img_ev3q"></p><ol start="2"><li><p>在文件夹上右键，可以打开当前文件夹的终端</p></li><li><p>在vscode中使用</p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="24-终端常见操作">2.4 终端常见操作<a class="hash-link" href="#24-终端常见操作" title="标题的直接链接">​</a></h2><p>终端命令</p><ul><li><code>ls</code>  list 查看 ，查看当前文件夹下所有的目录列表</li><li><code>cd</code>  切换到某个文件夹下，  change directory</li><li><code>cd ..</code>  退回上级文件夹</li><li><code>clear</code> 清屏</li><li><code>esc</code> 清除当前这一行</li></ul><p>常用快捷键</p><p>在 Windows 的命令行中，我们可以通过如下快捷键，来提高命令行的操作效率：
① 使用 ↑ 键，可以快速定位到上一次执行的命令
② 使用 tab 键，能够快速补全路径
③ 使用 esc 键，能够快速清空当前已输入的命令</p><h1>3. nodejs基本使用</h1><p>在 Node.js 中需要通过终端才能执行 JavaScript 代码</p><p>① 打开终端</p><p>② 输入 node 要执行的js文件的路径，即可通过Node.js，来执行存放于.js 文件中的代码</p><ul><li><p>创建js文件 <code>helloNode.js</code></p></li><li><p>写nodejs的内容：<code>console.log(&#x27;hello nodejs&#x27;)</code></p></li><li><p>打开终端</p></li><li><p>执行命令：<code>node helloNode.js</code></p></li></ul><blockquote><p>注意：在nodejs中是无法使用DOM和BOM的内容的，因此<code>document, window</code>等内容是无法使用的。</p></blockquote><h1>4. global模块</h1><p>global模块，是node的全局模块，在使用时不需要引入，直接使用。</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  * window 浏览器中的全局对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  * global nodejs中的全局对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  * 注意 : node里面使用 global里面的变量,不需要引入</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//1. console.log()  打印</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//2. setTimeout 和setInterval ，延时器和定时器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;123&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 模块作用域下的属性 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//3. __dirname  当前文件夹的绝对路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//4. __filename 当前文件的完整路径, 包含当前文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//从当前所在磁盘盘符一直到当前文件夹的路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__filename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>5. fs模块</h1><blockquote><p>fs模块是nodejs中最常用的一个模块，因此掌握fs模块非常的有必要，fs模块的方法非常多,用到了哪个查哪个即可。</p><p>文档地址：<a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/fs.html</a></p></blockquote><p>  在nodejs中，提供了fs模块，这是node的核心模块</p><p>  注意：</p><ol><li>除了global模块中的内容可以直接使用，其他模块都是需要加载的。</li><li>fs模块不是全局的，不能直接使用。因此需要导入才能使用。</li></ol><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;fs&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="51-读取文件">5.1 读取文件<a class="hash-link" href="#51-读取文件" title="标题的直接链接">​</a></h2><blockquote><p>语法：fs.readFile(path<!-- -->[, options]<!-- -->, callback)</p></blockquote><p>方式一：不传编码参数</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//参数1： 文件的路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数2： 读取文件的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//参数1：错误对象，如果读取失败，err会包含错误信息，如果读取成功，err是null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//参数2：读取成功后的数据（是一个Buffer对象）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;data.txt&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>方式二：传编码参数</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//参数1： 文件的路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数2： 编码，如果设置了，返回一个字符串，如果没有设置，会返回一个buffer对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数3： 回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;data.txt&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;utf8&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>关于Buffer对象</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">1.</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer对象是Nodejs用于处理二进制数据的。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2.</span><span class="token plain"> 其实任意的数据在计算机底层都是二进制数据，因为计算机只认识二进制。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3.</span><span class="token plain"> 所以读取任意的文件，返回的结果都是二进制数据，即Buffer对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4.</span><span class="token plain"> </span><span class="token method function property-access maybe-class-name" style="color:#d73a49">Buffer对象可以调用toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">方法转换成字符串。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="52-写文件">5.2 写文件<a class="hash-link" href="#52-写文件" title="标题的直接链接">​</a></h2><blockquote><p>语法：fs.writeFile(file, data<!-- -->[, options]<!-- -->, callback)</p></blockquote><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//参数1：写入的文件名(如果文件不存在，会自动创建)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数2：写入的文件内容（注意：写入的内容会覆盖以前的内容）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数3：写文件后的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;2.txt&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world, 我是一个中国人&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;写入文件失败&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;写入文件成功&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意：</p><ol><li>写文件的时候，会把原来的内容给覆盖掉</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="53-追加文件">5.3 追加文件<a class="hash-link" href="#53-追加文件" title="标题的直接链接">​</a></h2><blockquote><p>语法：fs.appendFile(path, data<!-- -->[, options]<!-- -->, callback)</p></blockquote><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//参数1：追加的文件名(如果文件不存在，会自动创建)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数2：追加的文件内容（注意：写入的内容会覆盖以前的内容）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//参数3：追加文件后的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;2.txt&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;我是追加的内容&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;追加文件内容失败&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;追加文件内容成功&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>思考：如果没有appendFile，通过readFile与writeFile应该怎么实现？</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="54-练习-考试成绩整理">5.4 练习-考试成绩整理<a class="hash-link" href="#54-练习-考试成绩整理" title="标题的直接链接">​</a></h2><p>目标：</p><p>把<code>成绩.txt</code>中的数据： <code>小红=99 小白=100 小黄=70 小黑=66 小绿=88</code></p><p><img loading="lazy" alt="image-20210511130034124" src="/assets/images/image-20210511130034124-1662194702938-42b53f96885a363865fb0337d276a7d1.png" width="655" height="76" class="img_ev3q"></p><p>整理成为下列各式并保存成<code>成绩-ok.txt</code>：</p><p><code>小红:99</code></p><p><code>小白:100</code></p><p><code>小黄:70</code></p><p><code>小黑:66</code></p><p><code>小绿:88</code></p><p><img loading="lazy" alt="image-20210511130054287" src="/assets/images/image-20210511130054287-1662194702938-9459e900fb8b0f0730cf89bd1a2a66b2.png" width="662" height="159" class="img_ev3q"></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  常规写法</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 1. 引入fs模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2. 读取 成绩.txt 中的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成绩.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;读取失败&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 2.1 获取读取的内容并转化</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> newData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;:&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 2.2 把新的内容写入 成绩-ok 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成绩-OK.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成绩写入失败&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成绩写入成功!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  正则写法</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 1. 引入fs模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2. 读取文件中的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成绩.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;读取文件失败&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 2.1 内容存储格式转化</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> newData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">=</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-flags" style="color:#36acaa">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;:&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 2.2 写入新的文件 成绩-OK-2.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成绩-OK-2.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;写入成绩失败&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;写入成绩成功&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="55-fs-模块-路径动态拼接的问题">5.5 fs 模块-路径动态拼接的问题<a class="hash-link" href="#55-fs-模块-路径动态拼接的问题" title="标题的直接链接">​</a></h2><p>在使用 fs 模块操作文件时，如果提供的操作路径是以./ 或 ../ 开头的相对路径时，很容易出现路径动态拼接错误的问题。
原因：代码在运行的时候，会以执行node 命令时所处的目录，动态拼接出被操作文件的完整路径。
解决方案：在使用fs 模块操作文件时，直接提供绝对路径，不要提供./ 或 ../ 开头的相对路径，从而防止路径动态拼接的问题。</p><p>注意：使用__dirname 获取当前文件所在的绝对路径</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 拼接要读取文件的绝对路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> filepath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __dirname </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&#x27;/hello.txt&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filepath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 判断是否读取成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>6. path路径模块</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="61-什么是path路径模块">6.1 什么是path路径模块?<a class="hash-link" href="#61-什么是path路径模块" title="标题的直接链接">​</a></h2><p>path 模块是 Node.js 官方提供的、用来处理路径的模块。它提供了一系列的方法和属性，用来满足用户对路径的处理 需求。
例如：
⚫ path.join() 方法，用来将多个路径片段拼接成一个完整的路径字符串
⚫ path.basename() 方法，用来从路径字符串中，将文件名解析出来</p><p>如果要在 JavaScript 代码中，使用 path 模块来处理路径，则需要使用如下的方式先导入它：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="62-路径拼接">6.2 路径拼接<a class="hash-link" href="#62-路径拼接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathjoin的语法格式">path.join()的语法格式<a class="hash-link" href="#pathjoin的语法格式" title="标题的直接链接">​</a></h3><p>使用 path.join() 方法，可以把多个路径片段拼接为完整的路径字符串，语法格式如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">paths</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数解读：
⚫ ...paths  路径片段的序列
⚫ 返回值: </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathjoin的代码示例">path.join()的代码示例<a class="hash-link" href="#pathjoin的代码示例" title="标题的直接链接">​</a></h3><p>使用 path.join() 方法，可以把多个路径片段拼接为完整的路径字符串：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;b&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;c&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//      a/b/c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/b/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;c&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//    a/b/c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/b/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;c&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//       a/b/c/index.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;b&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../c&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//      a/c/index.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// node自带的全局变量，表示当前js文件所在的绝对路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 拼接成绩.txt的绝对路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;成绩.txt&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ------ 最常用的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="63-获取路径中的文件名">6.3 获取路径中的文件名<a class="hash-link" href="#63-获取路径中的文件名" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathbasename的语法格式">path.basename()的语法格式<a class="hash-link" href="#pathbasename的语法格式" title="标题的直接链接">​</a></h3><p>使用 path.basename() 方法，可以获取路径中的最后一部分，经常通过这个方法获取路径中的文件名，语法格式如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">ext</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数解读：
⚫ path : 必选参数，表示一个路径的字符串
⚫ ext : 可选参数，表示可选的文件扩展名
⚫ 返回: 表示路径中的最后一部分</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathbasename的代码示例">path.basename()的代码示例<a class="hash-link" href="#pathbasename的代码示例" title="标题的直接链接">​</a></h3><p>使用 path.basename() 方法，可以从一个文件路径中，获取到文件的名称部分：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 找文件名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//         index.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a/b/c/index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//   index.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/a.jpg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//                a.jpg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="64-获取路径中的文件扩展名">6.4 获取路径中的文件扩展名<a class="hash-link" href="#64-获取路径中的文件扩展名" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathextname的语法格式">path.extname()的语法格式<a class="hash-link" href="#pathextname的语法格式" title="标题的直接链接">​</a></h3><p>使用 path.extname() 方法，可以获取路径中的扩展名部分，语法格式如下：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数解读：
⚫ path :必选参数，表示一个路径的字符串
⚫ 返回:  返回得到的扩展名字符串</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathextname的代码示例">path.extname()的代码示例<a class="hash-link" href="#pathextname的代码示例" title="标题的直接链接">​</a></h3><p>使用 path.extname() 方法，可以获取路径中的扩展名部分</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 找字符串中，最后一个点及之后的字符</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// .html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a.b.c.d.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// .html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;asdfas/asdfa/a.b.c.d.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// .html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;adf.adsf&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// .adsf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>7. http模块</h1><p>前置知识: 当我们在浏览器中输入了<a href="http://www.baidu.com%E7%9A%84%E6%97%B6%E5%80%99,%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88" target="_blank" rel="noopener noreferrer">www.baidu.com的时候,发生了什么</a>?</p><ul><li><p>ip地址 域名 端口三者之间的关系?</p><ul><li><p>ip地址:</p><ul><li><p>任何一台设备(计算机, 手机, ...)想要接入到网络中(互联网,局域网)，就会被分配一个唯一的ip地址</p></li><li><p>通过这个ip地址就能找到这台设备</p></li></ul></li><li><p>域名:</p><ul><li>比如 <a href="http://www.jd.com" target="_blank" rel="noopener noreferrer">www.jd.com</a> 就是域名 ，方便记忆</li><li>我们购买了云服务器之后, 服务器会有一个IP地址,  我们可以通过域名解析让域名指向当前IP</li><li>域名和ip地址绑定后，通过域名就可以找到对应的ip地址, 从而访问到该服务器</li></ul></li><li><p>端口:</p><ul><li><p>一台计算机能运行很多程序, 一般一个程序会占用一个或者多个端口</p></li><li><p>http协议的默认端口是80</p></li><li><p>https协议的默认端口是443</p></li><li><p>数据库的默认端口3306</p></li></ul></li></ul></li><li><p>浏览器与服务器的交互过程</p><ol><li>根据相关域名, 去查询dns服务器,得到对应的ip地址</li><li>根据IP地址, 找到对应的计算机</li><li>根据端口找到对应的服务器程序</li><li>根据url请求具体的信息</li><li>服务器根据请求进行处理</li><li>浏览器接收到了服务器的响应, 把结果响应出来</li></ol></li></ul><p><img loading="lazy" alt="image-20210511130054287" src="/assets/images/lct-1662194702939-a7554a508fd73922006ee1aeb9c5604f.png" width="1022" height="651" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="71-什么是http模块">7.1 什么是http模块<a class="hash-link" href="#71-什么是http模块" title="标题的直接链接">​</a></h2><p>http 模块是 Node.js 官方提供的、用来创建web 服务器的模块。它提供了一系列的方法和属性，例如：</p><p>⚫ http.createServer() 方法，用来创建一个web 服务器，从而对外提供web 资源
⚫ http.request() 方法，用来发起 http 网络请求，请求其它web 服务器上的资源</p><p>如果要在 JavaScript 代码中使用 http 模块，则需要先导入它：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="72-创建最基本的web服务器">7.2 创建最基本的web服务器<a class="hash-link" href="#72-创建最基本的web服务器" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="创建web服务器的基本步骤">创建web服务器的基本步骤<a class="hash-link" href="#创建web服务器的基本步骤" title="标题的直接链接">​</a></h3><p>① 导入 http 模块
② 创建 web 服务器实例
③ 启动服务器
④ 为服务器实例绑定request 事件，监听客户端的请求</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="创建web实现">创建web实现<a class="hash-link" href="#创建web实现" title="标题的直接链接">​</a></h3><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ① 导入 http 模块 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ② 创建 web 服务器实例 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ④ 启动服务器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my server start work&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ③ 为服务器实例绑定 request 事件，监听客户端的请求 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 当客户端发送请求到服务器的时候，会触发这个事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 这里要处理客户端的请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;hello html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="端口号">端口号<a class="hash-link" href="#端口号" title="标题的直接链接">​</a></h3><p>计算机中的端口号，就好像是现实生活中的门牌号一样。通过门牌号，外卖小哥可以在整栋大楼众多的房间中，准确把外卖 送到你的手中。
同样的道理，在一台服务器中，可以运行成百上千个web 服务。此时，通过端口号，客户端发送过来的网络请求，可以被准 确地交给端口号对应的web 服务进行处理。</p><p><img loading="lazy" src="/assets/images/Snipaste_2020-10-09_10-58-59-1662194702939-b33e9b9384b11a7069be9bad5e9eae32.png" width="1190" height="300" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="73-request对象详解">7.3 request对象详解<a class="hash-link" href="#73-request对象详解" title="标题的直接链接">​</a></h2><p>文档地址：<a href="http://nodejs.cn/api/http.html#http_request_method" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/http.html#http_request_method</a></p><p>常见属性：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> 所有的请求头信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">method： 请求的方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">url： 请求的地址</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意：在发送请求的时候，可能会出现两次请求的情况，这是因为谷歌浏览器会自动增加一个<code>favicon.ico</code>的请求。</p><p>小结：request对象中，常用的就是method和url两个参数</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="74-response对象详解">7.4 response对象详解<a class="hash-link" href="#74-response对象详解" title="标题的直接链接">​</a></h2><p>文档地址：<a href="http://nodejs.cn/api/http.html#http_class_http_serverresponse" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/http.html#http_class_http_serverresponse</a></p><p>常见的属性和方法：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> 给浏览器发送响应体，可以调用多次，从而提供连续的请求体</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   通知浏览器，所有响应头和响应主体都已被发送，即服务器将其视为已完成。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> 结束请求，并且响应一段内容，相当于res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">statusCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> 响应的的状态码 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">404</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">statusMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> 响应的状态信息， </span><span class="token constant" style="color:#36acaa">OK</span><span class="token plain"> </span><span class="token maybe-class-name">Not</span><span class="token plain"> </span><span class="token maybe-class-name">Found</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">会根据statusCode自动设置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> 设置响应头信息， 比如content</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">statusCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> statusMessage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> 设置响应头，同时可以设置状态码和状态信息。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>注意：必须先设置响应头，才能设置响应。</strong></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="解决中文乱码问题">解决中文乱码问题<a class="hash-link" href="#解决中文乱码问题" title="标题的直接链接">​</a></h3><p>当调用 res.end() 方法，向客户端发送中文内容的时候，会出现乱码问题，此时，需要手动设置内容的编码格式：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text/html; charset=utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="根据不同的url响应不同的html内容">根据不同的url响应不同的html内容<a class="hash-link" href="#根据不同的url响应不同的html内容" title="标题的直接链接">​</a></h3><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my server running&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text/html; charset=utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 获取请求的url地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&lt;h1&gt;首页&lt;/h1&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/about.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&lt;h1&gt;关于我们&lt;/h1&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&lt;h1&gt;404&lt;/h1&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="案例时钟案例">案例：时钟案例<a class="hash-link" href="#案例时钟案例" title="标题的直接链接">​</a></h2><h1>8. 实现静态WEB服务器</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="81-服务器响应首页">8.1 服务器响应首页<a class="hash-link" href="#81-服务器响应首页" title="标题的直接链接">​</a></h2><ul><li>注意：浏览器中输入的URL地址，仅仅是一个标识，不与服务器中的目录一致。也就是说：返回什么内容是由服务端的逻辑决定</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./index.html&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;您访问的资源不存在~&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="82-根据根据不同url响应不同文件">8.2 根据根据不同url，响应不同文件<a class="hash-link" href="#82-根据根据不同url响应不同文件" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="content-type设置-mime类型">content-type设置-MIME类型<a class="hash-link" href="#content-type设置-mime类型" title="标题的直接链接">​</a></h3><ul><li>MIME(Multipurpose Internet Mail Extensions)多用途Internet邮件扩展类型 是一种表示文档性质和格式的标准化方式</li><li>浏览器通常使用MIME类型（而不是文件扩展名）来确定如何处理文档；因此服务器将正确的MIME类型附加到响应对象的头部是非常重要的</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_Types" target="_blank" rel="noopener noreferrer">MIME 类型</a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="静态资源的通用处理">静态资源的通用处理<a class="hash-link" href="#静态资源的通用处理" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mime类型的通用处理-mime模块">MIME类型的通用处理-mime模块<a class="hash-link" href="#mime类型的通用处理-mime模块" title="标题的直接链接">​</a></h3><ul><li>作用：获取文件的MIME类型</li><li>安装：<code>npm i mime</code></li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;mime&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 获取路径对应的MIME类型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;txt&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// ⇨ &#x27;text/plain&#x27; 纯文本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 根据MIME获取到文件后缀名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getExtension</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;text/plain&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ⇨ &#x27;txt&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="83-工具-live-server">8.3 工具 live-server<a class="hash-link" href="#83-工具-live-server" title="标题的直接链接">​</a></h2><p>npm官网查询<a href="https://www.npmjs.com/package/live-server" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/live-server</a></p><h1>9. 模块化</h1><p><code>问题: 当一个文件的js代码越来越多的时候,会出现什么问题?</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="91-什么是模块化">9.1 什么是模块化<a class="hash-link" href="#91-什么是模块化" title="标题的直接链接">​</a></h2><blockquote><p>一个模块其实指的就是一个独立的js文件</p></blockquote><p><strong>模块化</strong>是指解决一个复杂问题时，自顶向下逐层把系统划分成若干模块的过程。 对于整个系统来说，模块是可组合、分解和更换的单元。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="编程中的模块化">编程中的模块化<a class="hash-link" href="#编程中的模块化" title="标题的直接链接">​</a></h3><p>编程领域中的模块化，就是<strong>遵守固定的规则</strong>，把一个大文件拆成独立并互相依赖的多个小模块。</p><p>把代码进行模块化拆分的好处:</p><ul><li>提高了代码的复用性</li><li>提高了代码的可维护性</li><li>可以实现按需加载</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="92-模块化规范">9.2 模块化规范<a class="hash-link" href="#92-模块化规范" title="标题的直接链接">​</a></h2><p><strong>模块化规范</strong>就是对代码进行模块化的拆分与组合时，需要遵守的那些规则。</p><p>例如:</p><ul><li>使用什么样的语法格式来引用模块   比如: require(&#x27;fs&#x27;)</li><li>在模块中使用什么样的语法格式向外暴露成员 (目前没有学习，马上学习)</li></ul><p><strong>模块化规范的好处</strong>:</p><ol><li>大家都遵守同样的模块化规范写代码，降低了沟通的成本</li><li>极大方便了各个模块之间的相互调用， 利人利己</li></ol><blockquote><p><strong>我们自己写模块，也要遵守模块化的标准</strong>。</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="93-了解commonjs规范">9.3 了解CommonJS规范<a class="hash-link" href="#93-了解commonjs规范" title="标题的直接链接">​</a></h2><blockquote><p>早期, js没有模块化规范, js越来越火, 想要用js开发大型项目, 必须要有模块化的规范。</p><p>民间出现了大量的js的模块化规范</p><p>--------最终演变成----------</p><p>浏览器端的模块化规范</p><p>服务端的模块化规范</p></blockquote><p>模块化规范的种类：</p><ul><li>AMD   浏览器端（国外 - 代表：requirejs）</li><li>CMD   浏览器端（国内 - 代表：seajs）</li><li>CommonJS  服务器端 (代表: nodejs)</li><li>ES6  大一统,  将来浏览器和服务器端统一的模块化语法标准（重点）</li></ul><p>Node.js 遵循了 CommonJS 模块化规范，CommonJS 规定了模块的特性和各模块之间如何相互依赖。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="94-nodejs-中模块的分类">9.4 Node.js 中模块的分类<a class="hash-link" href="#94-nodejs-中模块的分类" title="标题的直接链接">​</a></h2><p>Node.js 中根据模块来源的不同，将模块分为了 3 大类，分别是:</p><ul><li><p>内置模块(内置模块是由 Node.js 官方提供的，例如 fs、path、http 等)</p></li><li><p>自定义模块(用户创建的每个 <code>.js</code> 文件，都是自定义模块)</p></li><li><p>第三方模块(由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载)</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="95-加载模块">9.5 加载模块<a class="hash-link" href="#95-加载模块" title="标题的直接链接">​</a></h2><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 加载核心模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 加载第三方模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> express </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;express&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 加载自定义模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//加载自定义模块，需要加上 ./  ,可以省略后缀js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> custom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./custom&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>注意事项</strong>：</p><ul><li>无论是什么模块，我们都要使用 <code>require()</code> 去加载，然后才能使用。</li><li>加载自定义的模块，需要加 <code>./</code> ，而且可以省略后缀 <code>.js</code></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="96-自定义模块的实现重点">9.6 自定义模块的实现（重点）<a class="hash-link" href="#96-自定义模块的实现重点" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs中的模块作用域">Node.js中的模块作用域<a class="hash-link" href="#nodejs中的模块作用域" title="标题的直接链接">​</a></h3><p>在 Node.js 中，<strong>用户创建</strong>的每个 <code>.js</code> 文件都是自定义模块。 在自定义模块中定义的变量、方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做<strong>模块作用域</strong>。</p><blockquote><p>模块作用域的好处是避免了全局变量污染。</p></blockquote><p>由于模块具有一个模块级别的作用域，则另一个JS文件就无法使用当前模块定义的内容，如下图所示。</p><p><img loading="lazy" alt="image-20200402000708938" src="/assets/images/image-20200402000708938-227ff0f40d12b0208705d895cd5b3e8f.png" width="1808" height="614" class="img_ev3q"></p><p>CommonJS 规定:</p><ol><li><p>每个模块内部，<code>module</code> 变量代表当前模块。</p></li><li><p>module 变量是一个对象，它的 <code>exports</code> 属性(即 module.exports)是对外的接口。</p></li><li><p>加载某个模块，其实是加载该模块的 <code>module.exports</code> 属性。require() 方法用于加载模块。</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="导出导入模块">导出导入模块<a class="hash-link" href="#导出导入模块" title="标题的直接链接">​</a></h3><p>为了能正常使用加载的模块中的成员，CommonJS给出了标准，即</p><ul><li>一个模块需要使用 <code>module.exports</code> 导出需要共享的内容。</li><li>使用模块的JS文件需要使用 <code>require()</code> 导入模块。</li></ul><p><img loading="lazy" alt="image-20200402001657713" src="/assets/images/image-20200402001657713-33771cd8a7d571f94c9f8a8579c033de.png" width="2670" height="964" class="img_ev3q"></p><blockquote><p>模块导出的是什么，另一个使用模块的JS文件得到的就是什么。</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="97-require加载模块的机制">9.7 require()加载模块的机制<a class="hash-link" href="#97-require加载模块的机制" title="标题的直接链接">​</a></h2><p>加载自定义模块和其他模块的机制有相同之处，也有不同之处，所以这里分开来看。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="加载自定义模块">加载自定义模块<a class="hash-link" href="#加载自定义模块" title="标题的直接链接">​</a></h3><ol><li>首次加载成功，会缓存模块</li><li>下次从缓存中加载，速度更快</li><li>加载自定义模块必须加 <code>./</code> ，如果是其他路径，对应变化，否则会把它当做核心模块或者第三方模块</li><li>加载自定义模块的时候，如果是 <code>require(&#x27;./abc&#x27;)</code><ol><li>优先加载相同名字的文件，加载一个叫做 abc 的文件</li><li>自动补 <code>.js</code> 后缀，然后加载 <code>abc.js</code> 文件</li><li>自动补 <code>.json</code> 后缀，然后加载 <code>abc.json</code> 文件</li><li>自动补 <code>.node</code> 后缀，然后加载 <code>abc.node</code> 文件</li><li>以上文件都没有，则报错 <code>Cannot find module &#x27;./abc&#x27;</code></li></ol></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="加载核心模块和第三方模块">加载核心模块和第三方模块<a class="hash-link" href="#加载核心模块和第三方模块" title="标题的直接链接">​</a></h3><ol><li><p>首次加载成功，会缓存模块</p></li><li><p>下次从缓存中加载，速度更快</p></li><li><p>加载模块一定<code>不能</code>加 <code>./</code> ，否则会把它当做自定义模块</p></li><li><p>加载模块的时候，如果是 <code>require(&#x27;haha&#x27;)</code></p><ol><li><p>优先加载核心模块</p></li><li><p>去查找并加载第三方模块，查找第三方模块的路径可以通过 <code>module.paths</code> 查看</p><p>[</p><p> &#x27;C:<!-- -->\<!-- -->Users<!-- -->\<!-- -->04-案例<!-- -->\<!-- -->01-模块化<!-- -->\<!-- -->03-自定义模块加载细节<!-- -->\<!-- -->node_modules&#x27;,
&#x27;C:<!-- -->\<!-- -->Users<!-- -->\<!-- -->04-案例<!-- -->\<!-- -->01-模块化<!-- -->\<!-- -->node_modules&#x27;,
&#x27;C:<!-- -->\<!-- -->Users<!-- -->\<!-- -->04-案例<!-- -->\<!-- -->node_modules&#x27;,
&#x27;C:<!-- -->\<!-- -->Users<!-- -->\<!-- -->Desktop<!-- -->\<!-- -->node_modules&#x27;,
&#x27;C:<!-- -->\<!-- -->Users<!-- -->\<!-- -->onmyoji<!-- -->\<!-- -->node_modules&#x27;,
&#x27;C:<!-- -->\<!-- -->Users<!-- -->\<!-- -->node_modules&#x27;,
&#x27;C:<!-- -->\<!-- -->node_modules&#x27;</p><p>]</p></li><li><p>加载第三方模块会从当前目录开始寻找node_modules文件夹， 如果找到进入node_modules文件夹寻找对应的模块。如果没找到，进入上一级目录继续寻找node_modules，一直到根目录。如果一直没有找到，提示未找到模块。</p></li></ol></li></ol><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  面试题: exports 和  module.exports 的区别?</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  相同点: 都是用于对外暴露模块中的内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  不同点:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    1) module.exports可以直接赋值一个对象, 对象里面包含了要暴露的属性和方法 </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    2) 但exports不行, 必须一个个的添加需要暴露的属性和方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  结论:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    实际开发中, 统一用module.exports对外暴露内容  </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>10. npm初步使用</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="101-介绍">10.1 介绍<a class="hash-link" href="#101-介绍" title="标题的直接链接">​</a></h2><p>npm（node  package  manager）node包管理器。</p><p>包是什么？包就是模块。</p><p>npm这个工具，在安装node的时候，就已经安装到你的计算机中了。</p><p>命令行中执行： <code>npm -v</code> ，如果看到版本号，说明安装成功了。</p><p>npm中文网: <a href="https://www.npmjs.com.cn/" target="_blank" rel="noopener noreferrer">https://www.npmjs.com.cn/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="102-作用">10.2 作用<a class="hash-link" href="#102-作用" title="标题的直接链接">​</a></h2><p>npm的作用是：管理node模块的工具。</p><ul><li>下载并安装第三方的模块</li><li>卸载第三方模块</li><li>....</li></ul><p>第三方模块：</p><ul><li>非内置模块，安装完node，还不能使用的模块，需要从网上下载安装，才能使用的模块</li><li>第三方模块是个人、公司、组织编写的模块，发布到网上，供我们使用</li></ul><blockquote><p>npm 就是一个管理（下载安装、卸载...）第三方模块的工具</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="103-初始化">10.3 初始化<a class="hash-link" href="#103-初始化" title="标题的直接链接">​</a></h2><p>使用npm工具之前，必须先初始化。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> init -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 或</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 然后一路回车</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>初始化之后，会在项目目录中生成 package.json 的文件。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="104-什么第三方模块">10.4 什么第三方模块<a class="hash-link" href="#104-什么第三方模块" title="标题的直接链接">​</a></h2><p>非node自带的模块。</p><p>是别人写的模块，然后发布到npm网站，我们可以使用npm工具来下载安装别人写的模块。</p><p>第三方模块，都是在node核心模块的基础之上，封装了一下，实现了很多非常方便快速简洁的方法。</p><p>目前，npm网站收录了超过 150万个第三方模块。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="105-安装卸载项目模块">10.5 安装卸载项目模块<a class="hash-link" href="#105-安装卸载项目模块" title="标题的直接链接">​</a></h2><p>下载安装第三方模块</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> 模块名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i 模块名</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>卸载模块</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> uninstall 模块名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> un 模块名</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="106-关于项目模块的说明">10.6 关于项目模块的说明<a class="hash-link" href="#106-关于项目模块的说明" title="标题的直接链接">​</a></h2><ul><li>下载安装的模块，存放在当前文件夹的 <code>node_modules</code> 文件夹中，同时还会生成一个记录下载的文件 <code>package-lock.json</code></li><li>下载的模块，在哪里可以使用<ul><li>在当前文件夹</li><li>在当前文件夹的子文件夹</li><li>在当前文件夹的子文件夹的子文件夹</li><li>......</li></ul></li><li>怎样使用第三方模块<ul><li>和使用内置模块一样，需要使用 <code>require</code> 加载模块</li><li>调用模块提供的方法完成工作（一般好的模块都会用使用文档的）</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="107-演示下载安装第三方模块">10.7 演示下载安装第三方模块<a class="hash-link" href="#107-演示下载安装第三方模块" title="标题的直接链接">​</a></h2><p>这里演示一个处理时间日期的模块 -- moment</p><p><a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer">http://momentjs.cn/</a></p><p>下载安装moment模块</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> init -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i moment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>演示使用moment模块处理时间</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 加载模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> moment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;moment&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">moment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;YYYY-MM-DD hh:mm:ss&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 官网：http://momentjs.cn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="108-dependencies说明">10.8 dependencies说明<a class="hash-link" href="#108-dependencies说明" title="标题的直接链接">​</a></h2><p> 1、作用：保存依赖包的记录。</p><p> 2、以后如果看到我们项目中 没有node_modules目录， 但是有 package.json。说明我们项目是完整的。执行 npm i 会找 package.json 里面的 dependencies， 并且安装里面的所有依赖包</p><p> 3、执行 npm i 命令 要在 package.json 同级目录。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="109-全局模块">10.9 全局模块<a class="hash-link" href="#109-全局模块" title="标题的直接链接">​</a></h2><ul><li><p>全局安装的模块，不能通过 <code>require()</code> 加载使用。</p></li><li><p>全局安装的模块，一般都是命令或者工具。</p></li><li><p>安装方法，在安装模块的命令后面，加 <code>-g</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i 模块名 -g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 或</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i -g 模块名</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>查看全局安装的模块</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> list -g --depth </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>卸载方法（也是多一个 <code>-g</code>）</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> un 模块名 -g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>全局安装的模块，在系统盘（C盘）</p><ul><li>通过命令 <code>npm root -g</code> 可以查看全局安装路径</li></ul></li></ul><blockquote><p>mac安装过程可能出现权限问题，可以使用 sudo npm i xxx -g</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1010-全局安装nodemon模块">10.10 全局安装nodemon模块<a class="hash-link" href="#1010-全局安装nodemon模块" title="标题的直接链接">​</a></h2><ul><li><p>安装命令</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i nodemon -g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>nodemon的作用：</p></li><li><p><strong>代替node命令，启动服务的，当更改代码之后，nodemon会自动帮我们重启服务。</strong></p></li><li><p>运行nodemon，如果报错如下：</p></li></ul><p><img loading="lazy" alt="158547242055" src="/assets/images/1585472428055-b711163ca2e38eb69c913a1c5e6d9f60.png" width="1519" height="110" class="img_ev3q"></p><ul><li>解决办法是：<ul><li><code>管理员</code>方式，打开命令行窗口</li><li>执行 <code>set-ExecutionPolicy RemoteSigned;</code></li><li>在出现的选项中，输入 <code>A</code>，回车。即可</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1011-本地安装和全局安装区别">10.11 本地安装和全局安装区别<a class="hash-link" href="#1011-本地安装和全局安装区别" title="标题的直接链接">​</a></h2><p>有两种方式用来安装 npm 包：本地安装和全局安装。选用哪种方式来安装，取决于你如何使用这个包。</p><ol><li>本地安装</li></ol><ul><li>说明 : 想把我们用的包,安装到当前本地项目中使用</li><li>比如 : npm i jquery , npm i moment</li><li>要求 : 执行的安装命令(npm i moment) 位置,必须在当前项目下执行</li><li>包位置 :  本地安装的包 =&gt; 当前项目下的 node_modules</li><li>使用包 :  <code>const moment = require(&#x27;moment&#x27;)  , const $ = require(&#x27;jquery&#x27;)</code></li></ul><ol start="2"><li>全局安装</li></ol><ul><li><p>说明 : 想把一个包/库,当成一个<code>工具</code>来使用, 就采用全局安装</p></li><li><p>比如 : <code>npm i  -g live-server</code></p></li><li><p>要求 : 可以在任意地方, 都可以执行命令  </p></li><li><p>包位置 : <code>C:\Users\用户名\AppData\Roaming\npm</code></p></li><li><p>使用包 :  在<code>终端命令行</code>里使用, 不能在代码里</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1012-更改镜像源">10.12 更改镜像源<a class="hash-link" href="#1012-更改镜像源" title="标题的直接链接">​</a></h2><p>镜像源，就是下载安装第三方模块的网站。</p><p>我们下载的第三方模块都是从国外的npm主站下载的，速度比较慢。</p><p>淘宝在国内对npm上的第三方模块做了一个备份，也就是说，我们可以从国内下载第三方模块。</p><p>除了淘宝之外，还有很多其他镜像源。</p><p>简单的更改镜像源方法：</p><ul><li>全局安装 nrm 的模块<ul><li>nrm  用于管理镜像源</li></ul></li><li>使用nrm<ul><li><code>nrm ls</code> 通过这个命令，可以查看可用的镜像源</li><li><code>nrm use taobao</code> ，切换下载模块的网站为淘宝</li></ul></li></ul><p><a href="https://www.jianshu.com/p/90893d947432" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/90893d947432</a></p><h1>11. 同源&amp;跨域</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="111-什么是同源">11.1 什么是同源?<a class="hash-link" href="#111-什么是同源" title="标题的直接链接">​</a></h2><p>同源指的是两个URL地址具有<strong>相同的协议地址、主机名、端口号</strong>。</p><p>例如，下表给出了相对于 <a href="http://www.test.com/index.html" target="_blank" rel="noopener noreferrer">http://www.test.com/index.html</a> 页面的 5 个同源检测结果：</p><p><img loading="lazy" alt="158547242055" src="/assets/images/ty-1-c80dc1ac43e92d79c17cc0c08764e9bb.png" width="1403" height="440" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="112-什么是同源策略">11.2 什么是同源策略?<a class="hash-link" href="#112-什么是同源策略" title="标题的直接链接">​</a></h2><p>同源策略（英文全称 Same origin policy）是浏览器提供的一个安全功能。
浏览器的同源策略规定：不允许非同源的 URL 之间进行资源的交互。</p><p><img loading="lazy" alt="158547242055" src="/assets/images/ty-2-2946cf3611a7b811bd3e8a2b19262bdc.png" width="1330" height="374" class="img_ev3q"></p><blockquote><p>请大家思考：如果没有浏览器，还会有同源策略吗？
A. 有
B. 没有</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="113-什么是跨域">11.3 什么是跨域?<a class="hash-link" href="#113-什么是跨域" title="标题的直接链接">​</a></h2><p>同源指的是两个 URL 的协议、主机名、端口号完全一致，反之，则是跨域。</p><p>出现跨域的根本原因：浏览器的同源策略不允许非同源的 URL 之间进行资源的交互。例如：</p><ul><li>网页：<a href="http://www.test.com/index.html" target="_blank" rel="noopener noreferrer">http://www.test.com/index.html</a></li><li>接口：<a href="http://www.api.com/userlist" target="_blank" rel="noopener noreferrer">http://www.api.com/userlist</a></li><li>受到同源策略的限制，上面的网页请求下面的接口会失败！</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1131-浏览器对跨域请求的拦截过程">11.3.1 浏览器对跨域请求的拦截过程?<a class="hash-link" href="#1131-浏览器对跨域请求的拦截过程" title="标题的直接链接">​</a></h3><p>浏览器允许发起跨域请求。但跨域请求回来的数据，会被浏览器拦截，无法被页面获取到！示意图如下：</p><p><img loading="lazy" alt="158547242055" src="/assets/images/ty-3-3bbe2d9b23500d98f309e559f0a872d7.png" width="1376" height="585" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1132-突破浏览器跨域限制的两种方案">11.3.2 突破浏览器跨域限制的两种方案?<a class="hash-link" href="#1132-突破浏览器跨域限制的两种方案" title="标题的直接链接">​</a></h3><p>代理服务器 和 CORS 是实现跨域数据请求的两种技术方案。</p><blockquote><p>注意：</p><p> 1) 代理服务器跨域在后面vue课程中会讲到</p><p> 2) CORS 是跨域的主流技术解决方案</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cors-的概念">CORS 的概念<a class="hash-link" href="#cors-的概念" title="标题的直接链接">​</a></h4><p>1) CORS 是解决跨域数据请求的终极解决方案，全称是 Cross-origin resource sharing。</p><p>2) CORS 技术需要浏览器和服务器同时支持，二者缺一不可：</p><ul><li>浏览器要支持 CORS 功能（主流的浏览器全部支持，IE 不能低于 IE10）</li><li>服务器要开启 CORS 功能（需要后端开发者为接口开启 CORS 功能）</li></ul><blockquote><p>请大家思考：实现 CORS 的关键，是在客户端还是在服务器端？</p><p>答案：服务器端。
原因：如果服务器端没有开启 CORS 功能，则客户端无法访问那些跨域的接口！</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cors-的原理">CORS 的原理<a class="hash-link" href="#cors-的原理" title="标题的直接链接">​</a></h4><p>服务器端通过 Access-Control-Allow-Origin 响应头，来告诉浏览器当前的 API 接口是否允许跨域请求。</p><p><img loading="lazy" alt="158547242055" src="/assets/images/ty-4-346a91180ef9197432c3c048c9303af6.png" width="1381" height="621" class="img_ev3q"></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cors-的两个主要优势">CORS 的两个主要优势<a class="hash-link" href="#cors-的两个主要优势" title="标题的直接链接">​</a></h4><p>1) CORS 是真正的 Ajax 请求，支持 GET、POST、DELETE、PUT、PATCH 等这些常见的 Ajax 请求方式
2) 只需要后端开启 CORS 功能即可，前端的代码无须做任何改动</p><blockquote><p>注意：</p><p>我们之前做过的案例中，所有调用的接口均已在服务器端开启了 CORS 功能！
例如：聊天机器人案例、新闻列表案例、用户登录案例</p></blockquote><p>案例：CORS主要通过后端来实现，node.js也可以实现后端处理，只需设置一个一个相应头：</p><p> <code>res.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;)</code></p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const http = require(&#x27;http&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const fs = require(&#x27;fs&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const path = require(&#x27;path&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http.createServer((req, res)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if(req.url === &#x27;/api/news&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       // 读取本地的JSON文件, 返回</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       fs.readFile(path.join(__dirname, &#x27;data/list.json&#x27;), (err, data)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           if(err){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             return console.log(&#x27;读取的文件不存在&#x27;, err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // 响应回去</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           res.setHeader(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // 配置CORS进行跨域</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           res.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;)   //所有域都可以用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // res.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;https://www.mi.com&#x27;)    //设定mi.com的域</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           res.end(data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       })    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}).listen(3000, ()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;3000端口的web服务器已经启动&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/JavaScript/git/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">git和数据可视化</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/JavaScript/webpack/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">ES6模块化与webpack</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#11-为什么要学习nodejs" class="table-of-contents__link toc-highlight">1.1 为什么要学习nodejs?</a></li><li><a href="#12-浏览器与javascript" class="table-of-contents__link toc-highlight">1.2 浏览器与javaScript</a><ul><li><a href="#js的组成部分" class="table-of-contents__link toc-highlight">js的组成部分</a></li><li><a href="#浏览器的组成部分" class="table-of-contents__link toc-highlight">浏览器的组成部分</a></li><li><a href="#为什么js可以操作网页内容和浏览器功能" class="table-of-contents__link toc-highlight">为什么JS可以操作&quot;网页内容&quot;和&quot;浏览器功能&quot;?</a></li></ul></li><li><a href="#13-nodejs简介" class="table-of-contents__link toc-highlight">1.3 nodejs简介</a><ul><li><a href="#什么是nodejs" class="table-of-contents__link toc-highlight">什么是nodejs?</a></li><li><a href="#nodejs与浏览器的区别" class="table-of-contents__link toc-highlight">nodejs与浏览器的区别?</a></li><li><a href="#nodejs可以做什么" class="table-of-contents__link toc-highlight">Node.js可以做什么?</a></li><li><a href="#nodejs怎么学" class="table-of-contents__link toc-highlight">Node.js怎么学?</a></li></ul></li><li><a href="#21-版本说明" class="table-of-contents__link toc-highlight">2.1 版本说明</a></li><li><a href="#22-安装nodejs" class="table-of-contents__link toc-highlight">2.2 安装nodejs</a><ul><li><a href="#windows安装步骤" class="table-of-contents__link toc-highlight">windows安装步骤</a></li><li><a href="#mac安装步骤" class="table-of-contents__link toc-highlight">mac安装步骤</a></li></ul></li><li><a href="#23-终端的使用" class="table-of-contents__link toc-highlight">2.3 终端的使用</a><ul><li><a href="#windows打开终端的方式" class="table-of-contents__link toc-highlight">windows打开终端的方式</a></li><li><a href="#mac打开终端的方式" class="table-of-contents__link toc-highlight">mac打开终端的方式</a></li></ul></li><li><a href="#24-终端常见操作" class="table-of-contents__link toc-highlight">2.4 终端常见操作</a></li><li><a href="#51-读取文件" class="table-of-contents__link toc-highlight">5.1 读取文件</a></li><li><a href="#52-写文件" class="table-of-contents__link toc-highlight">5.2 写文件</a></li><li><a href="#53-追加文件" class="table-of-contents__link toc-highlight">5.3 追加文件</a></li><li><a href="#54-练习-考试成绩整理" class="table-of-contents__link toc-highlight">5.4 练习-考试成绩整理</a></li><li><a href="#55-fs-模块-路径动态拼接的问题" class="table-of-contents__link toc-highlight">5.5 fs 模块-路径动态拼接的问题</a></li><li><a href="#61-什么是path路径模块" class="table-of-contents__link toc-highlight">6.1 什么是path路径模块?</a></li><li><a href="#62-路径拼接" class="table-of-contents__link toc-highlight">6.2 路径拼接</a><ul><li><a href="#pathjoin的语法格式" class="table-of-contents__link toc-highlight">path.join()的语法格式</a></li><li><a href="#pathjoin的代码示例" class="table-of-contents__link toc-highlight">path.join()的代码示例</a></li></ul></li><li><a href="#63-获取路径中的文件名" class="table-of-contents__link toc-highlight">6.3 获取路径中的文件名</a><ul><li><a href="#pathbasename的语法格式" class="table-of-contents__link toc-highlight">path.basename()的语法格式</a></li><li><a href="#pathbasename的代码示例" class="table-of-contents__link toc-highlight">path.basename()的代码示例</a></li></ul></li><li><a href="#64-获取路径中的文件扩展名" class="table-of-contents__link toc-highlight">6.4 获取路径中的文件扩展名</a><ul><li><a href="#pathextname的语法格式" class="table-of-contents__link toc-highlight">path.extname()的语法格式</a></li><li><a href="#pathextname的代码示例" class="table-of-contents__link toc-highlight">path.extname()的代码示例</a></li></ul></li><li><a href="#71-什么是http模块" class="table-of-contents__link toc-highlight">7.1 什么是http模块</a></li><li><a href="#72-创建最基本的web服务器" class="table-of-contents__link toc-highlight">7.2 创建最基本的web服务器</a><ul><li><a href="#创建web服务器的基本步骤" class="table-of-contents__link toc-highlight">创建web服务器的基本步骤</a></li><li><a href="#创建web实现" class="table-of-contents__link toc-highlight">创建web实现</a></li><li><a href="#端口号" class="table-of-contents__link toc-highlight">端口号</a></li></ul></li><li><a href="#73-request对象详解" class="table-of-contents__link toc-highlight">7.3 request对象详解</a></li><li><a href="#74-response对象详解" class="table-of-contents__link toc-highlight">7.4 response对象详解</a><ul><li><a href="#解决中文乱码问题" class="table-of-contents__link toc-highlight">解决中文乱码问题</a></li><li><a href="#根据不同的url响应不同的html内容" class="table-of-contents__link toc-highlight">根据不同的url响应不同的html内容</a></li></ul></li><li><a href="#案例时钟案例" class="table-of-contents__link toc-highlight">案例：时钟案例</a></li><li><a href="#81-服务器响应首页" class="table-of-contents__link toc-highlight">8.1 服务器响应首页</a></li><li><a href="#82-根据根据不同url响应不同文件" class="table-of-contents__link toc-highlight">8.2 根据根据不同url，响应不同文件</a><ul><li><a href="#content-type设置-mime类型" class="table-of-contents__link toc-highlight">content-type设置-MIME类型</a></li><li><a href="#静态资源的通用处理" class="table-of-contents__link toc-highlight">静态资源的通用处理</a></li><li><a href="#mime类型的通用处理-mime模块" class="table-of-contents__link toc-highlight">MIME类型的通用处理-mime模块</a></li></ul></li><li><a href="#83-工具-live-server" class="table-of-contents__link toc-highlight">8.3 工具 live-server</a></li><li><a href="#91-什么是模块化" class="table-of-contents__link toc-highlight">9.1 什么是模块化</a><ul><li><a href="#编程中的模块化" class="table-of-contents__link toc-highlight">编程中的模块化</a></li></ul></li><li><a href="#92-模块化规范" class="table-of-contents__link toc-highlight">9.2 模块化规范</a></li><li><a href="#93-了解commonjs规范" class="table-of-contents__link toc-highlight">9.3 了解CommonJS规范</a></li><li><a href="#94-nodejs-中模块的分类" class="table-of-contents__link toc-highlight">9.4 Node.js 中模块的分类</a></li><li><a href="#95-加载模块" class="table-of-contents__link toc-highlight">9.5 加载模块</a></li><li><a href="#96-自定义模块的实现重点" class="table-of-contents__link toc-highlight">9.6 自定义模块的实现（重点）</a><ul><li><a href="#nodejs中的模块作用域" class="table-of-contents__link toc-highlight">Node.js中的模块作用域</a></li><li><a href="#导出导入模块" class="table-of-contents__link toc-highlight">导出导入模块</a></li></ul></li><li><a href="#97-require加载模块的机制" class="table-of-contents__link toc-highlight">9.7 require()加载模块的机制</a><ul><li><a href="#加载自定义模块" class="table-of-contents__link toc-highlight">加载自定义模块</a></li><li><a href="#加载核心模块和第三方模块" class="table-of-contents__link toc-highlight">加载核心模块和第三方模块</a></li></ul></li><li><a href="#101-介绍" class="table-of-contents__link toc-highlight">10.1 介绍</a></li><li><a href="#102-作用" class="table-of-contents__link toc-highlight">10.2 作用</a></li><li><a href="#103-初始化" class="table-of-contents__link toc-highlight">10.3 初始化</a></li><li><a href="#104-什么第三方模块" class="table-of-contents__link toc-highlight">10.4 什么第三方模块</a></li><li><a href="#105-安装卸载项目模块" class="table-of-contents__link toc-highlight">10.5 安装卸载项目模块</a></li><li><a href="#106-关于项目模块的说明" class="table-of-contents__link toc-highlight">10.6 关于项目模块的说明</a></li><li><a href="#107-演示下载安装第三方模块" class="table-of-contents__link toc-highlight">10.7 演示下载安装第三方模块</a></li><li><a href="#108-dependencies说明" class="table-of-contents__link toc-highlight">10.8 dependencies说明</a></li><li><a href="#109-全局模块" class="table-of-contents__link toc-highlight">10.9 全局模块</a></li><li><a href="#1010-全局安装nodemon模块" class="table-of-contents__link toc-highlight">10.10 全局安装nodemon模块</a></li><li><a href="#1011-本地安装和全局安装区别" class="table-of-contents__link toc-highlight">10.11 本地安装和全局安装区别</a></li><li><a href="#1012-更改镜像源" class="table-of-contents__link toc-highlight">10.12 更改镜像源</a></li><li><a href="#111-什么是同源" class="table-of-contents__link toc-highlight">11.1 什么是同源?</a></li><li><a href="#112-什么是同源策略" class="table-of-contents__link toc-highlight">11.2 什么是同源策略?</a></li><li><a href="#113-什么是跨域" class="table-of-contents__link toc-highlight">11.3 什么是跨域?</a><ul><li><a href="#1131-浏览器对跨域请求的拦截过程" class="table-of-contents__link toc-highlight">11.3.1 浏览器对跨域请求的拦截过程?</a></li><li><a href="#1132-突破浏览器跨域限制的两种方案" class="table-of-contents__link toc-highlight">11.3.2 突破浏览器跨域限制的两种方案?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 胖螺 2020-2023 . <br>
                    <a href="https://www.nahida.cn/" target="_blank" style="color:#fff">纳西妲 世界第一可爱</a> <br>
                  <span style="text-align: center">  本网站由<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img src="https://img.up.cdn.nahida.cn/icon/upyun_logo5.png" width="53px" style="vertical-align: middle; display: inline-block;"></a>提供CDN加速/云存储服务</span>

        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.b2abe4ed.js"></script>
<script src="/assets/js/main.cf17977a.js"></script>
</body>
</html>